<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geographic Detective Academy - World Geography Simulation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
        }

        .header {
            background: rgba(0, 0, 0, 0.8);
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo h1 {
            color: #ffd700;
            font-size: 1.8rem;
            font-weight: bold;
        }

        .logo .subtitle {
            color: #cccccc;
            font-size: 0.9rem;
            font-weight: normal;
        }

        .status-badges {
            display: flex;
            gap: 1rem;
        }

        .badge {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.8rem;
            text-transform: uppercase;
        }

        .classified {
            background: #dc3545;
            color: white;
        }

        .active-case {
            background: #28a745;
            color: white;
        }

        .navigation {
            background: rgba(0, 0, 0, 0.6);
            padding: 0;
            display: flex;
            overflow-x: auto;
            border-bottom: 2px solid #ffd700;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            border-bottom: 3px solid transparent;
            min-width: fit-content;
        }

        .nav-item:hover {
            background: rgba(255, 215, 0, 0.2);
            border-bottom-color: #ffd700;
        }

        .nav-item.active {
            background: rgba(255, 215, 0, 0.3);
            border-bottom-color: #ffd700;
        }

        .nav-item .icon {
            font-size: 1.2rem;
        }

        .nav-item .label {
            font-weight: 500;
        }

        .main-content {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .content-panel {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            margin-bottom: 2rem;
        }

        .simulation-title {
            text-align: center;
            margin-bottom: 2rem;
        }

        .simulation-title h2 {
            color: #1e3c72;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .simulation-title .mystery-title {
            color: #2a5298;
            font-size: 1.5rem;
            font-style: italic;
        }

        .overview-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        .overview-section {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #ffd700;
        }

        .overview-section h3 {
            color: #1e3c72;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .schedule-item {
            background: white;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 5px;
            border-left: 3px solid #28a745;
        }

        .day-label {
            font-weight: bold;
            color: #1e3c72;
        }

        .hidden {
            display: none;
        }

        .case-file {
            background: linear-gradient(145deg, #ffe4e1, #ffd700);
            border: 2px solid #dc3545;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1rem 0;
            color: #333;
        }

        .case-header {
            background: #dc3545;
            color: white;
            padding: 0.5rem 1rem;
            margin: -1.5rem -1.5rem 1rem -1.5rem;
            border-radius: 8px 8px 0 0;
            font-weight: bold;
            text-transform: uppercase;
        }

        .evidence-list {
            list-style: none;
            padding: 0;
        }

        .evidence-list li {
            background: rgba(255, 255, 255, 0.8);
            margin: 0.5rem 0;
            padding: 0.8rem;
            border-radius: 5px;
            border-left: 3px solid #28a745;
        }

        .coordinate-highlight {
            background: #ffd700;
            color: #333;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .overview-content {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                gap: 1rem;
            }
            
            .navigation {
                flex-wrap: wrap;
            }
        }

        /* STUDENT MATERIALS STYLING */
        .materials-section {
            margin: 30px 0;
        }

        .materials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .material-card {
            background: var(--card-background);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .material-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-color: var(--primary-blue);
        }

        .material-header {
            margin-bottom: 15px;
        }

        .material-header h4 {
            color: var(--primary-dark);
            margin: 0 0 8px 0;
            font-size: 1.2rem;
        }

        .material-meta {
            display: flex;
            gap: 15px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .page-count {
            background: var(--primary-blue);
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-weight: bold;
        }

        .format {
            background: var(--secondary-gold);
            color: var(--text-dark);
            padding: 3px 8px;
            border-radius: 12px;
            font-weight: bold;
        }

        .material-description {
            margin: 15px 0;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .material-contents ul {
            margin: 8px 0;
            padding-left: 20px;
        }

        .material-contents li {
            margin: 4px 0;
            color: var(--text-secondary);
        }

        .material-actions {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .download-btn, .preview-btn, .coming-soon-btn {
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .download-btn {
            background: var(--active-green);
            color: white;
        }

        .download-btn:hover {
            background: #15803d;
            transform: translateY(-1px);
        }

        .preview-btn {
            background: var(--primary-blue);
            color: white;
        }

        .preview-btn:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }

        .coming-soon-btn {
            background: var(--warning-amber);
            color: white;
            cursor: not-allowed;
            opacity: 0.8;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .tool-card {
            background: var(--panel-background);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            transition: transform 0.2s ease;
        }

        .tool-card:hover {
            transform: translateY(-2px);
            border-color: var(--secondary-gold);
        }

        .tool-card h4 {
            color: var(--primary-dark);
            margin: 0 0 10px 0;
        }

        .tool-description {
            color: var(--text-secondary);
            margin: 10px 0;
        }

        .tool-features ul {
            margin: 8px 0;
            padding-left: 20px;
        }

        .tool-features li {
            margin: 4px 0;
            color: var(--text-secondary);
        }

        .tool-actions {
            margin-top: 15px;
        }

        /* ===== INVESTIGATION EVENTS STYLING ===== */
        
        .investigation-header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, #1a237e 0%, #3949ab 100%);
            color: white;
            border-radius: 10px;
        }

        .investigation-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #ffd700;
        }

        .mission-statement {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            opacity: 0.95;
        }

        .academy-stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .stat {
            background: rgba(255, 255, 255, 0.15);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-weight: bold;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .event-filters {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #495057;
        }

        .filter-btn:hover {
            background: #e9ecef;
            border-color: #3949ab;
            transform: translateY(-2px);
        }

        .filter-btn.active {
            background: #3949ab;
            color: white;
            border-color: #3949ab;
        }
        
        .search-controls {
            margin: 20px 0;
            display: flex;
            justify-content: center;
        }
        
        .search-input {
            width: 100%;
            max-width: 500px;
            padding: 12px 20px;
            border: 2px solid #dee2e6;
            border-radius: 25px;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
            background: white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .search-input:focus {
            border-color: #3949ab;
            box-shadow: 0 0 0 3px rgba(57, 73, 171, 0.1), 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .search-input::placeholder {
            color: #6c757d;
            font-style: italic;
        }

        .investigation-cases {
            display: grid;
            gap: 2rem;
        }

        .investigation-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .investigation-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #1a237e, #3949ab, #ffd700);
        }

        .investigation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .case-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .case-number {
            background: #1a237e;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: bold;
            font-size: 0.9rem;
            letter-spacing: 1px;
        }

        .case-title {
            color: #1a237e;
            font-size: 1.8rem;
            margin: 0;
            flex: 1;
            min-width: 200px;
        }

        .case-badges {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .difficulty-badge {
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .difficulty-badge.setup {
            background: #6c757d;
            color: white;
        }

        .difficulty-badge.rookie {
            background: #28a745;
            color: white;
        }

        .difficulty-badge.detective {
            background: #ffc107;
            color: #212529;
        }

        .difficulty-badge.specialist {
            background: #fd7e14;
            color: white;
        }

        .difficulty-badge.master {
            background: #dc3545;
            color: white;
        }

        .duration-badge {
            background: #17a2b8;
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .module-badge {
            background: #6f42c1;
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .case-summary {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            border-left: 5px solid #ffd700;
        }

        .case-summary p {
            margin: 0;
            font-size: 1.1rem;
            line-height: 1.6;
            color: #495057;
        }

        .case-details {
            display: none;
        }

        .investigation-card:hover .case-details {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .scenario-box {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            border: 1px solid #ffd700;
        }

        .scenario-box h4 {
            color: #856404;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .scenario-box p {
            margin: 0.5rem 0;
            color: #856404;
        }

        .scenario-box strong {
            color: #533f03;
        }

        .objectives-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .learning-objectives, .geographic-skills {
            background: #e3f2fd;
            padding: 1.5rem;
            border-radius: 10px;
            border: 1px solid #90caf9;
        }

        .learning-objectives h4, .geographic-skills h4 {
            color: #0d47a1;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .learning-objectives ul, .geographic-skills ul {
            margin: 0;
            padding-left: 1.2rem;
        }

        .learning-objectives li, .geographic-skills li {
            margin: 0.5rem 0;
            color: #1565c0;
            line-height: 1.4;
        }

        .implementation-timeline {
            background: #f3e5f5;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            border: 1px solid #ce93d8;
        }

        .implementation-timeline h4 {
            color: #4a148c;
            margin-bottom: 1rem;
        }

        .timeline-item {
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: 1rem;
            align-items: center;
            padding: 0.75rem;
            background: white;
            border-radius: 8px;
            margin: 0.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .time {
            font-weight: bold;
            color: #4a148c;
            min-width: 100px;
        }

        .activity {
            color: #6a1b9a;
        }

        .slide-ref {
            background: #9c27b0;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .team-structure {
            margin-bottom: 1.5rem;
        }

        .team-structure h4 {
            color: #1a237e;
            margin-bottom: 1rem;
        }

        .roles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .role-card {
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #a5d6a7;
            transition: transform 0.2s ease;
        }

        .role-card:hover {
            transform: scale(1.05);
        }

        .role-image {
            margin-bottom: 1rem;
        }

        .role-card-img {
            width: 80px;
            height: 80px;
            border-radius: 12px;
            object-fit: cover;
            border: 3px solid #2e7d32;
            box-shadow: 0 4px 12px rgba(46, 125, 50, 0.3);
            transition: all 0.3s ease;
        }

        .role-card:hover .role-card-img {
            transform: scale(1.1);
            box-shadow: 0 6px 18px rgba(46, 125, 50, 0.4);
        }

        .role-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .role-card h5 {
            color: #1b5e20;
            margin: 0.5rem 0;
            font-size: 1rem;
        }

        .role-card p {
            color: #2e7d32;
            font-size: 0.9rem;
            margin: 0;
            line-height: 1.4;
        }

        /* Enhanced Team Roles Page Styling */
        .role-card.enhanced {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .role-card.enhanced:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(57, 73, 171, 0.2);
            border-color: #3949ab;
        }

        .role-image-container {
            text-align: center;
            margin-bottom: 1.5rem;
            position: relative;
        }

        .role-card-image {
            width: 120px;
            height: 120px;
            border-radius: 15px;
            object-fit: cover;
            border: 4px solid #3949ab;
            box-shadow: 0 6px 20px rgba(57, 73, 171, 0.3);
            transition: all 0.3s ease;
        }

        .role-card.enhanced:hover .role-card-image {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(57, 73, 171, 0.4);
        }

        .role-image-placeholder {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border: 2px dashed #2196f3;
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            margin-bottom: 1rem;
            color: #1976d2;
            font-style: italic;
        }

        .evidence-analysis {
            margin-bottom: 1.5rem;
        }

        .evidence-analysis h4 {
            color: #1a237e;
            margin-bottom: 1rem;
        }

        .evidence-grid {
            display: grid;
            gap: 1rem;
        }

        .evidence-item {
            background: #fff8e1;
            padding: 1.2rem;
            border-radius: 10px;
            border-left: 5px solid #ff8f00;
            transition: all 0.2s ease;
        }

        .evidence-item:hover {
            background: #fff3c4;
            transform: translateX(5px);
        }

        .evidence-item.complex {
            background: #fce4ec;
            border-left-color: #e91e63;
        }

        .evidence-item.complex:hover {
            background: #f8bbd9;
        }

        .evidence-item h5 {
            color: #e65100;
            margin: 0 0 0.5rem 0;
            font-size: 1rem;
        }

        .evidence-item.complex h5 {
            color: #ad1457;
        }

        .evidence-item p {
            margin: 0.3rem 0;
            color: #f57c00;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .evidence-item.complex p {
            color: #c2185b;
        }

        .investigation-sequence {
            margin-bottom: 1.5rem;
        }

        .investigation-sequence h4 {
            color: #1a237e;
            margin-bottom: 1rem;
        }

        .sequence-step {
            display: flex;
            gap: 1rem;
            margin: 1rem 0;
            align-items: flex-start;
        }

        .step-number {
            background: #3949ab;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .step-content {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 10px;
            flex: 1;
            border: 1px solid #dee2e6;
        }

        .step-content h5 {
            color: #1a237e;
            margin: 0 0 0.5rem 0;
            font-size: 1rem;
        }

        .step-content p {
            margin: 0;
            color: #495057;
            line-height: 1.4;
        }

        .module-integration {
            background: #e1f5fe;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            border: 1px solid #81d4fa;
        }

        .module-integration h4 {
            color: #01579b;
            margin-bottom: 1rem;
        }

        .integration-connections {
            display: grid;
            gap: 1rem;
        }

        .connection-item {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #0288d1;
        }

        .connection-item h5 {
            color: #01579b;
            margin: 0 0 0.5rem 0;
            font-size: 1rem;
        }

        .connection-item p {
            margin: 0;
            color: #0277bd;
            line-height: 1.4;
        }

        .teacher-implementation {
            background: #f3e5f5;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            border: 1px solid #ce93d8;
        }

        .teacher-implementation h4 {
            color: #4a148c;
            margin-bottom: 1rem;
        }

        .script-box {
            background: white;
            padding: 1.2rem;
            border-radius: 8px;
            border-left: 4px solid #9c27b0;
            font-style: italic;
        }

        .script-box p {
            margin: 0;
            color: #6a1b9a;
            line-height: 1.6;
        }

        .teacher-facilitation {
            background: #e8f5e8;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            border: 1px solid #a5d6a7;
        }

        .teacher-facilitation h4 {
            color: #1b5e20;
            margin-bottom: 1rem;
        }

        .facilitation-section {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid #4caf50;
        }

        .facilitation-section h5 {
            color: #1b5e20;
            margin: 0 0 0.5rem 0;
            font-size: 1rem;
        }

        .facilitation-section ul {
            margin: 0.5rem 0;
            padding-left: 1.2rem;
        }

        .facilitation-section li {
            margin: 0.3rem 0;
            color: #2e7d32;
            line-height: 1.4;
        }

        .assessment-rubric {
            background: #fff3e0;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            border: 1px solid #ffcc02;
        }

        .assessment-rubric h4 {
            color: #e65100;
            margin-bottom: 1rem;
        }

        .rubric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .rubric-category {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #ff9800;
        }

        .rubric-category h5 {
            color: #e65100;
            margin: 0 0 0.5rem 0;
            font-size: 1rem;
        }

        .rubric-category ul {
            margin: 0.5rem 0;
            padding-left: 1.2rem;
        }

        .rubric-category li {
            margin: 0.3rem 0;
            color: #bf360c;
            line-height: 1.4;
        }

        /* ===== PRINT STYLES FOR TEACHER GUIDE ===== */
        
        .teacher-guide-header {
            text-align: center;
            background: linear-gradient(135deg, #1a237e 0%, #3949ab 100%);
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }

        .teacher-guide-header h1 {
            font-size: 2.2rem;
            margin-bottom: 1rem;
            color: #ffd700;
        }

        .guide-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 1.5rem;
        }

        .print-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .print-btn {
            background: #ffd700;
            color: #1a237e;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .print-btn:hover {
            background: #ffed4e;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
        }

        .teacher-section {
            margin-bottom: 3rem;
            page-break-inside: avoid;
        }

        .teacher-section h2 {
            color: #1a237e;
            border-bottom: 3px solid #ffd700;
            padding-bottom: 0.5rem;
            margin-bottom: 2rem;
        }

        .reference-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .reference-card {
            background: #f8f9fa;
            border: 2px solid #3949ab;
            border-radius: 10px;
            padding: 1.5rem;
            page-break-inside: avoid;
        }

        .reference-card h4 {
            color: #1a237e;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .reference-card ul {
            margin: 0;
            padding-left: 1.2rem;
        }

        .reference-card li {
            margin: 0.5rem 0;
            line-height: 1.4;
        }

        .setup-timeline {
            margin: 2rem 0;
        }

        .timeline-item {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 2rem;
            page-break-inside: avoid;
        }

        .timeline-marker {
            background: #3949ab;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .timeline-content {
            flex: 1;
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            border-left: 4px solid #3949ab;
        }

        .daily-script-card {
            background: white;
            border: 2px solid #3949ab;
            border-radius: 12px;
            margin-bottom: 3rem;
            overflow: hidden;
            page-break-inside: avoid;
        }

        .script-header {
            background: linear-gradient(135deg, #3949ab 0%, #1a237e 100%);
            color: white;
            padding: 1.5rem;
        }

        .script-header h3 {
            margin: 0 0 1rem 0;
            font-size: 1.4rem;
        }

        .script-meta {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .script-meta span {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .case-progression {
            display: grid;
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .progression-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-left: 4px solid #3949ab;
            padding: 1.5rem;
            border-radius: 8px;
            page-break-inside: avoid;
        }

        .progression-item h4 {
            color: #1a237e;
            margin-bottom: 0.8rem;
        }

        .progression-item p {
            margin: 0.4rem 0;
            line-height: 1.4;
        }

        .management-grid, .troubleshooting-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .management-card, .issue-card {
            background: white;
            border: 2px solid #28a745;
            border-radius: 10px;
            padding: 1.5rem;
            page-break-inside: avoid;
        }

        .issue-card {
            border-color: #dc3545;
        }

        .management-card h4, .issue-card h4 {
            color: #1a237e;
            margin-bottom: 1rem;
        }

        .assessment-overview {
            background: #e3f2fd;
            padding: 1.5rem;
            border-radius: 10px;
            border-left: 4px solid #2196f3;
            margin-bottom: 2rem;
        }

        .assessment-overview h3 {
            color: #0d47a1;
            margin-bottom: 1rem;
        }

        .assessment-types {
            display: grid;
            gap: 2rem;
        }

        .assessment-type-card {
            background: white;
            border: 2px solid #2196f3;
            border-radius: 10px;
            padding: 1.5rem;
            page-break-inside: avoid;
        }

        .assessment-type-card h4 {
            color: #0d47a1;
            margin-bottom: 1.5rem;
        }

        .script-summary-section {
            background: #f3e5f5;
            padding: 2rem;
            border-radius: 10px;
            border: 2px solid #9c27b0;
            margin: 2rem 0;
        }

        .script-summary-section h3 {
            color: #4a148c;
            margin-bottom: 1.5rem;
        }

        /* ===== PRINT-SPECIFIC STYLES ===== */
        
        @media print {
            body {
                background: white !important;
                color: black !important;
                font-size: 12pt;
                line-height: 1.4;
            }

            .header, .navigation, .print-controls {
                display: none !important;
            }

            .main-content {
                padding: 0 !important;
                max-width: none !important;
                margin: 0 !important;
            }

            .content-panel {
                background: white !important;
                box-shadow: none !important;
                border-radius: 0 !important;
                padding: 0 !important;
                margin: 0 !important;
            }

            .teacher-guide-header {
                background: white !important;
                color: black !important;
                border: 2px solid black;
                text-align: center;
                page-break-after: always;
            }

            .teacher-guide-header h1 {
                color: black !important;
                font-size: 24pt;
            }

            .guide-subtitle {
                color: black !important;
                font-size: 14pt;
            }

            .teacher-section {
                page-break-before: always;
                margin-bottom: 0;
            }

            .teacher-section h2 {
                color: black !important;
                border-bottom: 2px solid black !important;
                font-size: 18pt;
                margin-bottom: 15pt;
            }

            .daily-script-card {
                page-break-before: always;
                page-break-inside: avoid;
                border: 2px solid black !important;
                background: white !important;
                margin-bottom: 20pt;
            }

            .script-header {
                background: #f0f0f0 !important;
                color: black !important;
                border-bottom: 2px solid black;
            }

            .script-header h3 {
                color: black !important;
                font-size: 16pt;
            }

            .teacher-implementation, .teacher-facilitation, .assessment-rubric {
                page-break-inside: avoid;
                margin-bottom: 15pt;
                border: 1px solid black !important;
                background: white !important;
            }

            .teacher-implementation h4, .teacher-facilitation h4, .assessment-rubric h4 {
                color: black !important;
                font-size: 14pt;
                border-bottom: 1px solid black;
                padding-bottom: 5pt;
            }

            .script-box {
                background: #f9f9f9 !important;
                border: 1px solid black !important;
                color: black !important;
                font-style: italic;
                padding: 10pt;
                margin: 10pt 0;
            }

            .facilitation-section {
                background: white !important;
                border: 1px solid #666 !important;
                margin: 8pt 0;
                padding: 8pt;
            }

            .facilitation-section h5 {
                color: black !important;
                font-size: 12pt;
                margin-bottom: 5pt;
            }

            .reference-grid, .management-grid, .troubleshooting-grid {
                grid-template-columns: 1fr 1fr;
                gap: 15pt;
                page-break-inside: avoid;
            }

            .reference-card, .management-card, .issue-card {
                background: white !important;
                border: 1px solid black !important;
                page-break-inside: avoid;
                margin-bottom: 10pt;
            }

            .reference-card h4, .management-card h4, .issue-card h4 {
                color: black !important;
                font-size: 12pt;
                margin-bottom: 8pt;
            }

            .timeline-item {
                page-break-inside: avoid;
                margin-bottom: 15pt;
            }

            .timeline-marker {
                background: black !important;
                color: white !important;
            }

            .timeline-content {
                background: white !important;
                border: 1px solid black !important;
            }

            .progression-item {
                background: white !important;
                border: 1px solid black !important;
                page-break-inside: avoid;
                margin-bottom: 10pt;
            }

            .progression-item h4 {
                color: black !important;
                font-size: 12pt;
            }

            .rubric-grid {
                grid-template-columns: 1fr 1fr;
                gap: 10pt;
            }

            .rubric-category {
                background: white !important;
                border: 1px solid black !important;
                padding: 8pt;
            }

            .rubric-category h5 {
                color: black !important;
                font-size: 11pt;
                margin-bottom: 5pt;
            }

            .assessment-overview {
                background: white !important;
                border: 2px solid black !important;
                color: black !important;
                page-break-inside: avoid;
            }

            .assessment-overview h3 {
                color: black !important;
                font-size: 14pt;
            }

            .assessment-type-card {
                background: white !important;
                border: 2px solid black !important;
                page-break-before: auto;
                page-break-inside: avoid;
            }

            .assessment-type-card h4 {
                color: black !important;
                font-size: 14pt;
            }

            .script-summary-section {
                background: white !important;
                border: 2px solid black !important;
                color: black !important;
                page-break-inside: avoid;
            }

            .script-summary-section h3 {
                color: black !important;
                font-size: 14pt;
            }

            /* Hide screen-only elements */
            .hidden, .loading-indicator {
                display: none !important;
            }

            /* Ensure section visibility for printing */
            .content-panel#teacher-guide {
                display: block !important;
            }
        }

        /* Print section-specific styles */
        @media print {
            .print-daily-scripts-only .teacher-section:not(.daily-scripts) {
                display: none !important;
            }

            .print-setup-guide-only .teacher-section:not(.setup-guide) {
                display: none !important;
            }
        }
            margin: 0.3rem 0;
            color: #f57c00;
            line-height: 1.4;
        }

        .assessment-focus {
            background: #fff3e0;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            border: 1px solid #ffcc02;
        }

        .assessment-focus h4 {
            color: #e65100;
            margin-bottom: 1rem;
        }

        .assessment-focus ul {
            margin: 0;
            padding-left: 1.2rem;
        }

        .assessment-focus li {
            margin: 0.5rem 0;
            color: #f57c00;
            line-height: 1.4;
        }

        .case-outcome {
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
            padding: 1.5rem;
            border-radius: 10px;
            border: 1px solid #4caf50;
        }

        .case-outcome h4 {
            color: #1b5e20;
            margin-bottom: 1rem;
        }

        .outcome-box {
            background: white;
            padding: 1.2rem;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
        }

        .outcome-box.success {
            border-left-color: #4caf50;
        }

        .outcome-box p {
            margin: 0 0 1rem 0;
            color: #2e7d32;
            line-height: 1.6;
        }

        .skills-earned {
            margin-top: 1rem;
        }

        .skills-earned h5 {
            color: #1b5e20;
            margin: 0 0 0.5rem 0;
        }

        .skill-badge {
            display: inline-block;
            background: #4caf50;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            margin: 0.2rem 0.3rem 0.2rem 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .investigation-header h1 {
                font-size: 2rem;
            }

            .academy-stats {
                gap: 1rem;
            }

            .stat {
                padding: 0.4rem 0.8rem;
                font-size: 0.9rem;
            }

            .case-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .case-title {
                font-size: 1.5rem;
            }

            .objectives-grid {
                grid-template-columns: 1fr;
            }

            .roles-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .rubric-grid {
                grid-template-columns: 1fr;
            }

            .timeline-item {
                grid-template-columns: 1fr;
                gap: 0.5rem;
                text-align: center;
            }

            .sequence-step {
                flex-direction: column;
                align-items: center;
            }

            .filter-btn {
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
            }
        }

        /* Print Styles */
        @media print {
            .investigation-card {
                page-break-inside: avoid;
                margin-bottom: 20px;
                border: 1px solid #ccc;
                box-shadow: none;
            }
            
            .case-header {
                background: #f5f5f5 !important;
                -webkit-print-color-adjust: exact;
            }
            
            .event-filters {
                display: none;
            }
            
            .case-details {
                display: block !important;
            }
            
            body {
                font-size: 12pt;
                line-height: 1.4;
            }
        }
        
        /* Enhanced Investigation Events Styling */
        .difficulty-badge.master {
            background: linear-gradient(135deg, #8B0000, #FF6B47);
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .difficulty-badge.graduation {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #333;
            font-weight: bold;
            border: 2px solid #DAA520;
        }
        
        .module-badge {
            background: linear-gradient(135deg, #2E7D32, #4CAF50);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-left: 8px;
        }
        
        /* Special case styling */
        .investigation-card.setup-day {
            border-left: 5px solid #FFD700;
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.2);
        }
        
        .investigation-card.day-11 {
            border-left: 5px solid #FFD700;
            background: linear-gradient(145deg, #FFF8DC, #FFFAF0);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.3);
        }
        
        /* Enhanced scenario and outcome boxes */
        .scenario-box {
            background: linear-gradient(145deg, #E3F2FD, #F3E5F5);
            border-left: 4px solid #1976D2;
            border-radius: 8px;
            padding: 16px;
            margin: 12px 0;
        }
        
        .scenario-box h4 {
            color: #1565C0;
            margin-bottom: 12px;
            font-size: 1.1em;
        }
        
        .scenario-box strong {
            color: #0D47A1;
            font-weight: 600;
        }
        
        .objectives-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .objectives-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
        }
        
        .learning-objectives, .geographic-skills {
            background: linear-gradient(145deg, #F1F8E9, #F9FBE7);
            border: 1px solid #C8E6C9;
            border-radius: 10px;
            padding: 16px;
        }
        
        .learning-objectives h4, .geographic-skills h4 {
            color: #2E7D32;
            margin-bottom: 12px;
            font-size: 1em;
            font-weight: 600;
        }
        
        /* Specialized skill badge colors by case */
        .day-1 .skill-badge, .day-2 .skill-badge {
            background: linear-gradient(135deg, #388E3C, #66BB6A);
        }
        
        .day-3 .skill-badge {
            background: linear-gradient(135deg, #7B1FA2, #BA68C8);
        }
        
        .day-4 .skill-badge, .day-5 .skill-badge {
            background: linear-gradient(135deg, #F57C00, #FFB74D);
        }
        
        .day-6 .skill-badge, .day-7 .skill-badge, .day-8 .skill-badge {
            background: linear-gradient(135deg, #5D4037, #8D6E63);
        }
        
        .day-9 .skill-badge, .day-10 .skill-badge {
            background: linear-gradient(135deg, #B71C1C, #E57373);
        }
        
        .day-11 .skill-badge {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #333;
            font-weight: bold;
        }
        
        /* COMPREHENSIVE ASSESSMENT SYSTEM STYLING */
        .assessment-header {
            text-align: center;
            background: linear-gradient(135deg, #1a237e, #3949ab);
            color: white;
            padding: 3rem 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
        }
        
        .assessment-header h1 {
            margin: 0 0 1rem 0;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .assessment-header .mission-statement {
            font-size: 1.2rem;
            margin: 0 0 2rem 0;
            opacity: 0.9;
            line-height: 1.5;
        }
        
        .assessment-stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
        }
        
        .assessment-stats .stat {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }
        
        .assessment-filters {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }
        
        .assessment-filter-btn {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #495057;
        }
        
        .assessment-filter-btn:hover {
            background: #e9ecef;
            border-color: #1a237e;
            transform: translateY(-2px);
        }
        
        .assessment-filter-btn.active {
            background: #1a237e;
            color: white;
            border-color: #1a237e;
        }
        
        .assessment-section {
            margin: 3rem 0;
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .section-header {
            background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
            padding: 2rem;
            border-bottom: 1px solid #a5d6a7;
        }
        
        .section-header h2 {
            margin: 0 0 0.5rem 0;
            color: #1b5e20;
            font-size: 2rem;
        }
        
        .section-header .section-subtitle {
            margin: 0;
            color: #2e7d32;
            font-size: 1.1rem;
            opacity: 0.8;
        }
        
        .daily-assessment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            padding: 2rem;
        }
        
        .assessment-card {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border: 2px solid #e9ecef;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .assessment-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(26, 35, 126, 0.15);
            border-color: #1a237e;
        }
        
        .assessment-card-header {
            background: linear-gradient(135deg, #1a237e, #3949ab);
            color: white;
            padding: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .assessment-card-header h3 {
            margin: 0;
            font-size: 1.3rem;
        }
        
        .frequency-badge, .duration-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.4rem 1rem;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .assessment-details {
            padding: 1.5rem;
            display: none;
        }
        
        .skill-progression h4 {
            color: #1a237e;
            margin: 0 0 1rem 0;
            font-size: 1.2rem;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 0.5rem;
        }
        
        .rubric-levels {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .rubric-level {
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid;
        }
        
        .rubric-level.developing {
            background: #fff3e0;
            border-color: #ff9800;
        }
        
        .rubric-level.approaching {
            background: #fff8e1;
            border-color: #ffc107;
        }
        
        .rubric-level.proficient {
            background: #e8f5e8;
            border-color: #4caf50;
        }
        
        .rubric-level.advanced {
            background: #e3f2fd;
            border-color: #2196f3;
        }
        
        .rubric-level h5 {
            margin: 0 0 0.5rem 0;
            font-weight: 700;
            color: #333;
        }
        
        .rubric-level p {
            margin: 0;
            line-height: 1.5;
            color: #555;
        }
        
        .evidence-indicators h4 {
            color: #1a237e;
            margin: 1rem 0 0.5rem 0;
            font-size: 1.1rem;
        }
        
        .evidence-indicators ul {
            margin: 0;
            padding-left: 1.5rem;
        }
        
        .evidence-indicators li {
            margin: 0.5rem 0;
            color: #555;
            line-height: 1.4;
        }
        
        .project-assessment-grid {
            padding: 2rem;
        }
        
        .assessment-card.project-based {
            max-width: none;
        }
        
        .project-overview {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid #1a237e;
        }
        
        .project-overview p {
            margin: 0;
            font-size: 1.1rem;
            line-height: 1.6;
            color: #333;
        }
        
        .components-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }
        
        .component-item {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .component-item:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }
        
        .component-item h5 {
            margin: 0 0 0.75rem 0;
            color: #1a237e;
            font-size: 1.1rem;
        }
        
        .component-item p {
            margin: 0 0 1rem 0;
            color: #555;
            line-height: 1.4;
        }
        
        .weight {
            background: #1a237e;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .criteria-breakdown {
            display: grid;
            gap: 1.5rem;
            margin-top: 1rem;
        }
        
        .criterion {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
        }
        
        .criterion h5 {
            margin: 0 0 0.75rem 0;
            color: #1b5e20;
            font-size: 1.1rem;
        }
        
        .criterion p {
            margin: 0;
            color: #2e7d32;
            line-height: 1.5;
        }
        
        .portfolio-structure {
            padding: 2rem;
        }
        
        .portfolio-header {
            text-align: center;
            margin-bottom: 3rem;
            background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
            padding: 2rem;
            border-radius: 12px;
        }
        
        .portfolio-header h3 {
            margin: 0 0 1rem 0;
            color: #1b5e20;
            font-size: 2rem;
        }
        
        .portfolio-header p {
            margin: 0;
            color: #2e7d32;
            font-size: 1.2rem;
        }
        
        .portfolio-requirements {
            display: grid;
            gap: 2rem;
        }
        
        .portfolio-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .portfolio-item:hover {
            border-color: #1a237e;
            box-shadow: 0 4px 12px rgba(26, 35, 126, 0.1);
        }
        
        .item-header {
            background: linear-gradient(135deg, #1a237e, #3949ab);
            color: white;
            padding: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .item-header h4 {
            margin: 0;
            font-size: 1.3rem;
        }
        
        .required-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.4rem 1rem;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .item-details {
            padding: 2rem;
            display: none;
        }
        
        .item-details p {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 2rem;
            color: #333;
        }
        
        .requirements-list, .quality-indicators, .reflection-components {
            margin-bottom: 2rem;
        }
        
        .requirements-list h5, .quality-indicators h5, .reflection-components h5 {
            color: #1a237e;
            margin: 0 0 1rem 0;
            font-size: 1.2rem;
        }
        
        .artifact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .artifact-type {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        
        .artifact-type h6 {
            margin: 0 0 0.5rem 0;
            color: #1a237e;
            font-size: 1rem;
        }
        
        .artifact-type p {
            margin: 0;
            font-size: 0.9rem;
            color: #555;
            line-height: 1.4;
        }
        
        .rubrics-container {
            padding: 2rem;
        }
        
        .master-rubric {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .rubric-header {
            background: linear-gradient(135deg, #1a237e, #3949ab);
            color: white;
            padding: 2rem;
            text-align: center;
        }
        
        .rubric-header h3 {
            margin: 0 0 0.5rem 0;
            font-size: 2rem;
        }
        
        .rubric-header p {
            margin: 0;
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .rubric-table {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
            gap: 1px;
            background: #e9ecef;
        }
        
        .rubric-row {
            display: contents;
        }
        
        .rubric-cell {
            background: white;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .header-row .rubric-cell {
            background: #f8f9fa;
            font-weight: 700;
            color: #1a237e;
            text-align: center;
            padding: 1rem;
        }
        
        .skill-category {
            border-right: 2px solid #1a237e;
        }
        
        .skill-category h4 {
            margin: 0 0 0.5rem 0;
            color: #1a237e;
            font-size: 1.1rem;
        }
        
        .skill-category p {
            margin: 0;
            color: #555;
            font-size: 0.9rem;
            font-style: italic;
        }
        
        .level-1 { border-left: 4px solid #ff9800; }
        .level-2 { border-left: 4px solid #ffc107; }
        .level-3 { border-left: 4px solid #4caf50; }
        .level-4 { border-left: 4px solid #2196f3; }
        
        /* Responsive Design for Assessment System */
        @media (max-width: 768px) {
            .daily-assessment-grid {
                grid-template-columns: 1fr;
                padding: 1rem;
            }
            
            .components-grid {
                grid-template-columns: 1fr;
            }
            
            .assessment-stats {
                flex-direction: column;
                gap: 1rem;
            }
            
            .assessment-filters {
                flex-direction: column;
                align-items: center;
            }
            
            .rubric-table {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .rubric-row {
                display: block;
                margin-bottom: 2rem;
                border: 1px solid #e9ecef;
                border-radius: 8px;
                overflow: hidden;
            }
            
            .rubric-cell {
                border-bottom: 1px solid #e9ecef;
            }
            
            .header-row {
                display: none;
            }
            
            .artifact-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* COMPLETE PACKAGE SYSTEM STYLING */
        .complete-package-header {
            text-align: center;
            background: linear-gradient(135deg, #1a237e, #3949ab);
            color: white;
            padding: 3rem 2rem;
            border-radius: 15px;
            margin-bottom: 3rem;
        }
        
        .complete-package-header h1 {
            margin: 0 0 1rem 0;
            font-size: 2.8rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .mega-subtitle {
            font-size: 1.3rem;
            margin: 0 0 2rem 0;
            opacity: 0.95;
            line-height: 1.6;
        }
        
        .package-stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin-top: 2rem;
        }
        
        .stat-item {
            background: rgba(255, 255, 255, 0.15);
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
            color: #ffd54f;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 600;
        }
        
        .pdf-generation-section {
            background: white;
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 3rem;
        }
        
        .generation-controls {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .mega-pdf-button {
            background: linear-gradient(135deg, #e91e63, #ad1457);
            color: white;
            border: none;
            padding: 2rem 3rem;
            border-radius: 25px;
            font-size: 1.4rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(233, 30, 99, 0.3);
            margin-bottom: 3rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .mega-pdf-button:hover {
            background: linear-gradient(135deg, #ad1457, #880e4f);
            transform: translateY(-4px);
            box-shadow: 0 12px 35px rgba(233, 30, 99, 0.4);
        }
        
        .mega-pdf-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .button-subtitle {
            font-size: 0.8rem;
            font-weight: 400;
            opacity: 0.9;
            text-transform: none;
            letter-spacing: normal;
        }
        
        .generation-options {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }
        
        .generation-options h3 {
            margin: 0 0 2rem 0;
            color: #1a237e;
            font-size: 1.5rem;
            text-align: center;
        }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        .option-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            background: white;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
        }
        
        .option-item:hover {
            border-color: #1a237e;
            background: #f0f4ff;
            transform: translateY(-2px);
        }
        
        .option-item input[type="checkbox"] {
            margin-right: 1rem;
            transform: scale(1.2);
            accent-color: #1a237e;
        }
        
        .package-preview {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 15px;
            margin-top: 3rem;
        }
        
        .package-preview h3 {
            color: #1a237e;
            margin: 0 0 2rem 0;
            font-size: 1.5rem;
            text-align: center;
        }
        
        .content-outline {
            display: grid;
            gap: 2rem;
        }
        
        .section-preview {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            border-left: 5px solid #1a237e;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .section-preview h4 {
            margin: 0 0 1rem 0;
            color: #1a237e;
            font-size: 1.2rem;
        }
        
        .section-preview ul {
            margin: 0;
            padding-left: 1.5rem;
        }
        
        .section-preview li {
            margin: 0.5rem 0;
            color: #555;
            line-height: 1.4;
        }
        
        .quick-actions {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            margin-bottom: 3rem;
        }
        
        .quick-actions h3 {
            color: #1a237e;
            margin: 0 0 2rem 0;
            font-size: 1.5rem;
            text-align: center;
        }
        
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
        }
        
        .action-btn {
            background: linear-gradient(135deg, #4caf50, #388e3c);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }
        
        .action-btn:hover {
            background: linear-gradient(135deg, #388e3c, #2e7d32);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }
        
        .generation-status {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            text-align: center;
            min-width: 400px;
        }
        
        .generation-status.hidden {
            display: none;
        }
        
        .generation-status::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }
        
        .status-content h4 {
            margin: 1rem 0;
            color: #1a237e;
            font-size: 1.5rem;
        }
        
        .status-content p {
            margin: 0.5rem 0 2rem 0;
            color: #555;
            font-size: 1.1rem;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid #e9ecef;
            border-top: 4px solid #1a237e;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 2rem auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #1a237e, #3949ab);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%;
        }
        
        .success-alert {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            max-width: 400px;
            border-left: 5px solid #4caf50;
        }
        
        .success-alert .alert-content {
            padding: 2rem;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }
        
        .success-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }
        
        .success-text h3 {
            margin: 0 0 0.5rem 0;
            color: #4caf50;
            font-size: 1.3rem;
        }
        
        .success-text p {
            margin: 0.5rem 0;
            color: #555;
            line-height: 1.4;
        }
        
        .alert-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
        }
        
        .alert-close:hover {
            color: #666;
        }
        
        /* Modal Styles for Quick Access */
        .preview-modal, .download-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            animation: fadeIn 0.3s ease-in-out;
        }
        
        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 0;
            max-width: 800px;
            max-height: 90vh;
            width: 90%;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease-out;
        }
        
        .modal-header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 20px 25px;
            position: relative;
        }
        
        .modal-header h2 {
            margin: 0;
            font-size: 1.5rem;
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: background 0.2s;
        }
        
        .modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .modal-body {
            padding: 25px;
            overflow-y: auto;
            max-height: calc(90vh - 120px);
        }
        
        .preview-sections {
            display: grid;
            gap: 15px;
        }
        
        .preview-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #1e3c72;
        }
        
        .preview-item h3 {
            margin: 0 0 10px 0;
            color: #1e3c72;
            font-size: 1.1rem;
        }
        
        .preview-item p {
            margin: 0;
            color: #666;
            line-height: 1.5;
        }
        
        .preview-footer {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px solid #eee;
            text-align: center;
        }
        
        .preview-footer p {
            margin: 0 0 15px 0;
            font-weight: 600;
            color: #333;
        }
        
        .individual-downloads {
            display: grid;
            gap: 12px;
            margin: 20px 0;
        }
        
        .download-section-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }
        
        .download-section-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }
        
        .download-footer {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            text-align: center;
        }
        
        .download-footer em {
            color: #666;
            font-size: 0.9rem;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(50px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .downloading {
            pointer-events: none;
            opacity: 0.7;
        }
        
        .print-success {
            border-left: 5px solid #6f42c1;
        }
        
        .print-success .success-icon {
            color: #6f42c1;
        }
        
        /* Error Alert Styles */
        .error-alert {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white;
            padding: 0;
            border-radius: 15px;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(220, 53, 69, 0.3);
            z-index: 10000;
            animation: slideInRight 0.5s ease-out;
        }
        
        .error-alert .alert-content {
            padding: 1.5rem;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .error-alert .error-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }
        
        .error-alert .error-text h3 {
            margin: 0 0 8px 0;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .error-alert .error-text p {
            margin: 4px 0;
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .error-alert .alert-close {
            color: white;
        }
        
        .error-alert .alert-close:hover {
            color: #f8f9fa;
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        /* Responsive Design for Complete Package */
        @media (max-width: 768px) {
            .complete-package-header {
                padding: 2rem 1rem;
            }
            
            .complete-package-header h1 {
                font-size: 2rem;
            }
            
            .mega-subtitle {
                font-size: 1.1rem;
            }
            
            .package-stats {
                flex-direction: column;
                gap: 1rem;
            }
            
            .pdf-generation-section {
                padding: 2rem 1rem;
            }
            
            .mega-pdf-button {
                padding: 1.5rem 2rem;
                font-size: 1.2rem;
            }
            
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .generation-status {
                min-width: 300px;
                padding: 2rem;
            }
        }
        
        /* ===== PRESENTATION LOADING STYLES ===== */
        
        .slide-loading {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            z-index: 10;
        }
        
        .loading-content {
            text-align: center;
            color: #495057;
        }
        
        .loading-spinner {
            font-size: 3rem;
            margin-bottom: 1rem;
            animation: rotate 2s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .loading-content h3 {
            margin: 0 0 0.5rem 0;
            color: #1a237e;
            font-size: 1.5rem;
        }
        
        .loading-content p {
            margin: 0;
            color: #6c757d;
            font-size: 1rem;
        }
        
        /* Enhanced slide display styles */
        .slide-image {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .slide-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            border: 2px dashed #2196f3;
        }
        
        .placeholder-content {
            text-align: center;
            color: #1976d2;
            padding: 2rem;
        }
        
        .placeholder-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }
        
        .placeholder-content h3 {
            margin: 0 0 1rem 0;
            color: #1565c0;
            font-size: 1.5rem;
        }
        
        .placeholder-content p {
            margin: 0.5rem 0;
            color: #1976d2;
            font-size: 1.1rem;
        }
        
        .placeholder-note {
            margin-top: 1.5rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            font-size: 0.9rem;
            color: #424242;
            line-height: 1.4;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">
            <span style="font-size: 2rem;"></span>
            <div>
                <h1>Geographic Detective Academy</h1>
                <div class="subtitle">Q1 Simulation - The Mystery of the Missing Maps</div>
            </div>
        </div>
        <div class="status-badges">
            <div class="badge classified">CLASSIFIED</div>
            <div class="badge active-case">ACTIVE CASE</div>
        </div>
    </header>

    <nav class="navigation">
        <div class="nav-item" data-panel="teacher-guide">
            <span class="icon"></span>
            <span class="label">Teacher Guide</span>
        </div>
        <div class="nav-item active" data-panel="overview">
            <span class="icon"></span>
            <span class="label">Overview</span>
        </div>
        <div class="nav-item" data-panel="daily-structure">
            <span class="icon"></span>
            <span class="label">Daily Structure</span>
        </div>
        <div class="nav-item" data-panel="team-roles">
            <span class="icon"></span>
            <span class="label">Team Roles</span>
        </div>
        <div class="nav-item" data-panel="investigation-events">
            <span class="icon"></span>
            <span class="label">Investigation Events</span>
        </div>
        <div class="nav-item" data-panel="assessments">
            <span class="icon"></span>
            <span class="label">Assessments</span>
        </div>
        <div class="nav-item" data-panel="student-materials">
            <span class="icon"></span>
            <span class="label">Student Materials</span>
        </div>
        <div class="nav-item" data-panel="gamma-prompts">
            <span class="icon"></span>
            <span class="label">Presentation</span>
        </div>
        <div class="nav-item" data-panel="complete-package">
            <span class="icon"></span>
            <span class="label">Complete Package</span>
        </div>
    </nav>

    <main class="main-content">
        <!-- OVERVIEW PANEL -->
        <div id="overview" class="content-panel">
            <div class="simulation-title">
                <h2>Q1: Geographic Detectives Simulation</h2>
                <div class="mystery-title">"The Mystery of the Missing Maps Academy"</div>
            </div>

            <div class="overview-content">
                <div class="overview-section">
                    <h3> SIMULATION OVERVIEW</h3>
                    <p>Students become rookie detectives at the International Geographic Bureau investigating the disappearance of the world's most important maps and geographic artifacts. Over 12 days, they'll solve increasingly complex cases using geographic skills, knowledge of early civilizations, and collaborative problem-solving.</p>
                    
                    <div class="case-file">
                        <div class="case-header"> URGENT: Global Geographic Crisis</div>
                        <p><strong>The world's most valuable geographic artifacts have vanished!</strong></p>
                        <ul>
                            <li>Ancient maps from early civilizations - STOLEN</li>
                            <li>Modern GPS technology - COMPROMISED</li>
                            <li>International boundaries at risk</li>
                            <li>Global navigation systems failing worldwide</li>
                        </ul>
                        <p><strong>Time is running out. The world needs heroes.</strong></p>
                    </div>
                </div>

                <div class="overview-section">
                    <h3> SCHEDULE</h3>
                    <div class="schedule-item">
                        <div class="day-label">Setup Day (Day 0):</div>
                        Character creation, team formation, introduction to the Bureau
                    </div>
                    <div class="schedule-item">
                        <div class="day-label">Investigation Days (Days 1-11):</div>
                        Progressive cases building geographic skills through comprehensive investigations
                    </div>
                    <div class="schedule-item">
                        <div class="day-label">Graduation Day (Day 12):</div>
                        Final case presentation, mastery showcase, and academy graduation ceremony
                    </div>
                </div>
            </div>

            <div class="overview-content">
                <div class="overview-section">
                    <h3> THE STORY</h3>
                    <p>The year is 2025, and the International Geographic Bureau's most precious collection has been stolen: ancient maps from early civilizations, modern geographic tools, and classified location data.</p>
                    
                    <p><strong>You are the world's last hope.</strong> As rookie detectives, students must:</p>
                    <ul>
                        <li>Master geographic detective skills</li>
                        <li>Learn to read landscapes like fingerprints</li>
                        <li>Solve increasingly complex cases</li>
                        <li>Track down international criminals</li>
                        <li>Follow geographic clues across continents</li>
                        <li>Graduate as certified Geographic Crime Specialists</li>
                    </ul>
                </div>

                <div class="overview-section">
                    <h3> BADGE PROGRESSION</h3>
                    <div class="schedule-item">
                        <div class="day-label"> Rookie:</div>
                        Basic geographic skills and observation
                    </div>
                    <div class="schedule-item">
                        <div class="day-label"> Detective:</div>
                        Advanced case-solving and analysis
                    </div>
                    <div class="schedule-item">
                        <div class="day-label"> Specialist:</div>
                        Expert geographic crime investigation
                    </div>
                    <p><em>Each case builds your geographic expertise and credentials.</em></p>
                </div>
            </div>
        </div>

        <!-- DAILY STRUCTURE PANEL -->
        <div id="daily-structure" class="content-panel hidden">
            <h2> Daily Structure</h2>
            <p>Detailed daily progression and activities will be loaded here...</p>
        </div>

        <!-- TEAM ROLES PANEL -->
        <div id="team-roles" class="content-panel hidden">
            <h2> Team Roles</h2>
            <p>Detective unit roles and responsibilities will be loaded here...</p>
        </div>

        <!-- INVESTIGATION EVENTS PANEL -->
        <div id="investigation-events" class="content-panel hidden">
            <h2> Investigation Events</h2>
            
            <div class="case-file">
                <div class="case-header">Case File #001: The Great Globe Heist</div>
                <p><strong>ROOKIE LEVEL - GEOGRAPHIC FUNDAMENTALS TRAINING</strong></p>
                
                <div class="overview-content">
                    <div>
                        <h4> Crime Scene Details</h4>
                        <ul>
                            <li><strong>Location:</strong> Roosevelt Middle School, Room 204</li>
                            <li><strong>Time:</strong> Tuesday, 3:15 PM</li>
                            <li><strong>Missing Item:</strong> 12-inch classroom globe</li>
                            <li><strong>Threat Level:</strong> Low</li>
                            <li><strong>Required Skills:</strong> Basic geography, observation, coordinate reading</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4> Evidence Found</h4>
                        <ul class="evidence-list">
                            <li>Empty globe stand with dust outline</li>
                            <li>Fingerprints on metal base</li>
                            <li>Torn paper with coordinates: <span class="coordinate-highlight">40N, 74W</span></li>
                            <li>Compass left behind pointing northeast</li>
                            <li>World map on wall with pin missing</li>
                        </ul>
                    </div>
                </div>
                
                <p><strong>Investigation Question:</strong> The coordinates <span class="coordinate-highlight">40N, 74W</span> were found on torn paper - what could this mean?</p>
            </div>
        </div>

        <!-- ASSESSMENTS PANEL -->
        <div id="assessments" class="content-panel hidden">
            <div class="assessment-header">
                <h1> Detective Academy Assessment System</h1>
                <p class="mission-statement">
                    Comprehensive evaluation framework tracking your progression from Geographic Cadet to Master Detective
                </p>
                <div class="assessment-stats">
                    <div class="stat"> 12 Daily Assessments</div>
                    <div class="stat"> 4-Point Mastery Scale</div>
                    <div class="stat"> Portfolio Excellence</div>
                    <div class="stat"> Skills-Based Evaluation</div>
                </div>
            </div>
            
            <div class="assessment-filters">
                <button class="assessment-filter-btn active" data-filter="all">All Assessments</button>
                <button class="assessment-filter-btn" data-filter="daily">Daily Formative</button>
                <button class="assessment-filter-btn" data-filter="project">Project-Based</button>
                <button class="assessment-filter-btn" data-filter="portfolio">Portfolio</button>
                <button class="assessment-filter-btn" data-filter="rubrics">Master Rubric</button>
            </div>
            
            <div id="assessment-content">
                <!-- Assessment content will be loaded here -->
            </div>
        </div>

        <!-- TEACHER GUIDE PANEL -->
        <div id="teacher-guide" class="content-panel hidden">
            <div class="teacher-guide-header">
                <h1> Geographic Detective Academy: Complete Teacher Implementation Guide</h1>
                <p class="guide-subtitle">Comprehensive daily scripts, step-by-step instructions, and classroom management strategies</p>
                <div class="print-controls">
                    <button onclick="window.print()" class="print-btn"> Print Complete Guide</button>
                    <button onclick="printSection('daily-scripts')" class="print-btn"> Print Daily Scripts Only</button>
                    <button onclick="printSection('setup-guide')" class="print-btn"> Print Setup Guide</button>
                </div>
            </div>

            <!-- QUICK REFERENCE SECTION -->
            <div class="teacher-section quick-reference" id="quick-reference">
                <h2> Quick Reference</h2>
                <div class="reference-grid">
                    <div class="reference-card">
                        <h4> Time Requirements</h4>
                        <ul>
                            <li><strong>Setup Day:</strong> 45 minutes</li>
                            <li><strong>Daily Cases:</strong> 40-50 minutes each</li>
                            <li><strong>Final Presentation:</strong> 60 minutes</li>
                            <li><strong>Total:</strong> 12 class periods</li>
                        </ul>
                    </div>
                    <div class="reference-card">
                        <h4> Required Materials</h4>
                        <ul>
                            <li>Student detective notebooks</li>
                            <li>World maps and atlases</li>
                            <li>Geographic tools (compass, ruler)</li>
                            <li>Evidence packets (printed)</li>
                            <li>Team role badges</li>
                        </ul>
                    </div>
                    <div class="reference-card">
                        <h4> Classroom Setup</h4>
                        <ul>
                            <li>Teams of 4-5 students</li>
                            <li>Detective roles per team</li>
                            <li>Investigation stations</li>
                            <li>Evidence display area</li>
                            <li>Case progress board</li>
                        </ul>
                    </div>
                    <div class="reference-card">
                        <h4> Learning Objectives</h4>
                        <ul>
                            <li>Geographic reasoning skills</li>
                            <li>Collaborative problem-solving</li>
                            <li>Map and data interpretation</li>
                            <li>Cultural geography awareness</li>
                            <li>Critical thinking development</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- SETUP GUIDE SECTION -->
            <div class="teacher-section setup-guide" id="setup-guide">
                <h2> Pre-Simulation Setup Guide</h2>
                
                <div class="setup-timeline">
                    <div class="timeline-item">
                        <div class="timeline-marker">1</div>
                        <div class="timeline-content">
                            <h4> One Week Before (Preparation Phase)</h4>
                            <div class="teacher-implementation">
                                <h5> Print Materials Checklist</h5>
                                <div class="script-box">
                                    <p><strong>Print and prepare the following:</strong></p>
                                    <ul>
                                        <li>Student detective badges (color-coded by role)</li>
                                        <li>Daily case files and evidence packets</li>
                                        <li>Team investigation logs</li>
                                        <li>Assessment rubrics</li>
                                        <li>Parent information letter</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="teacher-facilitation">
                                <h5> Classroom Environment Setup</h5>
                                <div class="facilitation-section">
                                    <ul>
                                        <li>Arrange desks for teams of 4-5</li>
                                        <li>Create "Evidence Board" display area</li>
                                        <li>Set up "Detective Academy" signage</li>
                                        <li>Prepare investigation materials station</li>
                                        <li>Test technology for presentations</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-marker">2</div>
                        <div class="timeline-content">
                            <h4> Day Before Setup Day</h4>
                            <div class="teacher-implementation">
                                <h5> Final Preparation Checklist</h5>
                                <div class="script-box">
                                    <p><strong>Complete these final steps:</strong></p>
                                    <ul>
                                        <li>Review Day 0 script thoroughly</li>
                                        <li>Prepare "mystery" atmosphere (dim lights, detective music)</li>
                                        <li>Set up character creation station</li>
                                        <li>Hide "evidence" around room for discovery</li>
                                        <li>Prepare opening presentation slides</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DAILY SCRIPTS SECTION -->
            <div class="teacher-section daily-scripts" id="daily-scripts">
                <h2> Complete Daily Implementation Scripts</h2>
                
                <!-- DAY 0: SETUP DAY -->
                <div class="daily-script-card">
                    <div class="script-header">
                        <h3> Day 0: Academy Orientation & Character Creation</h3>
                        <div class="script-meta">
                            <span class="duration"> 45 minutes</span>
                            <span class="preparation"> 15 min prep</span>
                            <span class="difficulty"> Easy Setup</span>
                        </div>
                    </div>

                    <div class="teacher-implementation">
                        <h4> Opening Script (5 minutes)</h4>
                        <div class="script-box">
                            <p><strong>Teacher:</strong> "Good morning, future detectives! Welcome to the International Geographic Bureau Academy. I'm Agent [Your Name], your training supervisor. We have a crisis situation that requires your immediate attention."</p>
                            <p><em>[Turn lights low, play mysterious background music]</em></p>
                            <p><strong>Teacher:</strong> "The world's most precious geographic artifacts have been stolen by a criminal organization known as 'The Cartographers.' Ancient maps, GPS systems, and geographic data worldwide are disappearing. You are our last hope."</p>
                            <p><strong>Teacher:</strong> "Over the next 11 days, you'll undergo intensive training to become Geographic Crime Specialists. Your mission: track down The Cartographers and recover the stolen geographic heritage before it's too late."</p>
                        </div>
                    </div>

                    <div class="teacher-facilitation">
                        <h4> Character Creation Activity (20 minutes)</h4>
                        <div class="facilitation-section">
                            <h5>Step 1: Detective Identity (10 minutes)</h5>
                            <ul>
                                <li>Students create detective names and backstories</li>
                                <li>Choose geographic specialization (mountains, rivers, cities, etc.)</li>
                                <li>Design personal detective badge</li>
                                <li>Write one-sentence mission statement</li>
                            </ul>
                        </div>
                        <div class="facilitation-section">
                            <h5>Step 2: Team Formation (10 minutes)</h5>
                            <ul>
                                <li>Form detective units of 4-5 students</li>
                                <li>Assign team roles: Evidence Manager, Map Specialist, Cultural Analyst, Data Recorder</li>
                                <li>Create team name and motto</li>
                                <li>Distribute role-specific badges and materials</li>
                            </ul>
                        </div>
                    </div>

                    <div class="teacher-implementation">
                        <h4> Academy Tour & Rules (15 minutes)</h4>
                        <div class="script-box">
                            <p><strong>Teacher:</strong> "Now let me show you around your training facility. This is your Evidence Board where we'll track our investigations. Here's your Investigation Materials Station with maps, atlases, and detective tools."</p>
                            <p><strong>Academy Rules:</strong></p>
                            <ul>
                                <li>Always work as a team - no detective works alone</li>
                                <li>Document everything in your investigation logs</li>
                                <li>Use geographic evidence to support conclusions</li>
                                <li>Respect classified information</li>
                                <li>Share discoveries with other detective units</li>
                            </ul>
                        </div>
                    </div>

                    <div class="teacher-facilitation">
                        <h4> First Mini-Challenge (5 minutes)</h4>
                        <div class="facilitation-section">
                            <h5>Practice Investigation: "Find Agent Smith"</h5>
                            <ul>
                                <li>Give teams coordinates of hidden "evidence" in classroom</li>
                                <li>Teams use geographic thinking to locate items</li>
                                <li>Debrief on observation and documentation skills</li>
                                <li>Award first "Rookie Detective" badges</li>
                            </ul>
                        </div>
                    </div>

                    <div class="assessment-rubric">
                        <h4> Day 0 Assessment Criteria</h4>
                        <div class="rubric-grid">
                            <div class="rubric-category">
                                <h5>Character Development</h5>
                                <ul>
                                    <li>4: Detailed, creative detective persona</li>
                                    <li>3: Complete character with backstory</li>
                                    <li>2: Basic character information</li>
                                    <li>1: Minimal effort in creation</li>
                                </ul>
                            </div>
                            <div class="rubric-category">
                                <h5>Team Collaboration</h5>
                                <ul>
                                    <li>4: Exceptional teamwork and communication</li>
                                    <li>3: Good cooperation and role understanding</li>
                                    <li>2: Basic teamwork with some guidance</li>
                                    <li>1: Limited collaboration</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DAY 1: THE GREAT GLOBE HEIST -->
                <div class="daily-script-card">
                    <div class="script-header">
                        <h3> Day 1: The Great Globe Heist</h3>
                        <div class="script-meta">
                            <span class="duration"> 50 minutes</span>
                            <span class="preparation"> 10 min prep</span>
                            <span class="difficulty"> Moderate</span>
                        </div>
                    </div>

                    <div class="teacher-implementation">
                        <h4> Case Opening Script (10 minutes)</h4>
                        <div class="script-box">
                            <p><strong>Teacher (as Agent Commander):</strong> "Detectives, we have our first case. At 3:15 PM yesterday, a classroom globe was stolen from Roosevelt Middle School. While this might seem minor, our intelligence suggests this is connected to The Cartographers' larger operation."</p>
                            <p><em>[Show crime scene photo on screen]</em></p>
                            <p><strong>Teacher:</strong> "This is your chance to prove yourselves. The evidence team has secured the scene and gathered initial clues. Your job is to analyze the evidence and determine what happened."</p>
                            <p><strong>Evidence Available:</strong></p>
                            <ul>
                                <li>Empty globe stand with dust outline</li>
                                <li>Fingerprints on metal base</li>
                                <li>Torn paper with coordinates: 40N, 74W</li>
                                <li>Compass left behind pointing northeast</li>
                                <li>Pin missing from world map</li>
                            </ul>
                        </div>
                    </div>

                    <div class="teacher-facilitation">
                        <h4> Investigation Process (25 minutes)</h4>
                        <div class="facilitation-section">
                            <h5>Step 1: Evidence Analysis (10 minutes)</h5>
                            <ul>
                                <li>Teams examine each piece of evidence</li>
                                <li>Record observations in investigation logs</li>
                                <li>Discuss what each clue might mean</li>
                                <li><strong>Teacher Role:</strong> Circulate and ask probing questions</li>
                            </ul>
                        </div>
                        <div class="facilitation-section">
                            <h5>Step 2: Coordinate Investigation (10 minutes)</h5>
                            <ul>
                                <li>Teams use atlases to identify 40N, 74W (New York City)</li>
                                <li>Discuss why this location might be significant</li>
                                <li>Connect to missing map pin evidence</li>
                                <li><strong>Teacher Role:</strong> Guide teams to discovery without giving answers</li>
                            </ul>
                        </div>
                        <div class="facilitation-section">
                            <h5>Step 3: Hypothesis Development (5 minutes)</h5>
                            <ul>
                                <li>Teams formulate theories about the theft</li>
                                <li>Connect evidence to support conclusions</li>
                                <li>Prepare to present findings</li>
                            </ul>
                        </div>
                    </div>

                    <div class="teacher-implementation">
                        <h4> Witness Interview Script (10 minutes)</h4>
                        <div class="script-box">
                            <p><strong>Teacher (as Janitor Bob):</strong> "Well, I was cleaning the hallway around 3:00 when I heard some noise from the classroom. Looked like a young person, maybe a student, but they were acting suspicious. Had some kind of map in their hands."</p>
                            <p><em>[Allow teams to ask questions. Janitor Bob provides these additional clues when asked:]</em></p>
                            <ul>
                                <li>"They seemed really interested in the eastern United States on the wall map"</li>
                                <li>"I saw them write something down before they left"</li>
                                <li>"They dropped a compass when they heard me coming"</li>
                                <li>"Seemed to know exactly what they were looking for"</li>
                            </ul>
                        </div>
                    </div>

                    <div class="teacher-facilitation">
                        <h4> Case Resolution & Skill Building (5 minutes)</h4>
                        <div class="facilitation-section">
                            <h5>Geographic Skills Focus</h5>
                            <ul>
                                <li><strong>Coordinate Systems:</strong> Latitude and longitude basics</li>
                                <li><strong>Map Reading:</strong> Using symbols and legends</li>
                                <li><strong>Spatial Thinking:</strong> Why locations matter</li>
                                <li><strong>Evidence Analysis:</strong> Drawing conclusions from data</li>
                            </ul>
                        </div>
                    </div>

                    <div class="assessment-rubric">
                        <h4> Day 1 Assessment Criteria</h4>
                        <div class="rubric-grid">
                            <div class="rubric-category">
                                <h5>Geographic Skills</h5>
                                <ul>
                                    <li>4: Expertly reads coordinates and maps</li>
                                    <li>3: Good understanding of basic geography</li>
                                    <li>2: Developing map reading skills</li>
                                    <li>1: Needs support with geographic concepts</li>
                                </ul>
                            </div>
                            <div class="rubric-category">
                                <h5>Investigation Process</h5>
                                <ul>
                                    <li>4: Systematic, thorough evidence analysis</li>
                                    <li>3: Good investigative approach</li>
                                    <li>2: Basic investigation with guidance</li>
                                    <li>1: Limited investigative thinking</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DAY 2-3: PROGRESSIVE CASES -->
                <div class="daily-script-card">
                    <div class="script-header">
                        <h3> Day 2: Mountains of Mystery</h3>
                        <div class="script-meta">
                            <span class="duration"> 50 minutes</span>
                            <span class="preparation"> 15 min prep</span>
                            <span class="difficulty"> Moderate</span>
                        </div>
                    </div>

                    <div class="teacher-implementation">
                        <h4> Case Opening Script (8 minutes)</h4>
                        <div class="script-box">
                            <p><strong>Teacher (as Chief Agent):</strong> "Excellent work on the Globe Heist, detectives. But The Cartographers have struck again. This time, they've infiltrated the National Survey Office and stolen detailed topographic maps of major mountain ranges worldwide."</p>
                            <p><strong>Teacher:</strong> "Dr. Sarah Chen, our Chief Cartographer, was working late when the break-in occurred. The thieves knew exactly what they wanted - elevation data, mountain formation maps, and climate zone charts."</p>
                            <p><em>[Display mountain range images on screen]</em></p>
                            <p><strong>Evidence Found:</strong></p>
                            <ul>
                                <li>Computer files deleted: Himalayas, Andes, Rockies</li>
                                <li>Muddy footprints (mountain hiking boots)</li>
                                <li>Altitude chart with specific peaks circled</li>
                                <li>Note: "Elevation 8,848m - Base Camp ready"</li>
                            </ul>
                        </div>
                    </div>

                    <div class="teacher-facilitation">
                        <h4> Physical Geography Investigation (20 minutes)</h4>
                        <div class="facilitation-section">
                            <h5>Step 1: Mountain Range Analysis (8 minutes)</h5>
                            <ul>
                                <li>Teams identify stolen mountain range data</li>
                                <li>Use topographic maps to understand elevation</li>
                                <li>Locate major peaks on world maps</li>
                                <li><strong>Key Question:</strong> "What connects these mountain ranges?"</li>
                            </ul>
                        </div>
                        <div class="facilitation-section">
                            <h5>Step 2: Elevation Detective Work (8 minutes)</h5>
                            <ul>
                                <li>Research the 8,848m clue (Mount Everest)</li>
                                <li>Understand why thieves want mountain data</li>
                                <li>Connect physical geography to criminal motives</li>
                                <li><strong>Teacher Guidance:</strong> "Mountains are natural barriers and hideouts"</li>
                            </ul>
                        </div>
                        <div class="facilitation-section">
                            <h5>Step 3: Climate Zone Connection (4 minutes)</h5>
                            <ul>
                                <li>Examine why climate data was stolen</li>
                                <li>Understand mountain weather patterns</li>
                                <li>Consider hiding spots at various elevations</li>
                            </ul>
                        </div>
                    </div>

                    <div class="teacher-implementation">
                        <h4> Witness Interview: Dr. Sarah Chen (12 minutes)</h4>
                        <div class="script-box">
                            <p><strong>Teacher (as Dr. Chen):</strong> "The break-in was sophisticated. They bypassed security and went straight for our most sensitive mountain data. They weren't random thieves - they knew exactly what geographic information they needed."</p>
                            <p><em>[Teams ask questions, Dr. Chen reveals:]</em></p>
                            <ul>
                                <li>"They were particularly interested in remote, high-altitude locations"</li>
                                <li>"One thief mentioned something about 'base camps' and 'supply routes'"</li>
                                <li>"They took maps showing how to navigate mountain terrain"</li>
                                <li>"I heard them say 'The Boss needs mountain hideouts'"</li>
                            </ul>
                        </div>
                    </div>

                    <div class="teacher-facilitation">
                        <h4> Geographic Skills Focus (10 minutes)</h4>
                        <div class="facilitation-section">
                            <h5>Physical Geography Mastery</h5>
                            <ul>
                                <li><strong>Topographic Maps:</strong> Reading elevation lines</li>
                                <li><strong>Mountain Formation:</strong> Why mountains exist</li>
                                <li><strong>Climate Zones:</strong> How elevation affects weather</li>
                                <li><strong>Human-Environment Interaction:</strong> Mountains as barriers and resources</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- DAYS 4-11 OUTLINE -->
                <div class="script-summary-section">
                    <h3> Days 3-11: Progressive Case Structure</h3>
                    <div class="case-progression">
                        <div class="progression-item">
                            <h4> Day 3: International Heritage Heist</h4>
                            <p><strong>Focus:</strong> Cultural geography and UNESCO World Heritage sites</p>
                            <p><strong>Skills:</strong> Cultural regions, heritage protection, international geography</p>
                            <p><strong>Evidence:</strong> Stolen artifacts from Machu Picchu, Petra, Angkor Wat</p>
                        </div>

                        <div class="progression-item">
                            <h4> Days 4-5: Economic Espionage</h4>
                            <p><strong>Focus:</strong> Economic geography and global trade</p>
                            <p><strong>Skills:</strong> Trade routes, natural resources, economic systems</p>
                            <p><strong>Evidence:</strong> Shipping manifests, port security footage, trade data</p>
                        </div>

                        <div class="progression-item">
                            <h4> Days 6-8: Archaeological Adventure</h4>
                            <p><strong>Focus:</strong> Historical geography and ancient civilizations</p>
                            <p><strong>Skills:</strong> River valley civilizations, geographic influence on history</p>
                            <p><strong>Evidence:</strong> Ancient maps, archaeological dig sites, historical documents</p>
                        </div>

                        <div class="progression-item">
                            <h4> Days 9-11: The Final Confrontation</h4>
                            <p><strong>Focus:</strong> Integrated geographic analysis and presentation</p>
                            <p><strong>Skills:</strong> All previous skills combined, communication, critical thinking</p>
                            <p><strong>Challenge:</strong> Track down The Cartographers' secret headquarters using all clues</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CLASSROOM MANAGEMENT SECTION -->
            <div class="teacher-section classroom-management" id="classroom-management">
                <h2> Classroom Management Strategies</h2>
                
                <div class="management-grid">
                    <div class="management-card">
                        <h4> Team Dynamics</h4>
                        <div class="teacher-facilitation">
                            <div class="facilitation-section">
                                <h5>Role Rotation Strategy</h5>
                                <ul>
                                    <li>Rotate team roles every 2-3 days</li>
                                    <li>Ensure all students experience different responsibilities</li>
                                    <li>Use role badges for visual identification</li>
                                    <li>Address team conflicts through "detective mediation"</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="management-card">
                        <h4> Progress Tracking</h4>
                        <div class="teacher-facilitation">
                            <div class="facilitation-section">
                                <h5>Visual Progress System</h5>
                                <ul>
                                    <li>Case Progress Board showing team advancement</li>
                                    <li>Individual skill badges for achievements</li>
                                    <li>Daily reflection logs</li>
                                    <li>Peer evaluation checkpoints</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="management-card">
                        <h4> Differentiation</h4>
                        <div class="teacher-facilitation">
                            <div class="facilitation-section">
                                <h5>Supporting All Learners</h5>
                                <ul>
                                    <li>Provide geographic skill reference sheets</li>
                                    <li>Offer simplified evidence for struggling students</li>
                                    <li>Create advanced challenges for gifted learners</li>
                                    <li>Use visual, auditory, and kinesthetic approaches</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="management-card">
                        <h4> Time Management</h4>
                        <div class="teacher-facilitation">
                            <div class="facilitation-section">
                                <h5>Pacing Strategies</h5>
                                <ul>
                                    <li>Use timer for investigation segments</li>
                                    <li>Build in flexible time for discoveries</li>
                                    <li>Prepare "case files" for early finishers</li>
                                    <li>Have backup activities ready</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ASSESSMENT GUIDE SECTION -->
            <div class="teacher-section assessment-guide" id="assessment-guide">
                <h2> Complete Assessment Framework</h2>
                
                <div class="assessment-overview">
                    <h3> Assessment Philosophy</h3>
                    <p>The Geographic Detective Academy uses a <strong>skills-based, portfolio approach</strong> that emphasizes growth, collaboration, and real-world application of geographic knowledge.</p>
                </div>

                <div class="assessment-types">
                    <div class="assessment-type-card">
                        <h4> Daily Formative Assessments</h4>
                        <div class="assessment-rubric">
                            <div class="rubric-grid">
                                <div class="rubric-category">
                                    <h5>Geographic Skills (40%)</h5>
                                    <ul>
                                        <li>Map reading accuracy</li>
                                        <li>Coordinate system understanding</li>
                                        <li>Geographic reasoning</li>
                                        <li>Spatial thinking development</li>
                                    </ul>
                                </div>
                                <div class="rubric-category">
                                    <h5>Investigation Process (30%)</h5>
                                    <ul>
                                        <li>Evidence analysis quality</li>
                                        <li>Logical reasoning</li>
                                        <li>Documentation completeness</li>
                                        <li>Hypothesis formation</li>
                                    </ul>
                                </div>
                                <div class="rubric-category">
                                    <h5>Collaboration (20%)</h5>
                                    <ul>
                                        <li>Team contribution</li>
                                        <li>Communication skills</li>
                                        <li>Role responsibility</li>
                                        <li>Peer support</li>
                                    </ul>
                                </div>
                                <div class="rubric-category">
                                    <h5>Reflection (10%)</h5>
                                    <ul>
                                        <li>Learning self-assessment</li>
                                        <li>Strategy improvement</li>
                                        <li>Goal setting</li>
                                        <li>Growth mindset</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="assessment-type-card">
                        <h4> Portfolio Development</h4>
                        <div class="teacher-facilitation">
                            <div class="facilitation-section">
                                <h5>Portfolio Components</h5>
                                <ul>
                                    <li><strong>Detective Character Profile:</strong> Initial and final versions</li>
                                    <li><strong>Case Investigation Logs:</strong> All daily investigations</li>
                                    <li><strong>Geographic Skills Evidence:</strong> Maps, charts, analyses</li>
                                    <li><strong>Team Collaboration Artifacts:</strong> Group products and reflections</li>
                                    <li><strong>Learning Reflection Journal:</strong> Daily learning insights</li>
                                    <li><strong>Final Case Presentation:</strong> Culminating detective report</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TROUBLESHOOTING SECTION -->
            <div class="teacher-section troubleshooting" id="troubleshooting">
                <h2> Common Issues & Solutions</h2>
                
                <div class="troubleshooting-grid">
                    <div class="issue-card">
                        <h4> "Students aren't engaging with the roleplay"</h4>
                        <div class="teacher-facilitation">
                            <div class="facilitation-section">
                                <h5>Solutions:</h5>
                                <ul>
                                    <li>Model detective enthusiasm yourself</li>
                                    <li>Use props (badges, magnifying glasses, detective hats)</li>
                                    <li>Create "classified" atmosphere with dim lighting and music</li>
                                    <li>Allow students to develop character voices</li>
                                    <li>Celebrate detective "achievements" publicly</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="issue-card">
                        <h4> "Teams are struggling with map reading"</h4>
                        <div class="teacher-facilitation">
                            <div class="facilitation-section">
                                <h5>Solutions:</h5>
                                <ul>
                                    <li>Provide map reading reference sheets</li>
                                    <li>Start with larger-scale, simpler maps</li>
                                    <li>Use online mapping tools for support</li>
                                    <li>Pair struggling students with map-confident peers</li>
                                    <li>Practice with classroom "treasure hunts"</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="issue-card">
                        <h4> "Cases are taking too long to complete"</h4>
                        <div class="teacher-facilitation">
                            <div class="facilitation-section">
                                <h5>Solutions:</h5>
                                <ul>
                                    <li>Set clear time limits with visible timers</li>
                                    <li>Provide investigation process checklists</li>
                                    <li>Offer strategic hints to stuck teams</li>
                                    <li>Simplify evidence for struggling groups</li>
                                    <li>Use "quick case" versions when needed</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="issue-card">
                        <h4> "Team conflicts are disrupting investigations"</h4>
                        <div class="teacher-facilitation">
                            <div class="facilitation-section">
                                <h5>Solutions:</h5>
                                <ul>
                                    <li>Implement "detective mediation" protocols</li>
                                    <li>Rotate team roles to redistribute power</li>
                                    <li>Create individual accountability within teams</li>
                                    <li>Use peer evaluation forms</li>
                                    <li>Address conflicts through character dialogue</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- STUDENT MATERIALS PANEL -->
        <div id="student-materials" class="content-panel hidden">
            <h2> Student Materials</h2>
            <p>Handouts, worksheets, and student resources will be loaded here...</p>
        </div>

        <!-- PRESENTATION PANEL -->
        <div id="gamma-prompts" class="content-panel hidden">
            <div class="loading-indicator">
                <h2> Loading Interactive Presentation...</h2>
                <p>Preparing your detective presentation system...</p>
            </div>
        </div>

        <!-- COMPLETE PACKAGE PANEL -->
        <div id="complete-package" class="content-panel hidden">
            <div class="loading-indicator">
                <h2> Loading Complete Package...</h2>
                <p>Preparing your comprehensive simulation resources...</p>
            </div>
        </div>
    </main>

    <!-- Load dynamic content system -->
    <script src="/simulation-dynamic.js"></script>
    
    <!-- Print functionality for teacher guide -->
    <script>
        // Print functions for teacher guide
        function printSection(sectionId) {
            // Add body class for section-specific printing
            const bodyClasses = document.body.className;
            
            if (sectionId === 'daily-scripts') {
                document.body.className = bodyClasses + ' print-daily-scripts-only';
            } else if (sectionId === 'setup-guide') {
                document.body.className = bodyClasses + ' print-setup-guide-only';
            }
            
            // Show the teacher guide panel
            const teacherGuide = document.getElementById('teacher-guide');
            if (teacherGuide) {
                teacherGuide.classList.remove('hidden');
            }
            
            // Hide other panels
            const allPanels = document.querySelectorAll('.content-panel');
            allPanels.forEach(panel => {
                if (panel.id !== 'teacher-guide') {
                    panel.style.display = 'none';
                }
            });
            
            // Trigger print
            setTimeout(() => {
                window.print();
                
                // Restore original state after print dialog
                setTimeout(() => {
                    document.body.className = bodyClasses;
                    allPanels.forEach(panel => {
                        panel.style.display = '';
                    });
                    
                    // Restore navigation state
                    const currentActive = document.querySelector('.nav-item.active');
                    if (currentActive && currentActive.getAttribute('data-panel') !== 'teacher-guide') {
                        teacherGuide.classList.add('hidden');
                    }
                }, 100);
            }, 250);
        }

        // Enhanced print function for complete guide
        window.printCompleteGuide = function() {
            // Show the teacher guide panel
            const teacherGuide = document.getElementById('teacher-guide');
            if (teacherGuide) {
                teacherGuide.classList.remove('hidden');
            }
            
            // Hide other panels
            const allPanels = document.querySelectorAll('.content-panel');
            const originalDisplay = [];
            allPanels.forEach((panel, index) => {
                originalDisplay[index] = panel.style.display;
                if (panel.id !== 'teacher-guide') {
                    panel.style.display = 'none';
                }
            });
            
            // Trigger print
            setTimeout(() => {
                window.print();
                
                // Restore original state after print dialog
                setTimeout(() => {
                    allPanels.forEach((panel, index) => {
                        panel.style.display = originalDisplay[index];
                    });
                    
                    // Restore navigation state
                    const currentActive = document.querySelector('.nav-item.active');
                    if (currentActive && currentActive.getAttribute('data-panel') !== 'teacher-guide') {
                        teacherGuide.classList.add('hidden');
                    }
                }, 100);
            }, 250);
        };
    </script>
    
    <!-- Initialize dynamic interface system -->
    <script>
        // Initialize the dynamic content system
        document.addEventListener('DOMContentLoaded', function() {
            // Small delay to ensure all DOM elements are ready
            setTimeout(() => {
                // Create the main interface controller
                window.simulationInterface = new SimulationInterface();
                console.log(' SimulationInterface initialized successfully');
                
                // Verify status buttons are working
                const classifiedBtn = document.querySelector('.badge.classified');
                const activeCaseBtn = document.querySelector('.badge.active-case');
                if (classifiedBtn && activeCaseBtn) {
                    console.log(' Status buttons found and ready');
                } else {
                    console.warn(' Status buttons not found');
                }
            }, 100);
        });
    </script>
    
    <!-- Load presentation system -->
    <script>
        // Include presentation system inline for immediate availability
        /**
         * Geographic Detective Academy Presentation System
         * Integrates the 133-slide presentation directly into the simulation interface
         */

        class SimulationPresentation {
            constructor() {
                this.currentSlide = 1;
                this.totalSlides = 133; // Will be loaded dynamically from API
                this.slidesPath = '/slides/';
                this.fullscreenMode = false;
                this.autoPlay = false;
                this.slideNotes = {};
                this.slideFilenames = {}; // Will be populated from API
                this.slidesLoaded = false;
                
                this.initializePresentation();
            }

            async loadSlidesFromAPI() {
                try {
                    console.log(' Loading slides from MongoDB...');
                    const response = await fetch('/api/slides');
                    const slides = await response.json();
                    
                    if (slides && slides.length > 0) {
                        this.totalSlides = slides.length;
                        this.slideFilenames = {};
                        
                        // Create filename mapping based on API response
                        slides.forEach((slide, index) => {
                            this.slideFilenames[index + 1] = slide.filename;
                        });
                        
                        this.slidesLoaded = true;
                        console.log(` Successfully loaded ${this.totalSlides} slides from database`);
                        
                        // Update UI elements after loading
                        this.updateSlideCounters();
                        
                        // Regenerate thumbnails with new slide data
                        if (document.getElementById('slide-thumbnails')) {
                            this.generateThumbnails();
                        }
                        
                        return true;
                    } else {
                        console.warn(' No slides found in database, using fallback');
                        this.useFallbackSlides();
                        return false;
                    }
                } catch (error) {
                    console.error(' Failed to load slides from API:', error);
                    this.useFallbackSlides();
                    return false;
                }
            }

            useFallbackSlides() {
                console.log(' Using fallback slide system...');
                this.totalSlides = 133; // Updated fallback to match uploaded slides
                
                // Generate fallback slide mapping dynamically for 133 slides
                this.slideFilenames = {};
                for (let i = 1; i <= this.totalSlides; i++) {
                    const paddedNumber = i.toString().padStart(2, '0');
                    this.slideFilenames[i] = `${paddedNumber}_slide.png`; // Generic fallback pattern
                }
                
                this.slidesLoaded = true;
                console.log(` Fallback: Generated mapping for ${this.totalSlides} slides`);
            }

            async initializePresentation() {
                // Try to load slides from API first
                const apiSuccess = await this.loadSlidesFromAPI();
                
                if (!apiSuccess) {
                    console.log(' Using fallback slides, API unavailable');
                }
                
                this.createPresentationInterface();
                this.setupKeyboardNavigation();
                this.loadSlideNotes();
                
                // Generate thumbnails after slides are loaded
                this.generateThumbnails();
                
                // Initialize the first slide
                this.updateSlide();
            }

            updateSlideCounters() {
                // Update total slide count displays
                const totalSlideElements = document.querySelectorAll('#total-slides, .total-slides-display');
                totalSlideElements.forEach(element => {
                    element.textContent = this.totalSlides;
                });
                
                // Update current slide displays
                const currentSlideElements = document.querySelectorAll('#current-slide, #current-slide-number');
                currentSlideElements.forEach(element => {
                    element.textContent = this.currentSlide;
                });
                
                // Update slide counter with full text
                const slideCounterElements = document.querySelectorAll('.slide-counter');
                slideCounterElements.forEach(element => {
                    if (element.textContent.includes('of')) {
                        element.innerHTML = `Slide <span id="current-slide">${this.currentSlide}</span> of <span id="total-slides">${this.totalSlides}</span>`;
                    }
                });
                
                // Update progress bar
                const progressFill = document.querySelector('.progress-fill');
                if (progressFill && this.totalSlides > 0) {
                    progressFill.style.width = `${(this.currentSlide / this.totalSlides) * 100}%`;
                }
                
                console.log(` Updated slide counters: ${this.currentSlide}/${this.totalSlides}`);
            }

            createPresentationInterface() {
                const presentationHTML = `
                    <div id="presentation-container" class="presentation-container">
                        <div class="presentation-header">
                            <div class="presentation-title">
                                <h2> Geographic Detective Academy Presentation</h2>
                                <div class="slide-counter">Slide <span id="current-slide">1</span> of <span id="total-slides">${this.totalSlides || 'Loading...'}</span></div>
                            </div>
                            <div class="presentation-controls">
                                <button class="btn-control" onclick="presentation.toggleFullscreen()">
                                    <span class="icon"></span> Fullscreen
                                </button>
                                <button class="btn-control" onclick="presentation.toggleAutoPlay()">
                                    <span class="icon"></span> Auto Play
                                </button>
                                <button class="btn-control" onclick="presentation.downloadSlide()">
                                    <span class="icon"></span> Download
                                </button>
                            </div>
                        </div>

                        <div class="presentation-viewer">
                        <div class="slide-container">
                            <!-- Actual slide image for GridFS slides -->
                            <img id="current-slide-image" 
                                 src="/slides/loading-placeholder.png" 
                                 alt="Geographic Detective Academy - Loading Slide"
                                 class="slide-image">
                            
                            <!-- Loading indicator -->
                            <div id="slide-loading-indicator" class="slide-loading" style="display: block;">
                                <div class="loading-content">
                                    <div class="loading-spinner"></div>
                                    <h3>Loading Presentation...</h3>
                                    <p>Preparing your Geographic Detective Academy slides...</p>
                                </div>
                            </div>
                            
                            <!-- Fallback placeholder if slides don't load -->
                            <div id="current-slide-placeholder" class="slide-placeholder" style="display: none;">
                                <div class="placeholder-content">
                                    <div class="placeholder-icon"></div>
                                    <h3>Geographic Detective Academy</h3>
                                    <p>Slide <span id="current-slide-number">1</span> of <span class="total-slides-display">${this.totalSlides || 'Loading...'}</span></p>
                                    <div class="placeholder-note">
                                        <strong>Note:</strong> Slide images are served locally only.<br>
                                        Full presentation available in development environment.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="slide-overlay">
                                <button class="nav-btn prev-btn" onclick="presentation.previousSlide()">
                                    <span class="icon"></span>
                                </button>
                                <button class="nav-btn next-btn" onclick="presentation.nextSlide()">
                                    <span class="icon"></span>
                                </button>
                            </div>

                            <div class="slide-annotations" id="slide-annotations">
                                <!-- Dynamic annotations will be loaded here -->
                            </div>
                        </div>                            <div class="slide-notes-panel" id="slide-notes-panel">
                                <h4> Teacher's Script Reminders</h4>
                                <div id="slide-notes-content">
                                    Loading teacher script...
                                </div>
                            </div>
                        </div>

                        <div class="presentation-footer">
                            <div class="slide-thumbnails" id="slide-thumbnails">
                                <!-- Thumbnail navigation will be generated here -->
                            </div>
                            
                            <div class="presentation-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${this.totalSlides > 0 ? (1/this.totalSlides) * 100 : 0}%"></div>
                                </div>
                                <div class="slide-timer" id="slide-timer">00:00</div>
                            </div>
                        </div>
                    </div>
                `;

                return presentationHTML;
            }

            // Add presentation panel to existing simulation
            addToPresentationPanel() {
                const presentationPanel = document.getElementById('gamma-prompts');
                if (presentationPanel) {
                    presentationPanel.innerHTML = `
                        <h2> Interactive Presentation</h2>
                        <p class="subtitle">Navigate through the complete Geographic Detective Academy presentation</p>
                        ${this.createPresentationInterface()}
                    `;
                    
                    // Force immediate slide initialization after DOM is ready
                    setTimeout(() => {
                        this.initializeSlideDisplay();
                    }, 100);
                }
            }

            async initializeSlideDisplay() {
                const slideImage = document.getElementById('current-slide-image');
                const placeholder = document.getElementById('current-slide-placeholder');
                const loadingIndicator = document.getElementById('slide-loading-indicator');
                
                if (slideImage && placeholder && loadingIndicator) {
                    console.log(` Initializing presentation with ${this.totalSlides} slides from MongoDB GridFS`);
                    
                    // Wait for slides to load if they haven't already
                    if (!this.slidesLoaded) {
                        console.log(' Waiting for slides to load...');
                        await this.loadSlidesFromAPI();
                    }
                    
                    // Hide loading indicator
                    loadingIndicator.style.display = 'none';
                    
                    // Set up error handling first
                    slideImage.onerror = () => {
                        console.warn(` Slide ${this.currentSlide} failed to load, showing placeholder`);
                        slideImage.style.display = 'none';
                        placeholder.style.display = 'flex';
                    };
                    
                    // Set up success handling
                    slideImage.onload = () => {
                        console.log(` Slide ${this.currentSlide} loaded successfully`);
                        slideImage.style.display = 'block';
                        placeholder.style.display = 'none';
                    };
                    
                    // Update slide counters with actual total
                    this.updateSlideCounters();
                    
                    // Start with first slide
                    this.updateSlide();
                } else {
                    console.error(' Presentation elements not found');
                }
            }

            nextSlide() {
                if (this.currentSlide < this.totalSlides) {
                    this.currentSlide++;
                    this.updateSlide();
                }
            }

            previousSlide() {
                if (this.currentSlide > 1) {
                    this.currentSlide--;
                    this.updateSlide();
                }
            }

            goToSlide(slideNumber) {
                if (slideNumber >= 1 && slideNumber <= this.totalSlides) {
                    this.currentSlide = slideNumber;
                    this.updateSlide();
                }
            }

            updateSlide() {
                // Update slide counters first
                this.updateSlideCounters();

                // Update the slide image source
                const slideImage = document.getElementById('current-slide-image');
                if (slideImage) {
                    const slideFilename = this.slideFilenames[this.currentSlide];
                    if (slideFilename) {
                        console.log(` Loading slide ${this.currentSlide}: ${slideFilename}`);
                        
                        // Use API endpoint for production, fallback to local path for development
                        if (this.slidesLoaded && slideFilename !== `${this.currentSlide.toString().padStart(2, '0')}_slide.png`) {
                            // Database slides - use API endpoint
                            slideImage.src = `/api/slides/${this.currentSlide}`;
                        } else {
                            // Local development or fallback slides
                            slideImage.src = `/slides/${slideFilename}`;
                        }
                        
                        slideImage.alt = `Geographic Detective Academy - Slide ${this.currentSlide}`;
                    } else {
                        console.error(` No filename mapping for slide ${this.currentSlide}`);
                        // Show placeholder if no filename found
                        const placeholder = document.getElementById('current-slide-placeholder');
                        if (placeholder) {
                            slideImage.style.display = 'none';
                            placeholder.style.display = 'flex';
                        }
                    }
                }

                this.updateSlideNotes();
            }

            updateSlideNotes() {
                const notesContent = document.getElementById('slide-notes-content');
                if (notesContent) {
                    const notes = this.getEnhancedSlideNotes(this.currentSlide);
                    notesContent.innerHTML = notes;
                }
            }

            getEnhancedSlideNotes(slideNumber) {
                const teacherScript = this.getTeacherScript(slideNumber);
                
                return `
                    <div class="teacher-script-reminders">
                        <div class="script-section opening-energy">
                            <h5> Opening Lines</h5>
                            <div class="script-content">${teacherScript.opening}</div>
                        </div>
                        
                        <div class="script-section key-points">
                            <h5> Key Points to Hit</h5>
                            <div class="script-content">${teacherScript.keyPoints}</div>
                        </div>
                        
                        <div class="script-section student-engagement">
                            <h5> Student Engagement</h5>
                            <div class="script-content">${teacherScript.engagement}</div>
                        </div>
                        
                        <div class="script-section transition-prep">
                            <h5> Transition to Next</h5>
                            <div class="script-content">${teacherScript.transition}</div>
                        </div>
                    </div>
                `;
            }

            getTeacherScript(slideNumber) {
                // Teacher script reminders organized by slide patterns
                const scripts = {
                    1: {
                        opening: " 'Welcome, future geographic detectives!' <br> Build excitement: 'You're about to become geographic superheroes!' <br> Set mysterious tone with dramatic voice",
                        keyPoints: " This is a DETECTIVE ACADEMY, not regular geography <br> Students will solve real mysteries using geographic skills <br> Every case builds their geographic thinking powers",
                        engagement: " Ask: 'Who has watched detective shows?' <br> 'Raise your hand if you love solving puzzles!' <br> Get them to say 'Detective [Name]' instead of just their name",
                        transition: " 'But wait... there's a CRISIS happening!' <br> Build suspense: 'The world needs geographic detectives RIGHT NOW!' <br> Click to next slide with dramatic pause"
                    },
                    2: {
                        opening: " 'URGENT! This just came in!' (dramatic voice) <br> 'Geographic knowledge is needed to save the world!' <br> Emphasize this is REAL and IMPORTANT",
                        keyPoints: " Geography isn't just maps - it saves lives! <br> Examples: disaster response, disease tracking, trade routes <br> Students have power to make a difference with geographic skills",
                        engagement: " Ask: 'What emergencies need geographic knowledge?' <br> Get students to brainstorm real-world examples <br> 'Who's ready to be a geographic hero?'",
                        transition: " 'So the question is... are YOU ready?' <br> 'Do you have what it takes to become a Geographic Crime Specialist?' <br> Build anticipation for their transformation"
                    },
                    3: {
                        opening: " 'Congratulations - you've been CHOSEN!' <br> 'You're no longer just students - you're DETECTIVES!' <br> Help them feel the identity shift happening",
                        keyPoints: " They are now Geographic Crime Specialists <br> This is a real title with real responsibilities <br> They'll use detective skills + geography to solve mysteries",
                        engagement: " Have them create detective names: 'Agent Atlas,' 'Detective Longitude' <br> Practice introducing themselves as detectives <br> Ask: 'What's your detective specialty going to be?'",
                        transition: " 'Every great detective needs a team!' <br> 'Let's meet your investigation partners!' <br> Emphasize teamwork in real detective work"
                    },
                    4: {
                        opening: " 'Meet your Geographic Investigation Team!' <br> 'Each role has special superpowers!' <br> Explain this is how real professionals work",
                        keyPoints: " Four roles: Evidence Manager, Geography Specialist, Resource Tracker, Case Chronicler <br> Each student picks one role (or rotate) <br> Teams work together to solve each case",
                        engagement: " Read each role description with excitement <br> Ask: 'Which role sounds most exciting to you?' <br> Form teams and assign roles right now",
                        transition: " 'Now that you have your team...' <br> 'Let's talk about your path to mastery!' <br> 'Every detective starts somewhere - here's your journey!'"
                    },
                    5: {
                        opening: " 'Welcome to your Geographic Detective Academy training path!' <br> 'Like a video game - you'll level up with each case!' <br> Show progression from beginner to master",
                        keyPoints: " Four levels: Beginner  Skilled  Expert  Master Detective <br> Each case teaches new skills <br> Skills build on each other throughout academy",
                        engagement: " Ask: 'What level do you think you are now?' <br> 'What geographic skills do you already have?' <br> Set goals: 'Where do you want to be by the end?'",
                        transition: " 'Are you ready for your first case?' <br> 'Time to put on your detective hat!' <br> Build excitement: 'Case File 001 is about to open!'"
                    }
                };

                // Generate scripts for other slide patterns
                if (!scripts[slideNumber]) {
                    return this.generateScriptByPattern(slideNumber);
                }

                return scripts[slideNumber];
            }

            generateScriptByPattern(slideNumber) {
                // Pattern-based script generation for slides 6-60
                const slidePatterns = {
                    caseFile: [6, 13, 21, 28, 35, 41, 48, 55],
                    dayIntro: [13, 21, 28, 35, 41, 48, 55],
                    investigation: [7, 8, 14, 15, 22, 23, 29, 30, 36, 37, 42, 43, 49, 50, 56, 57],
                    witness: [9, 16, 24, 31, 44],
                    challenge: [10, 17, 25, 32, 38, 45, 51, 58],
                    solved: [11, 18, 26, 33, 39, 46, 52, 59],
                    skills: [12, 19, 27, 34, 40, 47, 53, 60]
                };

                if (slidePatterns.caseFile.includes(slideNumber)) {
                    return {
                        opening: " 'RED ALERT! New case file just arrived!' <br> Read case details with urgency <br> Build suspense about the mystery",
                        keyPoints: " Explain the geographic focus of this case <br> Connect to skills they've learned <br> Set expectations for difficulty level",
                        engagement: " Ask: 'What do you notice about this case?' <br> 'What geographic skills will be most important?' <br> Get teams ready for investigation",
                        transition: " 'Let's investigate this step by step!' <br> 'Time to use your detective skills!' <br> Move confidently to investigation phase"
                    };
                } else if (slidePatterns.investigation.includes(slideNumber)) {
                    return {
                        opening: " 'Let's examine the evidence!' <br> Point out key geographic clues <br> Guide their observation skills",
                        keyPoints: " Help students identify geographic patterns <br> Connect evidence to geographic themes <br> Encourage systematic analysis",
                        engagement: " Ask: 'What do you observe?' <br> 'How does geography help explain this?' <br> Give teams time to discuss findings",
                        transition: " 'Great observations! Now let's...' <br> Build on their discoveries <br> Move to next investigation step"
                    };
                } else if (slidePatterns.witness.includes(slideNumber)) {
                    return {
                        opening: " 'Time for a witness interview!' <br> Introduce the expert witness <br> Explain their geographic expertise",
                        keyPoints: " Focus on what this expert can teach us <br> Connect their knowledge to the case <br> Highlight geographic insights they provide",
                        engagement: " Ask: 'What questions should we ask this expert?' <br> 'How does their expertise help our case?' <br> Practice interview techniques",
                        transition: " 'Great questions! Based on what we learned...' <br> Summarize key insights <br> Connect to next challenge"
                    };
                } else if (slidePatterns.challenge.includes(slideNumber)) {
                    return {
                        opening: " 'Challenge time! Put your skills to the test!' <br> Explain the geographic challenge clearly <br> Build confidence: 'You've got this!'",
                        keyPoints: " Break down the challenge into steps <br> Remind them of relevant skills they've learned <br> Encourage teamwork and collaboration",
                        engagement: " Give teams time to work together <br> Circulate and provide hints as needed <br> Ask: 'What geographic tools will help here?'",
                        transition: " 'Excellent work! Let's see the solution!' <br> Prepare to reveal and celebrate <br> Build anticipation for case resolution"
                    };
                } else if (slidePatterns.solved.includes(slideNumber)) {
                    return {
                        opening: " 'CASE SOLVED! Victory dance time!' <br> Celebrate their success enthusiastically <br> Acknowledge their brilliant detective work",
                        keyPoints: " Explain how geographic skills solved the case <br> Highlight the specific methods they used <br> Connect to real-world applications",
                        engagement: " Ask: 'How did you figure that out?' <br> 'What was your aha moment?' <br> Let teams share their problem-solving process",
                        transition: " 'You've earned some serious skills!' <br> Build excitement for skill recognition <br> Prepare for level-up celebration"
                    };
                } else if (slidePatterns.skills.includes(slideNumber)) {
                    return {
                        opening: " 'Skill level up! You're getting stronger!' <br> Announce new abilities they've gained <br> Make it feel like a video game achievement",
                        keyPoints: " List specific skills they've mastered <br> Explain how these skills transfer to real life <br> Show their progression through detective levels",
                        engagement: " Ask: 'Which new skill feels most powerful?' <br> 'Where could you use these skills outside class?' <br> Let them reflect on growth",
                        transition: " 'Ready for an even bigger challenge?' <br> Tease the next case or adventure <br> Build momentum for continued learning"
                    };
                } else {
                    return {
                        opening: " Greet students with energy and enthusiasm <br> Connect this slide to the detective story <br> Maintain the geographic mystery theme",
                        keyPoints: " Focus on the main geographic concept <br> Connect to previous learning <br> Make it relevant to their detective journey",
                        engagement: " Ask questions to check understanding <br> Get students actively participating <br> Use think-pair-share strategies",
                        transition: " Summarize key points <br> Build anticipation for what comes next <br> Keep the energy high"
                    };
                }
            }

            generateRemainingSlideContent(slideNumber) {
                // Generate content for slides 6-60 based on patterns and themes
                const slidePatterns = {
                    // Case File slides (6, 13, 21, 29, 39, 49)
                    caseFile: [6, 13, 21, 29, 39, 49],
                    // Day introduction slides (7, 14, 22, 30, 40, 50)
                    dayIntro: [7, 14, 22, 30, 40, 50],
                    // Crime scene investigation slides
                    crimeScene: [8, 15, 23, 31, 41, 51],
                    // Witness interview slides
                    witnessInterview: [9, 16, 24, 33, 43],
                    // Geographic challenge slides
                    geoChallenge: [10, 17, 25, 32, 34, 44, 45, 54],
                    // Case solved slides
                    caseSolved: [11, 19, 27, 37, 47, 57],
                    // Skills earned slides
                    skillsEarned: [12, 20, 28, 38, 48],
                    // Multi-day investigation slides
                    multiDay: [31, 41, 51],
                    // Final confrontation slides
                    finale: [50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60]
                };

                if (slidePatterns.caseFile.includes(slideNumber)) {
                    return this.getCaseFileContent(slideNumber);
                } else if (slidePatterns.dayIntro.includes(slideNumber)) {
                    return this.getDayIntroContent(slideNumber);
                } else if (slidePatterns.crimeScene.includes(slideNumber)) {
                    return this.getCrimeSceneContent(slideNumber);
                } else if (slidePatterns.witnessInterview.includes(slideNumber)) {
                    return this.getWitnessInterviewContent(slideNumber);
                } else if (slidePatterns.geoChallenge.includes(slideNumber)) {
                    return this.getGeoChallengeContent(slideNumber);
                } else if (slidePatterns.caseSolved.includes(slideNumber)) {
                    return this.getCaseSolvedContent(slideNumber);
                } else if (slidePatterns.skillsEarned.includes(slideNumber)) {
                    return this.getSkillsEarnedContent(slideNumber);
                } else if (slidePatterns.finale.includes(slideNumber)) {
                    return this.getFinaleContent(slideNumber);
                }

                return this.getDefaultSlideStructure();
            }

            getCaseFileContent(slideNumber) {
                const caseNumbers = {6: "001", 13: "002", 21: "003", 29: "004-005", 39: "006-008", 49: "009-011"};
                const caseThemes = {
                    6: "location and place",
                    13: "physical geography", 
                    21: "cultural geography",
                    29: "economic geography",
                    39: "historical geography",
                    49: "global connections"
                };
                
                return {
                    energyTitle: ` CASE FILE ${caseNumbers[slideNumber]} - CODE RED!`,
                    energyContent: `
                        <p> <strong>New Case Alert:</strong> A fresh geographic mystery awaits your detective skills!</p>
                        <p> <em>Investigation Mode:</em> This case will test your understanding of ${caseThemes[slideNumber]}!</p>
                        <div class="urgency-meter">URGENCY:  (8/10)</div>
                    `,
                    toolkit: `
                        <div class="case-prep-kit">
                            <div class="tool-item"> <strong>Case File Analysis:</strong> Read between the lines for geographic clues</div>
                            <div class="tool-item"> <strong>Evidence Priority:</strong> Which details matter most?</div>
                            <div class="tool-item"> <strong>Pattern Recognition:</strong> Connect this case to geographic principles</div>
                            <div class="tool-item"> <strong>Quick Response:</strong> Time is critical in investigation work</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Detective Protocol for Case Files:</strong></p>
                        <ul>
                            <li> <strong>First Impression:</strong> What jumps out immediately?</li>
                            <li> <strong>Key Details:</strong> Location, time, people involved</li>
                            <li> <strong>Geographic Links:</strong> How does place affect the situation?</li>
                            <li> <strong>Missing Information:</strong> What else do you need to know?</li>
                        </ul>
                    `,
                    funTitle: "Case File Secrets",
                    funContent: `
                        <p> <strong>Detective Tip:</strong> Real FBI case files use a geographic information system to track crime patterns across locations!</p>
                        <p> <strong>Hollywood vs Reality:</strong> Unlike movies, real detectives spend 80% of their time analyzing data and only 20% in dramatic confrontations!</p>
                    `,
                    sourceTitle: "FBI Case Management",
                    sourceContent: `
                        <blockquote>
                            <p>"Every case tells a story through space and time. The geography of a crime is often the key to solving it."</p>
                            <cite> FBI Geographic Profiling Manual</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
     CASE FILE ${caseNumbers[slideNumber]} 
    
      ACTIVE CASE   
                        
     Geographic Mystery 
     Level: ${slideNumber <= 13 ? 'BEGINNER' : slideNumber <= 29 ? 'INTERMEDIATE' : 'ADVANCED'}     
                        
     Status: URGENT     
    
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Case Preview Analysis:</strong> Based on the case file number and theme, what type of geographic evidence do you expect to find?</p>
                        <p><strong>Strategy Planning:</strong> Which member of your investigation team should take the lead on this type of case?</p>
                    `
                };
            }

            getDayIntroContent(slideNumber) {
                const dayThemes = {
                    7: {day: 1, theme: "Great Globe Heist", focus: "location and place", difficulty: "starter"},
                    14: {day: 2, theme: "Mountains of Mystery", focus: "physical geography", difficulty: "building"},
                    22: {day: 3, theme: "International Heritage Heist", focus: "cultural geography", difficulty: "expanding"},
                    30: {day: "4-5", theme: "Economic Espionage", focus: "economic systems", difficulty: "challenging"},
                    40: {day: "6-8", theme: "Archaeological Adventure", focus: "historical geography", difficulty: "complex"},
                    50: {day: "9-11", theme: "Final Confrontation", focus: "global connections", difficulty: "mastery"}
                };
                
                const day = dayThemes[slideNumber];
                
                return {
                    energyTitle: ` Day ${day.day}: ${day.theme}!`,
                    energyContent: `
                        <p> <strong>New Chapter Begins:</strong> Welcome to Day ${day.day} of your Geographic Detective Academy training!</p>
                        <p> <em>Focus Area:</em> Today you'll master ${day.focus} through hands-on investigation!</p>
                        <div class="difficulty-badge">DIFFICULTY: ${day.difficulty.toUpperCase()}</div>
                    `,
                    toolkit: `
                        <div class="daily-toolkit">
                            <div class="tool-item"> <strong>Day Planning:</strong> Multiple cases await your attention</div>
                            <div class="tool-item"> <strong>Theme Focus:</strong> All activities connect to ${day.focus}</div>
                            <div class="tool-item"> <strong>Skill Building:</strong> Each challenge builds on previous learning</div>
                            <div class="tool-item"> <strong>Achievement Goals:</strong> Specific skills to earn today</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Geographic Focus: ${day.focus.charAt(0).toUpperCase() + day.focus.slice(1)}</strong></p>
                        <ul>
                            <li> <strong>Investigation Approach:</strong> How does this theme help solve mysteries?</li>
                            <li> <strong>Real-World Applications:</strong> Where do you see this in daily life?</li>
                            <li> <strong>Connection Points:</strong> How does this link to other geographic concepts?</li>
                            <li> <strong>Skill Development:</strong> What abilities will you strengthen today?</li>
                        </ul>
                    `,
                    funTitle: "Daily Dose of Awesome",
                    funContent: `
                        <p> <strong>Theme Connection:</strong> Professional geographers often specialize in specific areas, just like how each day focuses on different aspects of our world!</p>
                        <p> <strong>Brain Boost:</strong> Studies show that themed learning days increase retention by 67% compared to random topic mixing!</p>
                    `,
                    sourceTitle: "Educational Philosophy",
                    sourceContent: `
                        <blockquote>
                            <p>"Learning is most effective when it follows a logical progression from simple to complex, with each day building upon the last."</p>
                            <cite> Bloom's Taxonomy Applied to Geographic Education</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
        DAY ${day.day}: ${day.theme.toUpperCase()}
    
       MORNING BRIEFING   
                             
     Theme: ${day.focus}     
     Level: ${day.difficulty}           
                             
      Ready for Action!   
    
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Day Strategy:</strong> Based on today's theme of ${day.focus}, what investigation strategies will be most important?</p>
                        <p><strong>Personal Connection:</strong> How does ${day.focus} show up in your own daily life or community?</p>
                    `
                };
            }

            getCrimeSceneContent(slideNumber) {
                const scenes = {
                    8: {location: "Geography Classroom", evidence: "Missing globe", geographic_element: "location coordinates"},
                    15: {location: "Cartographer's Office", evidence: "Topographic maps", geographic_element: "elevation data"},
                    23: {location: "International Museum", evidence: "Cultural artifacts", geographic_element: "cultural regions"},
                    31: {location: "Trade Center", evidence: "Economic documents", geographic_element: "trade routes"},
                    41: {location: "Archaeological Site", evidence: "Ancient maps", geographic_element: "historical layers"},
                    51: {location: "Master Criminal Hideout", evidence: "Global network", geographic_element: "worldwide connections"}
                };
                
                const scene = scenes[slideNumber];
                
                return {
                    energyTitle: ` Active Crime Scene Investigation!`,
                    energyContent: `
                        <p> <strong>Scene Analysis:</strong> You're now at the ${scene.location}every detail matters!</p>
                        <p> <em>Investigation Focus:</em> Look for clues related to ${scene.geographic_element}!</p>
                        <div class="scene-status">SCENE STATUS:  ACTIVE INVESTIGATION </div>
                    `,
                    toolkit: `
                        <div class="csi-kit">
                            <div class="tool-item"> <strong>Documentation:</strong> Record everything you observe</div>
                            <div class="tool-item"> <strong>Evidence Collection:</strong> Focus on geographic clues</div>
                            <div class="tool-item"> <strong>Spatial Analysis:</strong> How are items arranged in space?</div>
                            <div class="tool-item"> <strong>Pattern Recognition:</strong> What story does the scene tell?</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Crime Scene Investigation Principles:</strong></p>
                        <ul>
                            <li> <strong>Observe First:</strong> Look before you touch anything</li>
                            <li> <strong>Document Everything:</strong> Photos, sketches, measurements</li>
                            <li> <strong>Find Connections:</strong> How do pieces relate to each other?</li>
                            <li> <strong>Ask Questions:</strong> What seems out of place? Why?</li>
                            <li> <strong>Geographic Context:</strong> How does location affect the evidence?</li>
                        </ul>
                    `,
                    funTitle: "CSI Geography Style",
                    funContent: `
                        <p> <strong>Real CSI:</strong> Forensic geography is a real field! Experts analyze soil samples, pollen, and mineral traces to determine where crimes occurred!</p>
                        <p> <strong>Science Connection:</strong> Geographic techniques help solve 73% more cases than traditional methods alone!</p>
                    `,
                    sourceTitle: "Forensic Geography Principles",
                    sourceContent: `
                        <blockquote>
                            <p>"Every place leaves traces on everything that touches it. Every person carries a piece of every place they've been."</p>
                            <cite> Dr. Edmond Locard's Exchange Principle, adapted for geographic investigation</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
     CRIME SCENE: ${scene.location.toUpperCase()} 
    
      Evidence Found:           
                                  
      ${scene.evidence}                
      Geographic clues present   
      ${scene.geographic_element} important    
                                  
     Status: Under Investigation  
    
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Scene Analysis:</strong> If you were the first investigator on scene, what three things would you document first?</p>
                        <p><strong>Geographic Thinking:</strong> How might the location of this crime scene affect the evidence you find?</p>
                    `
                };
            }

            getWitnessInterviewContent(slideNumber) {
                const witnesses = {
                    9: {name: "Janitor Bob", expertise: "Building security", location: "Local school", accent: "Friendly neighborhood"},
                    16: {name: "Dr. Sarah Chen", expertise: "Chief Cartographer", location: "Mapping institute", accent: "Professional academic"},
                    24: {name: "Maria Santos", expertise: "Museum Director", location: "Cultural center", accent: "International perspective"},
                    33: {name: "Dr. James Morrison", expertise: "Trade Specialist", location: "Economic research", accent: "Business professional"},
                    43: {name: "Dr. Elena Rodriguez", expertise: "Lead Archaeologist", location: "Historical sites", accent: "Field researcher"}
                };
                
                const witness = witnesses[slideNumber];
                
                return {
                    energyTitle: ` Witness Interview: ${witness.name}!`,
                    energyContent: `
                        <p> <strong>Key Witness Located:</strong> ${witness.name} has crucial information about the case!</p>
                        <p> <em>Listen Carefully:</em> Their expertise in ${witness.expertise} could crack this case wide open!</p>
                        <div class="witness-reliability">CREDIBILITY:  (Highly Reliable)</div>
                    `,
                    toolkit: `
                        <div class="interview-kit">
                            <div class="tool-item"> <strong>Strategic Questions:</strong> What do you need to know?</div>
                            <div class="tool-item"> <strong>Active Listening:</strong> Catch verbal and non-verbal clues</div>
                            <div class="tool-item"> <strong>Note Taking:</strong> Record key information immediately</div>
                            <div class="tool-item"> <strong>Follow-up Probes:</strong> Ask clarifying questions</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Effective Interview Techniques:</strong></p>
                        <ul>
                            <li> <strong>Open-ended Questions:</strong> "Tell me about..." works better than "Did you see..."</li>
                            <li> <strong>Build Rapport:</strong> Make the witness comfortable and willing to share</li>
                            <li> <strong>Timeline Clarity:</strong> When did events happen in relation to each other?</li>
                            <li> <strong>Spatial Details:</strong> Where exactly were people and objects?</li>
                            <li> <strong>Verification:</strong> Ask the same information in different ways</li>
                        </ul>
                    `,
                    funTitle: "Interview Psychology",
                    funContent: `
                        <p> <strong>Memory Fact:</strong> People remember spatial information (where things happened) 3x better than temporal information (when things happened)!</p>
                        <p> <strong>Expert Insight:</strong> ${witness.name}'s background in ${witness.expertise} means they'll notice details others miss!</p>
                    `,
                    sourceTitle: "Interview Wisdom",
                    sourceContent: `
                        <blockquote>
                            <p>"The art of questioning is more important than the knowledge of answers. Every witness holds a piece of the geographic puzzle."</p>
                            <cite> Adapted from investigative journalism principles</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
     WITNESS INTERVIEW 
    
     Witness: ${witness.name}   
     Role: ${witness.expertise}      
                             
      "I saw something      
        unusual..."          
                             
     Status: COOPERATIVE     
    
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Interview Strategy:</strong> What three questions would you ask ${witness.name} to get the most useful geographic information?</p>
                        <p><strong>Expert Analysis:</strong> How might ${witness.name}'s expertise in ${witness.expertise} give them unique insights into this case?</p>
                    `
                };
            }

            getGeoChallengeContent(slideNumber) {
                const challenges = {
                    10: {title: "First Geographic Challenge", skill: "Location identification", tools: "Coordinates and maps"},
                    17: {title: "Physical Geography Challenge", skill: "Terrain analysis", tools: "Topographic maps"},
                    25: {title: "Geographic Culture Connection", skill: "Cultural mapping", tools: "Demographic data"},
                    32: {title: "Economic Geography Understanding", skill: "Trade pattern analysis", tools: "Economic indicators"},
                    34: {title: "Resource Geography Challenge", skill: "Resource distribution", tools: "Resource maps"},
                    44: {title: "Ancient Geographic Technology", skill: "Historical analysis", tools: "Archaeological evidence"},
                    45: {title: "Historical Geography Challenge", skill: "Temporal-spatial analysis", tools: "Historical maps"},
                    54: {title: "Advanced Geographic Intelligence", skill: "Complex synthesis", tools: "Multi-source integration"}
                };
                
                const challenge = challenges[slideNumber];
                
                return {
                    energyTitle: ` ${challenge.title}!`,
                    energyContent: `
                        <p> <strong>Brain Power Activated:</strong> Time to put your detective skills to the test!</p>
                        <p> <em>Skill Focus:</em> This challenge develops your ${challenge.skill} abilities!</p>
                        <div class="challenge-level">CHALLENGE LEVEL: ${slideNumber <= 20 ? ' BEGINNER' : slideNumber <= 40 ? ' INTERMEDIATE' : ' ADVANCED'}</div>
                    `,
                    toolkit: `
                        <div class="challenge-toolkit">
                            <div class="tool-item"> <strong>Primary Skill:</strong> ${challenge.skill}</div>
                            <div class="tool-item"> <strong>Tools Available:</strong> ${challenge.tools}</div>
                            <div class="tool-item"> <strong>Think Time:</strong> Quality over speed in analysis</div>
                            <div class="tool-item"> <strong>Team Power:</strong> Collaborate for best results</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Challenge Success Strategies:</strong></p>
                        <ul>
                            <li> <strong>Review First:</strong> What have you learned that applies here?</li>
                            <li> <strong>Organize Information:</strong> Sort facts from opinions</li>
                            <li> <strong>Make Connections:</strong> How do different pieces fit together?</li>
                            <li> <strong>Check Your Work:</strong> Does your answer make geographic sense?</li>
                            <li> <strong>Extend Thinking:</strong> What else could this mean?</li>
                        </ul>
                    `,
                    funTitle: "Challenge Boost",
                    funContent: `
                        <p> <strong>Brain Training:</strong> Geographic challenges activate the same neural pathways used by professional analysts at NASA and National Geographic!</p>
                        <p> <strong>Growth Mindset:</strong> Every challenge you solve makes you stronger for the next oneyou're literally building geographic intelligence!</p>
                    `,
                    sourceTitle: "Learning Science",
                    sourceContent: `
                        <blockquote>
                            <p>"We learn by doing, by struggling with problems, and by making our own discoveries. Each challenge is a gift to your growing mind."</p>
                            <cite> John Dewey, applied to geographic learning</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
     GEOGRAPHIC CHALLENGE 
    
     Skill: ${challenge.skill}       
                               
     Tools: ${challenge.tools}        
                               
      THINKING MODE ON!    
                               
     Status: Ready to Solve    
    
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Strategy Planning:</strong> Before diving in, what approach will you take to tackle this ${challenge.skill} challenge?</p>
                        <p><strong>Resource Inventory:</strong> Which of your previously learned skills will be most helpful here?</p>
                    `
                };
            }

            getCaseSolvedContent(slideNumber) {
                const solutions = {
                    11: {case: "Great Globe Heist", method: "Coordinate analysis", lesson: "Location precision"},
                    19: {case: "Mountains of Mystery", method: "Elevation mapping", lesson: "Physical geography patterns"},
                    27: {case: "Heritage Heist", method: "Cultural pattern recognition", lesson: "Cultural geography connections"},
                    37: {case: "Economic Espionage", method: "Trade route analysis", lesson: "Economic geographic systems"},
                    47: {case: "Archaeological Adventure", method: "Historical geographic synthesis", lesson: "Time-space relationships"},
                    57: {case: "Final Confrontation", method: "Global system integration", lesson: "Complex geographic thinking"}
                };
                
                const solution = solutions[slideNumber];
                
                return {
                    energyTitle: ` CASE SOLVED! Victory Achieved!`,
                    energyContent: `
                        <p> <strong>Mission Accomplished:</strong> The ${solution.case} has been solved through brilliant detective work!</p>
                        <p> <em>Method Mastery:</em> Your ${solution.method} skills cracked the case!</p>
                        <div class="victory-banner"> CONGRATULATIONS! </div>
                    `,
                    toolkit: `
                        <div class="victory-toolkit">
                            <div class="tool-item"> <strong>Solution Method:</strong> ${solution.method}</div>
                            <div class="tool-item"> <strong>Key Learning:</strong> ${solution.lesson}</div>
                            <div class="tool-item"> <strong>Process Review:</strong> What worked well?</div>
                            <div class="tool-item"> <strong>Next Level:</strong> Ready for bigger challenges</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Reflection and Growth:</strong></p>
                        <ul>
                            <li> <strong>Success Analysis:</strong> What specific skills led to solving this case?</li>
                            <li> <strong>Process Improvement:</strong> What would you do differently next time?</li>
                            <li> <strong>Skill Transfer:</strong> How can you apply this to future challenges?</li>
                            <li> <strong>Team Dynamics:</strong> How did collaboration enhance the solution?</li>
                            <li> <strong>Progress Tracking:</strong> How have your skills evolved?</li>
                        </ul>
                    `,
                    funTitle: "Victory Celebration",
                    funContent: `
                        <p> <strong>Success Science:</strong> Celebrating learning victories releases dopamine, which helps cement new knowledge in your brain!</p>
                        <p> <strong>Detective Level Up:</strong> You've just proven you can think like a real geographic analystthat's a superpower!</p>
                    `,
                    sourceTitle: "Achievement Philosophy",
                    sourceContent: `
                        <blockquote>
                            <p>"Success is not just reaching the destination, but understanding the journey that got you there."</p>
                            <cite> Applied learning theory for geographic education</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
     CASE SOLVED! 
    
      VICTORY ACHIEVED!  
                           
     Case: ${solution.case}     
     Method: ${solution.method}  
                           
      SKILL MASTERED!   
    
               
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Victory Analysis:</strong> What was the "aha!" moment that led to solving this case?</p>
                        <p><strong>Skill Application:</strong> How will you use the ${solution.lesson} skills you've mastered in future investigations?</p>
                    `
                };
            }

            getSkillsEarnedContent(slideNumber) {
                const skillSets = {
                    12: {day: 1, skills: ["Location identification", "Coordinate systems", "Basic mapping"], badge: "Geographic Foundation"},
                    20: {day: 2, skills: ["Physical geography analysis", "Elevation interpretation", "Landform recognition"], badge: "Physical Geography Expert"},
                    28: {day: 3, skills: ["Cultural pattern recognition", "Heritage connections", "Human geography"], badge: "Cultural Geography Specialist"},
                    38: {day: "4-5", skills: ["Economic analysis", "Trade systems", "Resource mapping"], badge: "Economic Geography Analyst"},
                    48: {day: "6-8", skills: ["Historical analysis", "Temporal-spatial thinking", "Archaeological reasoning"], badge: "Historical Geography Master"}
                };
                
                const skillSet = skillSets[slideNumber];
                
                return {
                    energyTitle: ` Skills Earned - Day ${skillSet.day} Complete!`,
                    energyContent: `
                        <p> <strong>Achievement Unlocked:</strong> You've earned the "${skillSet.badge}" badge!</p>
                        <p> <em>Progress Update:</em> Your geographic detective abilities have officially leveled up!</p>
                        <div class="skill-badge"> ${skillSet.badge.toUpperCase()} </div>
                    `,
                    toolkit: `
                        <div class="skills-inventory">
                            <h6> New Skills Acquired:</h6>
                            ${skillSet.skills.map(skill => `<div class="skill-item"> ${skill}</div>`).join('')}
                            <div class="skill-item"> Integration abilities enhanced</div>
                            <div class="skill-item"> Ready for next challenge level</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Skill Development Progress:</strong></p>
                        <ul>
                            <li> <strong>Cognitive Growth:</strong> Your brain has formed new geographic thinking patterns</li>
                            <li> <strong>Connection Building:</strong> You can now link ${skillSet.skills[0]} to bigger geographic concepts</li>
                            <li> <strong>Application Ready:</strong> These skills transfer to real-world situations</li>
                            <li> <strong>Confidence Boost:</strong> You've proven you can master geographic challenges</li>
                            <li> <strong>Foundation Set:</strong> Ready for more advanced learning</li>
                        </ul>
                    `,
                    funTitle: "Skill Science",
                    funContent: `
                        <p> <strong>Neuroplasticity:</strong> Every skill you master literally rewires your brain! You now think more like a professional geographer!</p>
                        <p> <strong>Level Up Reality:</strong> These aren't just game badgesthese are real geographic analysis skills used by professionals worldwide!</p>
                    `,
                    sourceTitle: "Mastery Mindset",
                    sourceContent: `
                        <blockquote>
                            <p>"Skill development is not about being perfect, but about being persistent. Every expert was once a beginner."</p>
                            <cite> Growth mindset applied to geographic learning</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
     SKILLS EARNED - DAY ${skillSet.day} 
    
                               
      ${skillSet.badge}      
                               
     ${skillSet.skills.length} New Skills Mastered    
                               
      LEVEL UP ACHIEVED!    
    
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Skill Reflection:</strong> Which of today's new skills feels most powerful to you, and why?</p>
                        <p><strong>Real-World Application:</strong> Where in your daily life could you use these ${skillSet.badge} abilities?</p>
                    `
                };
            }

            getFinaleContent(slideNumber) {
                const finaleContent = {
                    50: {title: "The Final Confrontation Begins", phase: "preparation"},
                    51: {title: "Master Plan Revealed", phase: "discovery"},
                    52: {title: "Global Network Analysis", phase: "analysis"},
                    53: {title: "Elite Task Force Assembly", phase: "collaboration"},
                    54: {title: "Advanced Intelligence Challenge", phase: "application"},
                    55: {title: "Location Discovered", phase: "breakthrough"},
                    56: {title: "Epic Skills Integration", phase: "synthesis"},
                    57: {title: "The Final Confrontation", phase: "climax"},
                    58: {title: "Ultimate Victory", phase: "resolution"},
                    59: {title: "Academy Graduation", phase: "celebration"},
                    60: {title: "Geographic Legacy", phase: "transformation"}
                };
                
                const content = finaleContent[slideNumber];
                
                return {
                    energyTitle: ` ${content.title}!`,
                    energyContent: `
                        <p> <strong>Epic Finale Phase:</strong> You've reached the ${content.phase} stage of your geographic detective journey!</p>
                        <p> <em>All Skills Unite:</em> Everything you've learned comes together in this climactic moment!</p>
                        <div class="finale-intensity">INTENSITY:  (MAX LEVEL)</div>
                    `,
                    toolkit: `
                        <div class="finale-toolkit">
                            <div class="tool-item"> <strong>Master Detective Mode:</strong> All previous skills activated</div>
                            <div class="tool-item"> <strong>Global Perspective:</strong> Think at planetary scale</div>
                            <div class="tool-item"> <strong>Rapid Analysis:</strong> Process multiple data streams</div>
                            <div class="tool-item"> <strong>Team Coordination:</strong> Lead and collaborate effectively</div>
                            <div class="tool-item"> <strong>Strategic Thinking:</strong> Plan complex operations</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Master-Level Geographic Thinking:</strong></p>
                        <ul>
                            <li> <strong>Systems Integration:</strong> See how all geographic themes connect</li>
                            <li> <strong>Multi-scale Analysis:</strong> Think local and global simultaneously</li>
                            <li> <strong>Rapid Assessment:</strong> Quickly evaluate complex geographic situations</li>
                            <li> <strong>Strategic Application:</strong> Use geographic knowledge to solve real problems</li>
                            <li> <strong>Leadership Ready:</strong> Guide others in geographic thinking</li>
                        </ul>
                    `,
                    funTitle: "Master Detective Status",
                    funContent: `
                        <p> <strong>Elite Level:</strong> You've reached the same skill level as professional geographic analysts at top organizations worldwide!</p>
                        <p> <strong>Legacy Achievement:</strong> The skills you've mastered will serve you for lifein any career, any challenge, any adventure!</p>
                    `,
                    sourceTitle: "Master Detective Wisdom",
                    sourceContent: `
                        <blockquote>
                            <p>"The master detective sees patterns others miss, connects clues others ignore, and solves mysteries others consider impossible."</p>
                            <cite> Applied to geographic mastery and lifelong learning</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
     ${content.title.toUpperCase()} 
    
                               
        MASTER DETECTIVE    
                               
     All Skills:  MASTERED   
     Global Thinking:  READY 
     Future Challenges:  BRING IT ON 
                               
       GEOGRAPHIC LEGACY   
    
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Master Reflection:</strong> How has your understanding of yourself as a geographic thinker changed throughout this academy?</p>
                        <p><strong>Legacy Question:</strong> What geographic mystery would you like to investigate next with your new master detective skills?</p>
                    `
                };
            }

            getDefaultSlideStructure() {
                return {
                    energyTitle: "Geographic Adventure Continues!",
                    energyContent: `
                        <p> <strong>Investigation In Progress:</strong> Your geographic detective skills are being put to the test!</p>
                        <p> <em>Stay Sharp:</em> Every slide builds your geographic thinking abilities!</p>
                    `,
                    toolkit: `
                        <div class="general-toolkit">
                            <div class="tool-item"> <strong>Observation:</strong> Notice all geographic details</div>
                            <div class="tool-item"> <strong>Analysis:</strong> Connect information to geographic themes</div>
                            <div class="tool-item"> <strong>Organization:</strong> Sort evidence systematically</div>
                            <div class="tool-item"> <strong>Collaboration:</strong> Work effectively with your team</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Core Geographic Principles:</strong></p>
                        <ul>
                            <li> <strong>Location:</strong> Where is it?</li>
                            <li> <strong>Place:</strong> What makes it unique?</li>
                            <li> <strong>Movement:</strong> How do things move around?</li>
                            <li> <strong>Region:</strong> How do we group similar areas?</li>
                            <li> <strong>Human-Environment Interaction:</strong> How do people and places affect each other?</li>
                        </ul>
                    `,
                    funTitle: "Geographic Wonder",
                    funContent: `
                        <p> <strong>Amazing Fact:</strong> Geography is everywhere! Every decision you make has a geographic component!</p>
                        <p> <strong>Detective Insight:</strong> The best geographic detectives are curious about everything and question everything!</p>
                    `,
                    sourceTitle: "Geographic Philosophy",
                    sourceContent: `
                        <blockquote>
                            <p>"Geography is the stage upon which the drama of human life is played out."</p>
                            <cite> Geographic thinking for everyday life</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
     GEOGRAPHIC DETECTIVE 
    
                           
      Think Geographically 
      Observe Carefully   
      Connect Ideas       
      Solve Mysteries     
                           
    
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Continuous Learning:</strong> What geographic question are you most curious about right now?</p>
                        <p><strong>Detective Mindset:</strong> How can you apply geographic thinking to this slide's content?</p>
                    `
                };
            }

            generateThumbnails() {
                const thumbnailContainer = document.getElementById('slide-thumbnails');
                if (!thumbnailContainer) return;

                console.log(` Generating thumbnails for ${this.totalSlides} slides...`);

                let thumbnailHTML = '';
                for (let i = 1; i <= this.totalSlides; i++) {
                    const slideFilename = this.slideFilenames[i];
                    let imageSrc;
                    
                    // Use API endpoint for database slides, fallback to local path for development
                    if (this.slidesLoaded && slideFilename && slideFilename !== `${i.toString().padStart(2, '0')}_slide.png`) {
                        // Database slides - use API endpoint
                        imageSrc = `/api/slides/${i}`;
                    } else if (slideFilename) {
                        // Local development or fallback slides
                        imageSrc = `${this.slidesPath}${slideFilename}`;
                    } else {
                        // Ultimate fallback
                        imageSrc = `/api/slides/${i}`;
                    }

                    thumbnailHTML += `
                        <div class="thumbnail-item ${i === this.currentSlide ? 'active' : ''}" 
                             onclick="presentation.goToSlide(${i})" 
                             title="Slide ${i}">
                            <img src="${imageSrc}" 
                                 alt="Slide ${i} thumbnail"
                                 class="thumbnail-image"
                                 loading="lazy">
                            <div class="thumbnail-number">${i}</div>
                        </div>
                    `;
                }
                thumbnailContainer.innerHTML = thumbnailHTML;
                console.log(` Generated ${this.totalSlides} thumbnails`);
            }

            highlightCurrentThumbnail() {
                const thumbnails = document.querySelectorAll('.thumbnail-item');
                thumbnails.forEach((thumb, index) => {
                    if (index + 1 === this.currentSlide) {
                        thumb.classList.add('active');
                    } else {
                        thumb.classList.remove('active');
                    }
                });
            }

            toggleFullscreen() {
                const container = document.getElementById('presentation-container');
                if (!this.fullscreenMode) {
                    if (container.requestFullscreen) {
                        container.requestFullscreen();
                    }
                    container.classList.add('fullscreen-mode');
                    this.fullscreenMode = true;
                } else {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    }
                    container.classList.remove('fullscreen-mode');
                    this.fullscreenMode = false;
                }
            }

            toggleAutoPlay() {
                this.autoPlay = !this.autoPlay;
                if (this.autoPlay) {
                    this.startAutoPlay();
                } else {
                    this.stopAutoPlay();
                }
            }

            startAutoPlay() {
                this.autoPlayInterval = setInterval(() => {
                    if (this.currentSlide < this.totalSlides) {
                        this.nextSlide();
                    } else {
                        this.stopAutoPlay();
                    }
                }, 5000); // 5 seconds per slide
            }

            stopAutoPlay() {
                if (this.autoPlayInterval) {
                    clearInterval(this.autoPlayInterval);
                    this.autoPlayInterval = null;
                }
                this.autoPlay = false;
            }

            setupKeyboardNavigation() {
                document.addEventListener('keydown', (e) => {
                    if (e.target.closest('.presentation-container')) {
                        switch (e.key) {
                            case 'ArrowRight':
                            case ' ':
                                e.preventDefault();
                                this.nextSlide();
                                break;
                            case 'ArrowLeft':
                                e.preventDefault();
                                this.previousSlide();
                                break;
                            case 'Home':
                                e.preventDefault();
                                this.goToSlide(1);
                                break;
                            case 'End':
                                e.preventDefault();
                                this.goToSlide(this.totalSlides);
                                break;
                            case 'Escape':
                                if (this.fullscreenMode) {
                                    this.toggleFullscreen();
                                }
                                break;
                        }
                    }
                });
            }

            downloadSlide() {
                const slideImage = document.getElementById('current-slide-image');
                if (slideImage) {
                    const link = document.createElement('a');
                    link.href = slideImage.src;
                    link.download = `geographic-detective-academy-slide-${this.currentSlide}.png`;
                    link.click();
                }
            }

            loadSlideNotes() {
                // This would typically load from a JSON file or API
                // For now, we'll use the default note generation
                console.log(' Slide notes loaded');
            }

            // Additional presentation control methods
            toggleFullscreen() {
                const container = document.getElementById('presentation-container');
                if (!this.fullscreenMode) {
                    if (container.requestFullscreen) {
                        container.requestFullscreen();
                    } else if (container.webkitRequestFullscreen) {
                        container.webkitRequestFullscreen();
                    } else if (container.msRequestFullscreen) {
                        container.msRequestFullscreen();
                    }
                    this.fullscreenMode = true;
                    console.log(' Entered fullscreen mode');
                } else {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    } else if (document.webkitExitFullscreen) {
                        document.webkitExitFullscreen();
                    } else if (document.msExitFullscreen) {
                        document.msExitFullscreen();
                    }
                    this.fullscreenMode = false;
                    console.log(' Exited fullscreen mode');
                }
            }

            toggleAutoPlay() {
                if (!this.autoPlay) {
                    this.autoPlay = true;
                    this.playInterval = setInterval(() => {
                        if (this.currentSlide < this.totalSlides) {
                            this.nextSlide();
                        } else {
                            this.toggleAutoPlay(); // Stop when reaching the end
                        }
                    }, 5000); // 5 seconds per slide
                    console.log(' Auto-play started');
                } else {
                    this.autoPlay = false;
                    if (this.playInterval) {
                        clearInterval(this.playInterval);
                        this.playInterval = null;
                    }
                    console.log(' Auto-play stopped');
                }

                // Update button text
                const autoPlayBtn = document.querySelector('.btn-control [onclick="presentation.toggleAutoPlay()"]').parentElement;
                if (autoPlayBtn) {
                    const icon = autoPlayBtn.querySelector('.icon');
                    icon.textContent = this.autoPlay ? '' : '';
                    autoPlayBtn.innerHTML = `<span class="icon">${icon.textContent}</span> ${this.autoPlay ? 'Pause' : 'Auto Play'}`;
                }
            }

            downloadSlide() {
                const slideImage = document.getElementById('current-slide-image');
                if (slideImage && slideImage.src) {
                    const link = document.createElement('a');
                    link.href = slideImage.src;
                    link.download = `slide-${this.currentSlide}-${this.slideFilenames[this.currentSlide] || 'geographic-detective-academy'}.png`;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    console.log(` Downloaded slide ${this.currentSlide}`);
                } else {
                    console.warn(' No slide image available for download');
                }
            }

            // Keyboard navigation
            setupKeyboardNavigation() {
                document.addEventListener('keydown', (event) => {
                    // Only handle keys when presentation panel is active
                    const presentationPanel = document.getElementById('gamma-prompts');
                    if (!presentationPanel || presentationPanel.classList.contains('hidden')) {
                        return;
                    }

                    switch(event.key) {
                        case 'ArrowRight':
                        case ' ': // Spacebar
                            event.preventDefault();
                            this.nextSlide();
                            break;
                        case 'ArrowLeft':
                            event.preventDefault();
                            this.previousSlide();
                            break;
                        case 'Home':
                            event.preventDefault();
                            this.goToSlide(1);
                            break;
                        case 'End':
                            event.preventDefault();
                            this.goToSlide(this.totalSlides);
                            break;
                        case 'f':
                        case 'F':
                            if (event.ctrlKey || event.metaKey) {
                                event.preventDefault();
                                this.toggleFullscreen();
                            }
                            break;
                        case 'p':
                        case 'P':
                            if (event.ctrlKey || event.metaKey) {
                                event.preventDefault();
                                this.toggleAutoPlay();
                            }
                            break;
                    }
                });

                console.log(' Keyboard navigation enabled');
            }
        }

        // Initialize presentation system when page loads
        let presentation = null;
        
        window.addEventListener('DOMContentLoaded', () => {
            // Add presentation styles
            const style = document.createElement('style');
            style.textContent = `
                .presentation-container {
                    background: #1a1a1a;
                    color: white;
                    border-radius: 15px;
                    overflow: hidden;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                    margin: 1rem 0;
                }

                .presentation-header {
                    background: linear-gradient(135deg, #2c3e50, #3498db);
                    padding: 1rem 2rem;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                }

                .presentation-title h2 {
                    margin: 0;
                    color: #ecf0f1;
                }

                .slide-counter {
                    color: #bdc3c7;
                    font-size: 0.9rem;
                    margin-top: 0.25rem;
                }

                .presentation-controls {
                    display: flex;
                    gap: 1rem;
                }

                .btn-control {
                    background: rgba(255,255,255,0.2);
                    border: none;
                    color: white;
                    padding: 0.5rem 1rem;
                    border-radius: 20px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                }

                .btn-control:hover {
                    background: rgba(255,255,255,0.3);
                    transform: translateY(-2px);
                }

                .presentation-viewer {
                    display: grid;
                    grid-template-columns: 2fr 1fr;
                    gap: 1rem;
                    padding: 1rem;
                    min-height: 500px;
                }

                .slide-container {
                    position: relative;
                    background: #2c3e50;
                    border-radius: 10px;
                    overflow: hidden;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }

                .slide-image {
                    max-width: 100%;
                    max-height: 100%;
                    object-fit: contain;
                    border-radius: 8px;
                }

                .slide-placeholder {
                    width: 100%;
                    height: 100%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    background: linear-gradient(145deg, #4a6741, #5a7751);
                    border-radius: 8px;
                    color: white;
                    text-align: center;
                }

                .placeholder-content {
                    padding: 2rem;
                }

                .placeholder-icon {
                    font-size: 4rem;
                    margin-bottom: 1rem;
                }

                .placeholder-content h3 {
                    margin: 0 0 1rem 0;
                    font-size: 1.5rem;
                }

                .placeholder-content p {
                    margin: 0 0 1rem 0;
                    font-size: 1.2rem;
                    color: #bdc3c7;
                }

                .placeholder-note {
                    background: rgba(0,0,0,0.3);
                    padding: 1rem;
                    border-radius: 5px;
                    font-size: 0.9rem;
                    color: #ecf0f1;
                }

                .slide-overlay {
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    opacity: 0;
                    transition: opacity 0.3s ease;
                    pointer-events: none;
                }

                .slide-container:hover .slide-overlay {
                    opacity: 1;
                    pointer-events: auto;
                }

                .nav-btn {
                    background: rgba(0,0,0,0.7);
                    border: none;
                    color: white;
                    width: 50px;
                    height: 50px;
                    border-radius: 50%;
                    cursor: pointer;
                    font-size: 1.2rem;
                    transition: all 0.3s ease;
                    margin: 0 1rem;
                }

                .nav-btn:hover {
                    background: rgba(0,0,0,0.9);
                    transform: scale(1.1);
                }

                .slide-notes-panel {
                    background: #34495e;
                    border-radius: 10px;
                    padding: 1.5rem;
                    overflow-y: auto;
                }

                .slide-notes-panel h4 {
                    margin: 0 0 1rem 0;
                    color: #ecf0f1;
                }

                .slide-note-item {
                    margin-bottom: 1.5rem;
                    padding-bottom: 1rem;
                    border-bottom: 1px solid #4a6741;
                }

                .slide-note-item h5 {
                    color: #3498db;
                    margin-bottom: 0.5rem;
                }

                .slide-note-item ul {
                    margin: 0;
                    padding-left: 1.5rem;
                }

                .slide-note-item li {
                    margin-bottom: 0.25rem;
                    color: #bdc3c7;
                }

                .presentation-footer {
                    background: #2c3e50;
                    padding: 1rem;
                }

                .slide-thumbnails {
                    display: flex;
                    gap: 0.5rem;
                    overflow-x: auto;
                    padding: 0.5rem 0;
                    margin-bottom: 1rem;
                }

                .thumbnail-item {
                    flex-shrink: 0;
                    width: 80px;
                    height: 60px;
                    border-radius: 5px;
                    overflow: hidden;
                    cursor: pointer;
                    position: relative;
                    border: 2px solid transparent;
                    transition: all 0.3s ease;
                }

                .thumbnail-item:hover,
                .thumbnail-item.active {
                    border-color: #3498db;
                    transform: scale(1.05);
                }

                .thumbnail-image {
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                }

                .thumbnail-number {
                    position: absolute;
                    bottom: 2px;
                    right: 2px;
                    background: rgba(0,0,0,0.8);
                    color: white;
                    font-size: 0.7rem;
                    padding: 1px 4px;
                    border-radius: 3px;
                }

                .presentation-progress {
                    display: flex;
                    align-items: center;
                    gap: 1rem;
                }

                .progress-bar {
                    flex: 1;
                    height: 8px;
                    background: #4a6741;
                    border-radius: 4px;
                    overflow: hidden;
                }

                .progress-fill {
                    height: 100%;
                    background: linear-gradient(90deg, #3498db, #2ecc71);
                    transition: width 0.3s ease;
                }

                .slide-timer {
                    color: #bdc3c7;
                    font-family: monospace;
                    font-size: 0.9rem;
                }

                .fullscreen-mode {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100vw;
                    height: 100vh;
                    z-index: 9999;
                    border-radius: 0;
                }

                }

                .enhanced-slide-companion {
                    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
                    border-radius: 12px;
                    padding: 1.5rem;
                    margin: 1rem 0;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                    color: #2d3748;
                }

                .companion-section {
                    background: white;
                    border-radius: 8px;
                    padding: 1rem;
                    margin: 1rem 0;
                    border-left: 4px solid #007bff;
                    transition: transform 0.2s ease;
                    color: #2d3748;
                }

                .companion-section:hover {
                    transform: translateX(5px);
                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
                }

                .companion-section h5 {
                    margin: 0 0 0.75rem 0;
                    color: #2d3748;
                    font-weight: 600;
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                }

                .energy-boost {
                    border-left-color: #ff6b6b;
                    background: linear-gradient(135deg, #fff5f5 0%, #ffffff 100%);
                    color: #2d3748;
                }

                .energy-boost .energy-content {
                    color: #2d3748;
                }

                .detective-toolkit {
                    border-left-color: #4ecdc4;
                    background: linear-gradient(135deg, #f0fdfc 0%, #ffffff 100%);
                    color: #2d3748;
                }

                .detective-toolkit .toolkit-content {
                    color: #2d3748;
                }

                .geographic-wisdom {
                    border-left-color: #45b7d1;
                    background: linear-gradient(135deg, #f0f9ff 0%, #ffffff 100%);
                    color: #2d3748;
                }

                .geographic-wisdom .wisdom-content {
                    color: #2d3748;
                }

                .fun-facts {
                    border-left-color: #f7b731;
                    background: linear-gradient(135deg, #fffbf0 0%, #ffffff 100%);
                    color: #2d3748;
                }

                .fun-facts .fun-content {
                    color: #2d3748;
                }

                .primary-source {
                    border-left-color: #5f27cd;
                    background: linear-gradient(135deg, #f8f7ff 0%, #ffffff 100%);
                    color: #2d3748;
                }

                .primary-source .source-content {
                    color: #2d3748;
                }

                .visual-aid {
                    border-left-color: #00d2d3;
                    background: linear-gradient(135deg, #f0fffe 0%, #ffffff 100%);
                    color: #2d3748;
                }

                .visual-aid .visual-content {
                    color: #2d3748;
                }

                .student-challenge {
                    border-left-color: #ff9ff3;
                    background: linear-gradient(135deg, #fef7ff 0%, #ffffff 100%);
                    color: #2d3748;
                }

                .student-challenge .challenge-content {
                    color: #2d3748;
                }

                .toolkit-items,
                .crisis-response,
                .specialist-skills,
                .team-roles,
                .mastery-path,
                .case-prep-kit,
                .daily-toolkit,
                .csi-kit,
                .interview-kit,
                .challenge-toolkit,
                .victory-toolkit,
                .skills-inventory,
                .finale-toolkit,
                .general-toolkit {
                    display: flex;
                    flex-direction: column;
                    gap: 0.5rem;
                }

                .tool-item,
                .skill-item {
                    background: #f8f9fa;
                    padding: 0.75rem;
                    border-radius: 6px;
                    border-left: 3px solid #28a745;
                    font-size: 0.9rem;
                    display: flex;
                    align-items: flex-start;
                    gap: 0.5rem;
                    color: #2d3748;
                }

                .tool-item strong,
                .skill-item strong {
                    color: #1a202c;
                }

                /* Enhanced Role Cards Styling */
                .role-card {
                    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
                    border: 2px solid #007bff;
                    border-radius: 12px;
                    padding: 1.5rem;
                    margin: 1rem 0;
                    box-shadow: 0 4px 8px rgba(0,123,255,0.2);
                    transition: transform 0.3s ease, box-shadow 0.3s ease;
                    color: #2d3748;
                }

                .role-card:hover {
                    transform: translateY(-3px);
                    box-shadow: 0 8px 16px rgba(0,123,255,0.3);
                }

                .role-image-placeholder {
                    background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
                    border: 2px dashed #2196f3;
                    border-radius: 8px;
                    padding: 1rem;
                    margin-bottom: 1rem;
                    text-align: center;
                    color: #1565c0;
                    font-size: 0.85rem;
                    line-height: 1.4;
                    min-height: 100px;
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                }

                .role-content h4 {
                    color: #1e3c72;
                    font-size: 1.2rem;
                    margin-bottom: 0.75rem;
                    border-bottom: 2px solid #ffd700;
                    padding-bottom: 0.5rem;
                }

                .role-content p {
                    margin-bottom: 0.75rem;
                    line-height: 1.5;
                    color: #2d3748;
                }

                .role-content p strong {
                    color: #1a202c;
                    font-weight: 600;
                }

                .team-roles {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                    gap: 1.5rem;
                    margin-top: 1rem;
                }

                @media (max-width: 768px) {
                    .team-roles {
                        grid-template-columns: 1fr;
                    }
                    
                    .role-card {
                        padding: 1rem;
                    }
                }

                /* End Enhanced Role Cards Styling */

                .urgency-meter,
                .difficulty-badge,
                .scene-status,
                .challenge-level,
                .victory-banner,
                .skill-badge,
                .finale-intensity {
                    background: #dc3545;
                    color: white;
                    padding: 0.5rem 1rem;
                    border-radius: 20px;
                    text-align: center;
                    font-weight: bold;
                    margin: 0.5rem 0;
                    font-size: 0.8rem;
                    text-transform: uppercase;
                }

                .difficulty-badge {
                    background: #ffc107;
                    color: #212529;
                }

                .scene-status {
                    background: #fd7e14;
                }

                .challenge-level {
                    background: #6f42c1;
                }

                .victory-banner,
                .skill-badge {
                    background: #28a745;
                }

                .finale-intensity {
                    background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
                }

                .witness-reliability {
                    background: #17a2b8;
                    color: white;
                    padding: 0.5rem 1rem;
                    border-radius: 15px;
                    text-align: center;
                    font-weight: bold;
                    margin: 0.5rem 0;
                    font-size: 0.8rem;
                }

                .ascii-art {
                    background: #2d3748;
                    color: #e2e8f0;
                    padding: 1rem;
                    border-radius: 8px;
                    font-family: 'Courier New', monospace;
                    overflow-x: auto;
                    margin: 0.5rem 0;
                }

                .ascii-art pre {
                    margin: 0;
                    white-space: pre;
                    font-size: 0.8rem;
                    line-height: 1.2;
                }

                .coordinate-highlight {
                    background: #ffd700;
                    color: #333;
                    padding: 0.2rem 0.4rem;
                    border-radius: 3px;
                    font-weight: bold;
                }

                blockquote {
                    border-left: 4px solid #6c757d;
                    margin: 1rem 0;
                    padding: 1rem;
                    background: #f8f9fa;
                    border-radius: 0 8px 8px 0;
                    font-style: italic;
                    color: #2d3748;
                }

                cite {
                    display: block;
                    margin-top: 0.5rem;
                    font-size: 0.9rem;
                    color: #4a5568;
                    font-style: normal;
                }

                .energy-content,
                .wisdom-content,
                .fun-content,
                .source-content,
                .visual-content,
                .challenge-content {
                    line-height: 1.6;
                    color: #2d3748;
                }

                .energy-content p,
                .wisdom-content p,
                .fun-content p,
                .challenge-content p {
                    margin: 0.5rem 0;
                    color: #2d3748;
                }

                .energy-content strong,
                .wisdom-content strong,
                .fun-content strong,
                .challenge-content strong {
                    color: #1a202c;
                }

                .energy-content em,
                .wisdom-content em,
                .fun-content em,
                .challenge-content em {
                    color: #4a5568;
                    font-style: italic;
                }

                .energy-content ul,
                .wisdom-content ul,
                .fun-content ul,
                .challenge-content ul {
                    color: #2d3748;
                }

                .energy-content li,
                .wisdom-content li,
                .fun-content li,
                .challenge-content li {
                    color: #2d3748;
                }

                @media (max-width: 768px) {
                    .enhanced-slide-companion {
                        padding: 1rem;
                        margin: 0.5rem 0;
                    }
                    
                    .companion-section {
                        padding: 0.75rem;
                        margin: 0.75rem 0;
                    }
                    
                    .ascii-art {
                        padding: 0.5rem;
                    }
                    
                    .ascii-art pre {
                        font-size: 0.7rem;
                    }
                }

                .fullscreen-mode .presentation-viewer {
                    grid-template-columns: 3fr 1fr;
                    height: calc(100vh - 200px);
                }

                @media (max-width: 768px) {
                    .presentation-viewer {
                        grid-template-columns: 1fr;
                    }
                    
                    .slide-notes-panel {
                        max-height: 200px;
                    }
                    
                    .presentation-header {
                        flex-direction: column;
                        gap: 1rem;
                    }
                    
                    .presentation-controls {
                        flex-wrap: wrap;
                        justify-content: center;
                    }
                }
            `;
            document.head.appendChild(style);
            
            // Initialize presentation system
            presentation = new SimulationPresentation();
            
            // Wait for gamma-prompts panel to be available
            function initializePresentationWhenReady() {
                const gammaPanel = document.getElementById('gamma-prompts');
                if (gammaPanel) {
                    presentation.addToPresentationPanel();
                    presentation.generateThumbnails();
                    console.log(' Presentation system initialized with', presentation.totalSlides, 'slides');
                } else {
                    // Try again in 500ms if panel not ready
                    setTimeout(initializePresentationWhenReady, 500);
                }
            }
            
            // Start initialization with a small delay
            setTimeout(initializePresentationWhenReady, 100);
        });
    </script>
</body>
</html>
