<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geographic Detective Academy - World Geography Simulation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
        }

        .header {
            background: rgba(0, 0, 0, 0.8);
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo h1 {
            color: #ffd700;
            font-size: 1.8rem;
            font-weight: bold;
        }

        .logo .subtitle {
            color: #cccccc;
            font-size: 0.9rem;
            font-weight: normal;
        }

        .status-badges {
            display: flex;
            gap: 1rem;
        }

        .badge {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.8rem;
            text-transform: uppercase;
        }

        .classified {
            background: #dc3545;
            color: white;
        }

        .active-case {
            background: #28a745;
            color: white;
        }

        .navigation {
            background: rgba(0, 0, 0, 0.6);
            padding: 0;
            display: flex;
            overflow-x: auto;
            border-bottom: 2px solid #ffd700;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            border-bottom: 3px solid transparent;
            min-width: fit-content;
        }

        .nav-item:hover {
            background: rgba(255, 215, 0, 0.2);
            border-bottom-color: #ffd700;
        }

        .nav-item.active {
            background: rgba(255, 215, 0, 0.3);
            border-bottom-color: #ffd700;
        }

        .nav-item .icon {
            font-size: 1.2rem;
        }

        .nav-item .label {
            font-weight: 500;
        }

        .main-content {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .content-panel {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            margin-bottom: 2rem;
        }

        .simulation-title {
            text-align: center;
            margin-bottom: 2rem;
        }

        .simulation-title h2 {
            color: #1e3c72;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .simulation-title .mystery-title {
            color: #2a5298;
            font-size: 1.5rem;
            font-style: italic;
        }

        .overview-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        .overview-section {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #ffd700;
        }

        .overview-section h3 {
            color: #1e3c72;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .schedule-item {
            background: white;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 5px;
            border-left: 3px solid #28a745;
        }

        .day-label {
            font-weight: bold;
            color: #1e3c72;
        }

        .hidden {
            display: none;
        }

        .case-file {
            background: linear-gradient(145deg, #ffe4e1, #ffd700);
            border: 2px solid #dc3545;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1rem 0;
            color: #333;
        }

        .case-header {
            background: #dc3545;
            color: white;
            padding: 0.5rem 1rem;
            margin: -1.5rem -1.5rem 1rem -1.5rem;
            border-radius: 8px 8px 0 0;
            font-weight: bold;
            text-transform: uppercase;
        }

        .evidence-list {
            list-style: none;
            padding: 0;
        }

        .evidence-list li {
            background: rgba(255, 255, 255, 0.8);
            margin: 0.5rem 0;
            padding: 0.8rem;
            border-radius: 5px;
            border-left: 3px solid #28a745;
        }

        .coordinate-highlight {
            background: #ffd700;
            color: #333;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .overview-content {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                gap: 1rem;
            }
            
            .navigation {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">
            <span style="font-size: 2rem;">ğŸ”</span>
            <div>
                <h1>Geographic Detective Academy</h1>
                <div class="subtitle">Q1 Simulation - The Mystery of the Missing Maps</div>
            </div>
        </div>
        <div class="status-badges">
            <div class="badge classified">CLASSIFIED</div>
            <div class="badge active-case">ACTIVE CASE</div>
        </div>
    </header>

    <nav class="navigation">
        <div class="nav-item" data-panel="teacher-guide">
            <span class="icon">ï¿½</span>
            <span class="label">Teacher Guide</span>
        </div>
        <div class="nav-item active" data-panel="overview">
            <span class="icon">ï¿½</span>
            <span class="label">Overview</span>
        </div>
        <div class="nav-item" data-panel="daily-structure">
            <span class="icon">ï¿½</span>
            <span class="label">Daily Structure</span>
        </div>
        <div class="nav-item" data-panel="team-roles">
            <span class="icon">ğŸ‘¥</span>
            <span class="label">Team Roles</span>
        </div>
        <div class="nav-item" data-panel="investigation-events">
            <span class="icon">âš ï¸</span>
            <span class="label">Investigation Events</span>
        </div>
        <div class="nav-item" data-panel="assessments">
            <span class="icon">ï¿½</span>
            <span class="label">Assessments</span>
        </div>
        <div class="nav-item" data-panel="student-materials">
            <span class="icon">ğŸ“‹</span>
            <span class="label">Student Materials</span>
        </div>
        <div class="nav-item" data-panel="gamma-prompts">
            <span class="icon">ğŸ“½ï¸</span>
            <span class="label">Presentation</span>
        </div>
        <div class="nav-item" data-panel="complete-package">
            <span class="icon">ğŸ“¦</span>
            <span class="label">Complete Package</span>
        </div>
    </nav>

    <main class="main-content">
        <!-- OVERVIEW PANEL -->
        <div id="overview" class="content-panel">
            <div class="simulation-title">
                <h2>Q1: Geographic Detectives Simulation</h2>
                <div class="mystery-title">"The Mystery of the Missing Maps Academy"</div>
            </div>

            <div class="overview-content">
                <div class="overview-section">
                    <h3>ğŸ¯ SIMULATION OVERVIEW</h3>
                    <p>Students become rookie detectives at the International Geographic Bureau investigating the disappearance of the world's most important maps and geographic artifacts. Over 12 days, they'll solve increasingly complex cases using geographic skills, knowledge of early civilizations, and collaborative problem-solving.</p>
                    
                    <div class="case-file">
                        <div class="case-header">ğŸš¨ URGENT: Global Geographic Crisis</div>
                        <p><strong>The world's most valuable geographic artifacts have vanished!</strong></p>
                        <ul>
                            <li>Ancient maps from early civilizations - STOLEN</li>
                            <li>Modern GPS technology - COMPROMISED</li>
                            <li>International boundaries at risk</li>
                            <li>Global navigation systems failing worldwide</li>
                        </ul>
                        <p><strong>Time is running out. The world needs heroes.</strong></p>
                    </div>
                </div>

                <div class="overview-section">
                    <h3>ğŸ“… SCHEDULE</h3>
                    <div class="schedule-item">
                        <div class="day-label">Setup Day (Day 0):</div>
                        Character creation, team formation, introduction to the Bureau
                    </div>
                    <div class="schedule-item">
                        <div class="day-label">Investigation Days (Days 1-10):</div>
                        Progressive cases building geographic skills
                    </div>
                    <div class="schedule-item">
                        <div class="day-label">Wrap-up Day (Day 11):</div>
                        Final case presentation and summative assessment
                    </div>
                </div>
            </div>

            <div class="overview-content">
                <div class="overview-section">
                    <h3>ğŸ“– THE STORY</h3>
                    <p>The year is 2025, and the International Geographic Bureau's most precious collection has been stolen: ancient maps from early civilizations, modern geographic tools, and classified location data.</p>
                    
                    <p><strong>You are the world's last hope.</strong> As rookie detectives, students must:</p>
                    <ul>
                        <li>Master geographic detective skills</li>
                        <li>Learn to read landscapes like fingerprints</li>
                        <li>Solve increasingly complex cases</li>
                        <li>Track down international criminals</li>
                        <li>Follow geographic clues across continents</li>
                        <li>Graduate as certified Geographic Crime Specialists</li>
                    </ul>
                </div>

                <div class="overview-section">
                    <h3>ğŸ† BADGE PROGRESSION</h3>
                    <div class="schedule-item">
                        <div class="day-label">ğŸ¥‰ Rookie:</div>
                        Basic geographic skills and observation
                    </div>
                    <div class="schedule-item">
                        <div class="day-label">ğŸ¥ˆ Detective:</div>
                        Advanced case-solving and analysis
                    </div>
                    <div class="schedule-item">
                        <div class="day-label">ğŸ¥‡ Specialist:</div>
                        Expert geographic crime investigation
                    </div>
                    <p><em>Each case builds your geographic expertise and credentials.</em></p>
                </div>
            </div>
        </div>

        <!-- DAILY STRUCTURE PANEL -->
        <div id="daily-structure" class="content-panel hidden">
            <h2>ğŸ“… Daily Structure</h2>
            <p>Detailed daily progression and activities will be loaded here...</p>
        </div>

        <!-- TEAM ROLES PANEL -->
        <div id="team-roles" class="content-panel hidden">
            <h2>ğŸ‘¥ Team Roles</h2>
            <p>Detective unit roles and responsibilities will be loaded here...</p>
        </div>

        <!-- INVESTIGATION EVENTS PANEL -->
        <div id="investigation-events" class="content-panel hidden">
            <h2>âš ï¸ Investigation Events</h2>
            
            <div class="case-file">
                <div class="case-header">Case File #001: The Great Globe Heist</div>
                <p><strong>ROOKIE LEVEL - GEOGRAPHIC FUNDAMENTALS TRAINING</strong></p>
                
                <div class="overview-content">
                    <div>
                        <h4>ğŸ“ Crime Scene Details</h4>
                        <ul>
                            <li><strong>Location:</strong> Roosevelt Middle School, Room 204</li>
                            <li><strong>Time:</strong> Tuesday, 3:15 PM</li>
                            <li><strong>Missing Item:</strong> 12-inch classroom globe</li>
                            <li><strong>Threat Level:</strong> Low</li>
                            <li><strong>Required Skills:</strong> Basic geography, observation, coordinate reading</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4>ğŸ” Evidence Found</h4>
                        <ul class="evidence-list">
                            <li>Empty globe stand with dust outline</li>
                            <li>Fingerprints on metal base</li>
                            <li>Torn paper with coordinates: <span class="coordinate-highlight">40Â°N, 74Â°W</span></li>
                            <li>Compass left behind pointing northeast</li>
                            <li>World map on wall with pin missing</li>
                        </ul>
                    </div>
                </div>
                
                <p><strong>Investigation Question:</strong> The coordinates <span class="coordinate-highlight">40Â°N, 74Â°W</span> were found on torn paper - what could this mean?</p>
            </div>
        </div>

        <!-- ASSESSMENTS PANEL -->
        <div id="assessments" class="content-panel hidden">
            <h2>ğŸ“Š Assessments</h2>
            <p>Assessment rubrics and evaluation methods will be loaded here...</p>
        </div>

        <!-- TEACHER GUIDE PANEL -->
        <div id="teacher-guide" class="content-panel hidden">
            <h2>ğŸ“– Teacher Guide</h2>
            <p>Instructor resources and guidance will be loaded here...</p>
        </div>

        <!-- STUDENT MATERIALS PANEL -->
        <div id="student-materials" class="content-panel hidden">
            <h2>ğŸ“‹ Student Materials</h2>
            <p>Handouts, worksheets, and student resources will be loaded here...</p>
        </div>

        <!-- PRESENTATION PANEL -->
        <div id="gamma-prompts" class="content-panel hidden">
            <h2>ğŸ“½ï¸ Interactive Presentation</h2>
            <p>Interactive elements and prompts will be loaded here...</p>
        </div>

        <!-- COMPLETE PACKAGE PANEL -->
        <div id="complete-package" class="content-panel hidden">
            <h2>ğŸ“¦ Complete Package</h2>
            <p>Full simulation bundle and resources will be loaded here...</p>
        </div>
    </main>

    <script>
        // Navigation functionality
        document.addEventListener('DOMContentLoaded', function() {
            const navItems = document.querySelectorAll('.nav-item');
            const panels = document.querySelectorAll('.content-panel');

            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const targetPanel = this.getAttribute('data-panel');
                    
                    // Remove active class from all nav items
                    navItems.forEach(nav => nav.classList.remove('active'));
                    
                    // Add active class to clicked item
                    this.classList.add('active');
                    
                    // Hide all panels
                    panels.forEach(panel => panel.classList.add('hidden'));
                    
                    // Show target panel
                    const targetElement = document.getElementById(targetPanel);
                    if (targetElement) {
                        targetElement.classList.remove('hidden');
                    }
                });
            });
        });
    </script>
    
    <!-- Load dynamic content system -->
    <script src="/simulation-dynamic.js"></script>
    
    <!-- Load presentation system -->
    <script>
        // Include presentation system inline for immediate availability
        /**
         * Geographic Detective Academy Presentation System
         * Integrates the 60-slide presentation directly into the simulation interface
         */

        class SimulationPresentation {
            constructor() {
                this.currentSlide = 1;
                this.totalSlides = 60;
                this.slidesPath = '/slides/';
                this.fullscreenMode = false;
                this.autoPlay = false;
                this.slideNotes = {};
                
                // Map slide numbers to actual filenames
                this.slideFilenames = {
                    1: "1_Geographic-Detective-Academy.png",
                    2: "2_URGENT-Global-Geographic-Crisis.png",
                    3: "3_Your-Mission-Become-Geographic-Crime-Specialists.png",
                    4: "4_Evidence-Manager.png",
                    5: "5_Your-Path-to-Mastery.png",
                    6: "6_CASE-FILE-001.png",
                    7: "7_Day-1-The-Great-Globe-Heist.png",
                    8: "8_Crime-Scene-Investigation.png",
                    9: "9_Witness-Interview-Janitor-Bob.png",
                    10: "10_Your-First-Geographic-Challenge.png",
                    11: "11_CASE-SOLVED.png",
                    12: "12_Skills-Earned-Day-1.png",
                    13: "13_CASE-FILE-002.png",
                    14: "14_Day-2-Mountains-of-Mystery.png",
                    15: "15_Crime-Scene-Survey-Office-Break-In.png",
                    16: "16_Witness-Interview-Dr-Sarah-Chen-Chief-Cartographer.png",
                    17: "17_Physical-Geography-Challenge.png",
                    18: "18_Elevation-Detective-Work.png",
                    19: "19_CASE-SOLVED.png",
                    20: "20_Skills-Earned-Day-2.png",
                    21: "21_CASE-FILE-003.png",
                    22: "22_Day-3-International-Heritage-Heist.png",
                    23: "23_Stolen-Cultural-Treasures.png",
                    24: "24_Witness-Interview-Museum-Director-Maria-Santos.png",
                    25: "25_Geographic-Culture-Connection.png",
                    26: "26_Cultural-Geography-Challenge.png",
                    27: "27_CASE-SOLVED.png",
                    28: "28_Skills-Earned-Day-3.png",
                    29: "29_CASE-FILE-004-005.png",
                    30: "30_Days-4-5-Economic-Espionage.png",
                    31: "31_Multi-Day-Investigation-Economic-Intelligence-Theft.png",
                    32: "32_Economic-Geography-Understanding-Trade.png",
                    33: "33_Witness-Interview-Trade-Specialist-Dr-James-Morrison.png",
                    34: "34_Resource-Geography-Challenge.png",
                    35: "35_Government-Systems-Under-Attack.png",
                    36: "36_Economic-Crime-Pattern-Analysis.png",
                    37: "37_CASE-SOLVED.png",
                    38: "38_Skills-Earned-Days-4-5.png",
                    39: "39_CASE-FILE-006-008.png",
                    40: "40_Days-6-8-Archaeological-Adventure.png",
                    41: "41_Multi-Site-Archaeological-Crime-Scene.png",
                    42: "42_River-Valley-Civilizations-Pattern.png",
                    43: "43_Witness-Interview-Dr-Elena-Rodriguez-Lead-Archaeologist.png",
                    44: "44_Ancient-Geographic-Technology.png",
                    45: "45_Historical-Geography-Challenge.png",
                    46: "46_Ancient-Civilization-Geographic-Comparison.png",
                    47: "47_CASE-SOLVED.png",
                    48: "48_Skills-Earned-Days-6-8.png",
                    49: "49_CASE-FILE-009-011.png",
                    50: "50_Days-9-11-The-Final-Confrontation.png",
                    51: "51_The-Cartographers-Master-Plan-Revealed.png",
                    52: "52_Global-Criminal-Network-Analysis.png",
                    53: "53_Elite-Task-Force-Assembly.png",
                    54: "54_Advanced-Geographic-Intelligence-Challenge.png",
                    55: "55_The-Cartographers-Location-Discovered.png",
                    56: "56_Epic-Geographic-Skills-Integration.png",
                    57: "57_The-Final-Confrontation.png",
                    58: "58_ULTIMATE-VICTORY.png",
                    59: "59_Your-Geographic-Detective-Academy-Graduation.png",
                    60: "60_Your-Geographic-Legacy.png"
                };
                
                this.initializePresentation();
            }

            initializePresentation() {
                this.createPresentationInterface();
                this.setupKeyboardNavigation();
                this.loadSlideNotes();
                // Initialize the first slide
                this.updateSlide();
            }

            createPresentationInterface() {
                const presentationHTML = `
                    <div id="presentation-container" class="presentation-container">
                        <div class="presentation-header">
                            <div class="presentation-title">
                                <h2>ğŸ•µï¸ Geographic Detective Academy Presentation</h2>
                                <div class="slide-counter">Slide <span id="current-slide">1</span> of ${this.totalSlides}</div>
                            </div>
                            <div class="presentation-controls">
                                <button class="btn-control" onclick="presentation.toggleFullscreen()">
                                    <span class="icon">â›¶</span> Fullscreen
                                </button>
                                <button class="btn-control" onclick="presentation.toggleAutoPlay()">
                                    <span class="icon">â–¶ï¸</span> Auto Play
                                </button>
                                <button class="btn-control" onclick="presentation.downloadSlide()">
                                    <span class="icon">ğŸ“¥</span> Download
                                </button>
                            </div>
                        </div>

                        <div class="presentation-viewer">
                        <div class="slide-container">
                            <!-- Actual slide image for GridFS slides -->
                            <img id="current-slide-image" 
                                 src="/slides/1_Geographic-Detective-Academy.png" 
                                 alt="Geographic Detective Academy - Slide 1"
                                 class="slide-image">
                            
                            <!-- Fallback placeholder if slides don't load -->
                            <div id="current-slide-placeholder" class="slide-placeholder" style="display: none;">
                                <div class="placeholder-content">
                                    <div class="placeholder-icon">ğŸ•µï¸</div>
                                    <h3>Geographic Detective Academy</h3>
                                    <p>Slide <span id="current-slide-number">1</span> of ${this.totalSlides}</p>
                                    <div class="placeholder-note">
                                        <strong>Note:</strong> Slide images are served locally only.<br>
                                        Full presentation available in development environment.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="slide-overlay">
                                <button class="nav-btn prev-btn" onclick="presentation.previousSlide()">
                                    <span class="icon">â—€ï¸</span>
                                </button>
                                <button class="nav-btn next-btn" onclick="presentation.nextSlide()">
                                    <span class="icon">â–¶ï¸</span>
                                </button>
                            </div>

                            <div class="slide-annotations" id="slide-annotations">
                                <!-- Dynamic annotations will be loaded here -->
                            </div>
                        </div>                            <div class="slide-notes-panel" id="slide-notes-panel">
                                <h4>ğŸ“ Slide Notes & Key Points</h4>
                                <div id="slide-notes-content">
                                    Loading slide notes...
                                </div>
                            </div>
                        </div>

                        <div class="presentation-footer">
                            <div class="slide-thumbnails" id="slide-thumbnails">
                                <!-- Thumbnail navigation will be generated here -->
                            </div>
                            
                            <div class="presentation-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${(1/this.totalSlides) * 100}%"></div>
                                </div>
                                <div class="slide-timer" id="slide-timer">00:00</div>
                            </div>
                        </div>
                    </div>
                `;

                return presentationHTML;
            }

            // Add presentation panel to existing simulation
            addToPresentationPanel() {
                const presentationPanel = document.getElementById('gamma-prompts');
                if (presentationPanel) {
                    presentationPanel.innerHTML = `
                        <h2>ğŸ“½ï¸ Interactive Presentation</h2>
                        <p class="subtitle">Navigate through the complete Geographic Detective Academy presentation</p>
                        ${this.createPresentationInterface()}
                    `;
                    
                    // Force immediate slide initialization after DOM is ready
                    setTimeout(() => {
                        this.initializeSlideDisplay();
                    }, 100);
                }
            }

            initializeSlideDisplay() {
                const slideImage = document.getElementById('current-slide-image');
                const placeholder = document.getElementById('current-slide-placeholder');
                
                if (slideImage && placeholder) {
                    console.log('ğŸ¬ Initializing presentation with 60 slides from MongoDB GridFS');
                    
                    // Set up error handling first
                    slideImage.onerror = () => {
                        console.warn(`âš ï¸ Slide ${this.currentSlide} failed to load, showing placeholder`);
                        slideImage.style.display = 'none';
                        placeholder.style.display = 'flex';
                    };
                    
                    // Set up success handling
                    slideImage.onload = () => {
                        console.log(`âœ… Slide ${this.currentSlide} loaded successfully`);
                        slideImage.style.display = 'block';
                        placeholder.style.display = 'none';
                    };
                    
                    // Start with first slide
                    this.updateSlide();
                } else {
                    console.error('âŒ Presentation elements not found');
                }
            }

            nextSlide() {
                if (this.currentSlide < this.totalSlides) {
                    this.currentSlide++;
                    this.updateSlide();
                }
            }

            previousSlide() {
                if (this.currentSlide > 1) {
                    this.currentSlide--;
                    this.updateSlide();
                }
            }

            goToSlide(slideNumber) {
                if (slideNumber >= 1 && slideNumber <= this.totalSlides) {
                    this.currentSlide = slideNumber;
                    this.updateSlide();
                }
            }

            updateSlide() {
                const slideNumber = document.getElementById('current-slide-number');
                const slideCounter = document.getElementById('current-slide');
                const progressFill = document.querySelector('.progress-fill');
                const slideImage = document.getElementById('current-slide-image');

                if (slideNumber) {
                    slideNumber.textContent = this.currentSlide;
                }

                if (slideCounter) {
                    slideCounter.textContent = this.currentSlide;
                }

                if (progressFill) {
                    progressFill.style.width = `${(this.currentSlide / this.totalSlides) * 100}%`;
                }

                // Update the slide image source
                if (slideImage) {
                    const slideFilename = this.slideFilenames[this.currentSlide];
                    if (slideFilename) {
                        console.log(`ğŸ”„ Loading slide ${this.currentSlide}: ${slideFilename}`);
                        slideImage.src = `/slides/${slideFilename}`;
                        slideImage.alt = `Geographic Detective Academy - Slide ${this.currentSlide}`;
                    } else {
                        console.error(`âŒ No filename mapping for slide ${this.currentSlide}`);
                    }
                }

                this.updateSlideNotes();
            }

            updateSlideNotes() {
                const notesContent = document.getElementById('slide-notes-content');
                if (notesContent) {
                    const notes = this.getEnhancedSlideNotes(this.currentSlide);
                    notesContent.innerHTML = notes;
                }
            }

            getEnhancedSlideNotes(slideNumber) {
                const slideData = this.getSlideSpecificContent(slideNumber);
                
                return `
                    <div class="enhanced-slide-companion">
                        <div class="companion-section energy-boost">
                            <h5>âš¡ ${slideData.energyTitle}</h5>
                            <div class="energy-content">${slideData.energyContent}</div>
                        </div>
                        
                        <div class="companion-section detective-toolkit">
                            <h5>ğŸ” Detective's Toolkit</h5>
                            <div class="toolkit-content">${slideData.toolkit}</div>
                        </div>
                        
                        <div class="companion-section geographic-wisdom">
                            <h5>ğŸŒ Geographic Wisdom</h5>
                            <div class="wisdom-content">${slideData.wisdom}</div>
                        </div>
                        
                        <div class="companion-section fun-facts">
                            <h5>ğŸ¯ ${slideData.funTitle}</h5>
                            <div class="fun-content">${slideData.funContent}</div>
                        </div>
                        
                        <div class="companion-section primary-source">
                            <h5>ğŸ“œ ${slideData.sourceTitle}</h5>
                            <div class="source-content">${slideData.sourceContent}</div>
                        </div>
                        
                        <div class="companion-section visual-aid">
                            <h5>ğŸ¨ Visual Learning</h5>
                            <div class="visual-content">${slideData.visualAid}</div>
                        </div>
                        
                        <div class="companion-section student-challenge">
                            <h5>ğŸš€ Think Like a Detective</h5>
                            <div class="challenge-content">${slideData.challenge}</div>
                        </div>
                    </div>
                `;
            }

            getSlideSpecificContent(slideNumber) {
                const slideContent = {
                    1: {
                        energyTitle: "Welcome to Your Adventure!",
                        energyContent: `
                            <p>ğŸ‰ <strong>Plot twist:</strong> You're not just learning geographyâ€”you're about to become a geographic superhero!</p>
                            <p>ğŸ’¡ <em>Teacher tip:</em> This opening sets the tone for the entire experience. Play it up! Consider dimming lights and playing mysterious music.</p>
                        `,
                        toolkit: `
                            <div class="toolkit-items">
                                <div class="tool-item">ğŸ” <strong>Observation Skills:</strong> Train your eyes to notice geographic clues everywhere</div>
                                <div class="tool-item">ğŸ—ºï¸ <strong>Mental Mapping:</strong> Start building your internal geographic database</div>
                                <div class="tool-item">ğŸ§  <strong>Pattern Recognition:</strong> Geography is all about spotting connections</div>
                            </div>
                        `,
                        wisdom: `
                            <p><strong>The Five Themes of Geography</strong> aren't just academic conceptsâ€”they're your detective's toolkit:</p>
                            <ul>
                                <li><strong>Location:</strong> Where is it?</li>
                                <li><strong>Place:</strong> What makes it unique?</li>
                                <li><strong>Movement:</strong> How do things get around?</li>
                                <li><strong>Region:</strong> How do we group similar areas?</li>
                                <li><strong>Human-Environment Interaction:</strong> How do people and places affect each other?</li>
                            </ul>
                        `,
                        funTitle: "Mind-Blowing Geography Facts",
                        funContent: `
                            <p>ğŸ¤¯ <strong>Did you know:</strong> There are more possible ways to arrange a deck of cards than there are atoms on Earth? Similarly, there are infinite ways to explore our planet's geographic mysteries!</p>
                            <p>ğŸ”ï¸ <strong>Geography Joke:</strong> Why don't mountains ever get cold? Because they wear snow caps! ğŸ˜„</p>
                        `,
                        sourceTitle: "Real Detective Voices",
                        sourceContent: `
                            <blockquote>
                                <p>"A good detective observes everything and assumes nothing. The same is true for geographyâ€”every landscape tells a story if you know how to read it."</p>
                                <cite>â€” Adapted from Arthur Conan Doyle's Sherlock Holmes principles</cite>
                            </blockquote>
                        `,
                        visualAid: `
                            <div class="ascii-art">
                                <pre>
    ğŸŒ WORLD = GIANT PUZZLE ğŸ§©
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Every location  â”‚
         â”‚ Every culture   â”‚ â† You're about
         â”‚ Every climate   â”‚   to solve it!
         â”‚ = One piece!    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </pre>
                            </div>
                        `,
                        challenge: `
                            <p><strong>Quick Mental Warm-up:</strong> Look around your classroom right now. What geographic clues can you spot? (Hint: maps, globes, maybe some travel souvenirs?)</p>
                            <p><strong>Detective Question:</strong> If you were investigating this classroom as a geographic location, what would you want to know about it?</p>
                        `
                    },
                    
                    2: {
                        energyTitle: "Crisis Mode Activated!",
                        energyContent: `
                            <p>ğŸš¨ <strong>Urgency Alert:</strong> This isn't just a drillâ€”geographic knowledge is literally needed to save the world!</p>
                            <p>ğŸ’ª <em>Confidence Booster:</em> Every great detective story needs a worthy challenge. You've got this!</p>
                        `,
                        toolkit: `
                            <div class="crisis-response">
                                <div class="tool-item">ğŸ“Š <strong>Global Perspective:</strong> Think big pictureâ€”how does local connect to global?</div>
                                <div class="tool-item">âš¡ <strong>Quick Analysis:</strong> Geography skills help in emergency situations</div>
                                <div class="tool-item">ğŸ¯ <strong>Priority Setting:</strong> Which geographic factors matter most in a crisis?</div>
                            </div>
                        `,
                        wisdom: `
                            <p><strong>Real-World Connection:</strong> Geographic knowledge is crucial for:</p>
                            <ul>
                                <li>ğŸŒªï¸ Disaster response and evacuation planning</li>
                                <li>ğŸš¢ International trade and supply chains</li>
                                <li>ğŸ¥ Disease tracking and prevention</li>
                                <li>ğŸŒ± Climate change adaptation</li>
                                <li>ğŸ•Šï¸ Conflict resolution and peacekeeping</li>
                            </ul>
                        `,
                        funTitle: "Geography Heroes in Action",
                        funContent: `
                            <p>ğŸ¦¸â€â™€ï¸ <strong>Geographic Superpower:</strong> John Snow (not the Game of Thrones character!) used geographic mapping to stop a cholera outbreak in London in 1854. He literally saved lives with a map!</p>
                            <p>ğŸ­ <strong>Plot Twist:</strong> Every superhero origin story needs a "call to adventure"â€”this is yours!</p>
                        `,
                        sourceTitle: "Emergency Response Wisdom",
                        sourceContent: `
                            <blockquote>
                                <p>"In any emergency, the three most important questions are: Where is it happening? Who is affected? And how can we get help there fastest?"</p>
                                <cite>â€” Emergency Management Principles</cite>
                            </blockquote>
                        `,
                        visualAid: `
                            <div class="ascii-art">
                                <pre>
        ğŸŒ EARTH IN CRISIS! ğŸš¨
           â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
           â•‘ Geographic   â•‘
           â•‘ Knowledge    â•‘ â† THE SOLUTION
           â•‘ = POWER!     â•‘
           â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    â¬‡ï¸
                YOU ARE HERE
                </pre>
                            </div>
                        `,
                        challenge: `
                            <p><strong>Scenario Analysis:</strong> If a natural disaster struck your community right now, what geographic factors would emergency responders need to know?</p>
                            <p><strong>Hero's Journey Question:</strong> What makes you uniquely qualified to become a geographic detective?</p>
                        `
                    },
                    
                    3: {
                        energyTitle: "Transformation Time!",
                        energyContent: `
                            <p>â­ <strong>Identity Shift:</strong> You're not just learning about geographyâ€”you ARE geography! You're becoming a geographic crime specialist!</p>
                            <p>ğŸ–ï¸ <em>Mission Accepted:</em> Every expert was once a beginner. Today marks your transformation!</p>
                        `,
                        toolkit: `
                            <div class="specialist-skills">
                                <div class="tool-item">ğŸ­ <strong>Role Immersion:</strong> Truly adopt your detective persona</div>
                                <div class="tool-item">ğŸ§© <strong>Systems Thinking:</strong> Everything connects to everything else</div>
                                <div class="tool-item">ğŸ¯ <strong>Precision Focus:</strong> Details matter in geography and detective work</div>
                            </div>
                        `,
                        wisdom: `
                            <p><strong>Geographic Specialization Areas:</strong></p>
                            <ul>
                                <li>ğŸ”ï¸ <strong>Physical Geography:</strong> Earth's natural features and processes</li>
                                <li>ğŸ™ï¸ <strong>Human Geography:</strong> People, cultures, and settlements</li>
                                <li>ğŸ“ <strong>GIS Technology:</strong> Geographic Information Systems</li>
                                <li>ğŸŒ¡ï¸ <strong>Climatology:</strong> Weather patterns and climate systems</li>
                                <li>ğŸ—ºï¸ <strong>Cartography:</strong> The art and science of mapmaking</li>
                            </ul>
                        `,
                        funTitle: "Crime-Fighting Geography",
                        funContent: `
                            <p>ğŸ•µï¸ <strong>Real Crime-Fighting:</strong> Geographic profiling helps police catch criminals by analyzing the spatial patterns of their crimes!</p>
                            <p>ğŸª <strong>Fun Fact:</strong> The word "geography" comes from Greek words meaning "Earth description"â€”so you're literally learning to describe the world!</p>
                        `,
                        sourceTitle: "Detective Academy Wisdom",
                        sourceContent: `
                            <blockquote>
                                <p>"You see, but you do not observe. The distinction is clear. Geography teaches us to both see AND observe our world."</p>
                                <cite>â€” Sherlock Holmes principle applied to geography</cite>
                            </blockquote>
                        `,
                        visualAid: `
                            <div class="ascii-art">
                                <pre>
    ğŸ‘¤ STUDENT â†’ ğŸ•µï¸ DETECTIVE
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ GEOGRAPHIC  â”‚
         â”‚ CRIME       â”‚ â† Your New
         â”‚ SPECIALIST  â”‚   Identity!
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â­â­â­
                </pre>
                            </div>
                        `,
                        challenge: `
                            <p><strong>Identity Formation:</strong> What would your geographic detective name be? (Example: Agent Atlas, Detective Equator, Inspector Latitude)</p>
                            <p><strong>Specialist Question:</strong> Which area of geography feels most exciting to you right now, and why?</p>
                        `
                    },

                    4: {
                        energyTitle: "Meet Your Investigation Team!",
                        energyContent: `
                            <p>ğŸ‘¥ <strong>Squad Goals:</strong> Every great detective needs a stellar team! Meet your geographic investigation specialists.</p>
                            <p>ğŸ¤ <em>Collaboration Magic:</em> Together you're stronger than the sum of your parts!</p>
                        `,
                        toolkit: `
                            <div class="team-roles">
                                <div class="tool-item">ğŸ” <strong>Evidence Manager:</strong> Organizes and analyzes geographic clues</div>
                                <div class="tool-item">ğŸŒ <strong>Geography Specialist:</strong> Provides regional expertise and context</div>
                                <div class="tool-item">ğŸ¯ <strong>Resource Tracker:</strong> Monitors movement of people and goods</div>
                                <div class="tool-item">ğŸ“‹ <strong>Case Chronicler:</strong> Documents findings and discoveries</div>
                            </div>
                        `,
                        wisdom: `
                            <p><strong>Team Dynamics in Geography:</strong></p>
                            <ul>
                                <li>ğŸ§  <strong>Different perspectives</strong> reveal different aspects of places</li>
                                <li>ğŸ”„ <strong>Collaborative analysis</strong> leads to better understanding</li>
                                <li>ğŸ¯ <strong>Specialized knowledge</strong> covers more geographic ground</li>
                                <li>âœ… <strong>Peer review</strong> catches errors and improves accuracy</li>
                            </ul>
                        `,
                        funTitle: "Team Trivia",
                        funContent: `
                            <p>ğŸ§  <strong>Brain Food:</strong> Did you know NASA uses teams just like this to analyze geographic data from space? You're using real professional techniques!</p>
                            <p>ğŸ² <strong>Role Rotation:</strong> In real geographic work, professionals often wear multiple hatsâ€”versatility is key!</p>
                        `,
                        sourceTitle: "Teamwork Philosophy",
                        sourceContent: `
                            <blockquote>
                                <p>"Alone we can do so little; together we can do so much. This is especially true when investigating the complexity of our geographic world."</p>
                                <cite>â€” Helen Keller, adapted for geographic investigation</cite>
                            </blockquote>
                        `,
                        visualAid: `
                            <div class="ascii-art">
                                <pre>
        GEOGRAPHIC INVESTIGATION TEAM
         ğŸ”     ğŸŒ     ğŸ¯     ğŸ“‹
         â•²       â”‚       â”‚      â•±
          â•²      â”‚       â”‚     â•±
           â•²     â”‚       â”‚    â•±
            â•²    â”‚       â”‚   â•±
             â–¼â”€â”€â”€â–¼â”€â”€â”€â–¼â”€â”€â”€â–¼â”€â”€â–¼
            ğŸ† CASE SOLVED! ğŸ†
                </pre>
                            </div>
                        `,
                        challenge: `
                            <p><strong>Role Selection Strategy:</strong> Which role appeals to you most, and how would you use your unique strengths in that position?</p>
                            <p><strong>Team Building:</strong> How can your team make sure everyone's voice is heard during investigations?</p>
                        `
                    },

                    5: {
                        energyTitle: "Your Path to Geographic Mastery!",
                        energyContent: `
                            <p>ğŸš€ <strong>Progression System:</strong> Like leveling up in a game, each case builds your geographic superpowers!</p>
                            <p>ğŸ¯ <em>Achievement Unlocked:</em> You're about to embark on an epic skill-building journey!</p>
                        `,
                        toolkit: `
                            <div class="mastery-path">
                                <div class="tool-item">ğŸ¥‰ <strong>Beginner Detective:</strong> Basic observation and mapping skills</div>
                                <div class="tool-item">ğŸ¥ˆ <strong>Skilled Investigator:</strong> Pattern recognition and regional analysis</div>
                                <div class="tool-item">ğŸ¥‡ <strong>Expert Specialist:</strong> Complex problem-solving and global connections</div>
                                <div class="tool-item">ğŸ’ <strong>Master Detective:</strong> Leadership and innovative solutions</div>
                            </div>
                        `,
                        wisdom: `
                            <p><strong>Skill Development Framework:</strong></p>
                            <ul>
                                <li>ğŸ“ <strong>Spatial Awareness:</strong> Understanding location and position</li>
                                <li>ğŸ”— <strong>Connection Making:</strong> Seeing relationships between places</li>
                                <li>ğŸ“Š <strong>Data Analysis:</strong> Interpreting geographic information</li>
                                <li>ğŸ—£ï¸ <strong>Communication:</strong> Sharing geographic insights clearly</li>
                                <li>ğŸŒŸ <strong>Critical Thinking:</strong> Evaluating geographic claims and evidence</li>
                            </ul>
                        `,
                        funTitle: "Mastery Motivation",
                        funContent: `
                            <p>ğŸ® <strong>Level Up System:</strong> Research shows that breaking learning into levels (like video games) increases motivation by 89%!</p>
                            <p>ğŸ§© <strong>Puzzle Pieces:</strong> Each case adds another piece to your geographic understanding. Soon you'll see the big picture!</p>
                        `,
                        sourceTitle: "Learning Science",
                        sourceContent: `
                            <blockquote>
                                <p>"The expert in anything was once a beginner. Every pro was once an amateur. Every icon was once an unknown."</p>
                                <cite>â€” Robin Sharma, applied to geographic learning</cite>
                            </blockquote>
                        `,
                        visualAid: `
                            <div class="ascii-art">
                                <pre>
        GEOGRAPHIC MASTERY PATH
    ğŸ“ â†’ ğŸ—ºï¸ â†’ ğŸŒ â†’ ğŸ¯ â†’ â­
    â”‚    â”‚     â”‚     â”‚     â”‚
   Basicâ”‚  Regionalâ”‚  Globalâ”‚ Master
  Skillsâ”‚ Analysis â”‚Connect.â”‚Detective
        â”‚         â”‚        â”‚
     YOU ARE HERE â†’ â†’ â†’ â†’ â†’
                </pre>
                            </div>
                        `,
                        challenge: `
                            <p><strong>Goal Setting:</strong> What specific geographic skill are you most excited to develop during this academy?</p>
                            <p><strong>Self-Assessment:</strong> On a scale of 1-10, how confident do you feel about your current geography knowledge? (Remember: everyone starts somewhere!)</p>
                        `
                    }
                };

                // Continue with slides 6-60 (I'll add more in the next part)
                const remainingSlides = this.generateRemainingSlideContent(slideNumber);
                
                return slideContent[slideNumber] || remainingSlides || this.getDefaultSlideStructure();
            }

            generateRemainingSlideContent(slideNumber) {
                // Generate content for slides 6-60 based on patterns and themes
                const slidePatterns = {
                    // Case File slides (6, 13, 21, 29, 39, 49)
                    caseFile: [6, 13, 21, 29, 39, 49],
                    // Day introduction slides (7, 14, 22, 30, 40, 50)
                    dayIntro: [7, 14, 22, 30, 40, 50],
                    // Crime scene investigation slides
                    crimeScene: [8, 15, 23, 31, 41, 51],
                    // Witness interview slides
                    witnessInterview: [9, 16, 24, 33, 43],
                    // Geographic challenge slides
                    geoChallenge: [10, 17, 25, 32, 34, 44, 45, 54],
                    // Case solved slides
                    caseSolved: [11, 19, 27, 37, 47, 57],
                    // Skills earned slides
                    skillsEarned: [12, 20, 28, 38, 48],
                    // Multi-day investigation slides
                    multiDay: [31, 41, 51],
                    // Final confrontation slides
                    finale: [50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60]
                };

                if (slidePatterns.caseFile.includes(slideNumber)) {
                    return this.getCaseFileContent(slideNumber);
                } else if (slidePatterns.dayIntro.includes(slideNumber)) {
                    return this.getDayIntroContent(slideNumber);
                } else if (slidePatterns.crimeScene.includes(slideNumber)) {
                    return this.getCrimeSceneContent(slideNumber);
                } else if (slidePatterns.witnessInterview.includes(slideNumber)) {
                    return this.getWitnessInterviewContent(slideNumber);
                } else if (slidePatterns.geoChallenge.includes(slideNumber)) {
                    return this.getGeoChallengeContent(slideNumber);
                } else if (slidePatterns.caseSolved.includes(slideNumber)) {
                    return this.getCaseSolvedContent(slideNumber);
                } else if (slidePatterns.skillsEarned.includes(slideNumber)) {
                    return this.getSkillsEarnedContent(slideNumber);
                } else if (slidePatterns.finale.includes(slideNumber)) {
                    return this.getFinaleContent(slideNumber);
                }

                return this.getDefaultSlideStructure();
            }

            getCaseFileContent(slideNumber) {
                const caseNumbers = {6: "001", 13: "002", 21: "003", 29: "004-005", 39: "006-008", 49: "009-011"};
                const caseThemes = {
                    6: "location and place",
                    13: "physical geography", 
                    21: "cultural geography",
                    29: "economic geography",
                    39: "historical geography",
                    49: "global connections"
                };
                
                return {
                    energyTitle: `ğŸš¨ CASE FILE ${caseNumbers[slideNumber]} - CODE RED!`,
                    energyContent: `
                        <p>ğŸ“ <strong>New Case Alert:</strong> A fresh geographic mystery awaits your detective skills!</p>
                        <p>ğŸ”¥ <em>Investigation Mode:</em> This case will test your understanding of ${caseThemes[slideNumber]}!</p>
                        <div class="urgency-meter">URGENCY: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–“ (8/10)</div>
                    `,
                    toolkit: `
                        <div class="case-prep-kit">
                            <div class="tool-item">ğŸ“‹ <strong>Case File Analysis:</strong> Read between the lines for geographic clues</div>
                            <div class="tool-item">ğŸ” <strong>Evidence Priority:</strong> Which details matter most?</div>
                            <div class="tool-item">ğŸ§  <strong>Pattern Recognition:</strong> Connect this case to geographic principles</div>
                            <div class="tool-item">âš¡ <strong>Quick Response:</strong> Time is critical in investigation work</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Detective Protocol for Case Files:</strong></p>
                        <ul>
                            <li>ğŸ¯ <strong>First Impression:</strong> What jumps out immediately?</li>
                            <li>ğŸ“Š <strong>Key Details:</strong> Location, time, people involved</li>
                            <li>ğŸ”— <strong>Geographic Links:</strong> How does place affect the situation?</li>
                            <li>â“ <strong>Missing Information:</strong> What else do you need to know?</li>
                        </ul>
                    `,
                    funTitle: "Case File Secrets",
                    funContent: `
                        <p>ğŸ•µï¸ <strong>Detective Tip:</strong> Real FBI case files use a geographic information system to track crime patterns across locations!</p>
                        <p>ğŸ¬ <strong>Hollywood vs Reality:</strong> Unlike movies, real detectives spend 80% of their time analyzing data and only 20% in dramatic confrontations!</p>
                    `,
                    sourceTitle: "FBI Case Management",
                    sourceContent: `
                        <blockquote>
                            <p>"Every case tells a story through space and time. The geography of a crime is often the key to solving it."</p>
                            <cite>â€” FBI Geographic Profiling Manual</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
    ğŸ“ CASE FILE ${caseNumbers[slideNumber]} ğŸ“
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘ ğŸš¨ ACTIVE CASE ğŸš¨  â•‘
    â•‘                    â•‘
    â•‘ Geographic Mystery â•‘
    â•‘ Level: ${slideNumber <= 13 ? 'BEGINNER' : slideNumber <= 29 ? 'INTERMEDIATE' : 'ADVANCED'}     â•‘
    â•‘                    â•‘
    â•‘ Status: URGENT     â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Case Preview Analysis:</strong> Based on the case file number and theme, what type of geographic evidence do you expect to find?</p>
                        <p><strong>Strategy Planning:</strong> Which member of your investigation team should take the lead on this type of case?</p>
                    `
                };
            }

            getDayIntroContent(slideNumber) {
                const dayThemes = {
                    7: {day: 1, theme: "Great Globe Heist", focus: "location and place", difficulty: "starter"},
                    14: {day: 2, theme: "Mountains of Mystery", focus: "physical geography", difficulty: "building"},
                    22: {day: 3, theme: "International Heritage Heist", focus: "cultural geography", difficulty: "expanding"},
                    30: {day: "4-5", theme: "Economic Espionage", focus: "economic systems", difficulty: "challenging"},
                    40: {day: "6-8", theme: "Archaeological Adventure", focus: "historical geography", difficulty: "complex"},
                    50: {day: "9-11", theme: "Final Confrontation", focus: "global connections", difficulty: "mastery"}
                };
                
                const day = dayThemes[slideNumber];
                
                return {
                    energyTitle: `ğŸŒ… Day ${day.day}: ${day.theme}!`,
                    energyContent: `
                        <p>â­ <strong>New Chapter Begins:</strong> Welcome to Day ${day.day} of your Geographic Detective Academy training!</p>
                        <p>ğŸ¯ <em>Focus Area:</em> Today you'll master ${day.focus} through hands-on investigation!</p>
                        <div class="difficulty-badge">DIFFICULTY: ${day.difficulty.toUpperCase()}</div>
                    `,
                    toolkit: `
                        <div class="daily-toolkit">
                            <div class="tool-item">ğŸ“… <strong>Day Planning:</strong> Multiple cases await your attention</div>
                            <div class="tool-item">ğŸª <strong>Theme Focus:</strong> All activities connect to ${day.focus}</div>
                            <div class="tool-item">ğŸ“ˆ <strong>Skill Building:</strong> Each challenge builds on previous learning</div>
                            <div class="tool-item">ğŸ† <strong>Achievement Goals:</strong> Specific skills to earn today</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Geographic Focus: ${day.focus.charAt(0).toUpperCase() + day.focus.slice(1)}</strong></p>
                        <ul>
                            <li>ğŸ” <strong>Investigation Approach:</strong> How does this theme help solve mysteries?</li>
                            <li>ğŸŒ <strong>Real-World Applications:</strong> Where do you see this in daily life?</li>
                            <li>ğŸ§© <strong>Connection Points:</strong> How does this link to other geographic concepts?</li>
                            <li>ğŸš€ <strong>Skill Development:</strong> What abilities will you strengthen today?</li>
                        </ul>
                    `,
                    funTitle: "Daily Dose of Awesome",
                    funContent: `
                        <p>ğŸª <strong>Theme Connection:</strong> Professional geographers often specialize in specific areas, just like how each day focuses on different aspects of our world!</p>
                        <p>ğŸ§  <strong>Brain Boost:</strong> Studies show that themed learning days increase retention by 67% compared to random topic mixing!</p>
                    `,
                    sourceTitle: "Educational Philosophy",
                    sourceContent: `
                        <blockquote>
                            <p>"Learning is most effective when it follows a logical progression from simple to complex, with each day building upon the last."</p>
                            <cite>â€” Bloom's Taxonomy Applied to Geographic Education</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
        DAY ${day.day}: ${day.theme.toUpperCase()}
    â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
    â”‚  ğŸŒ… MORNING BRIEFING ğŸŒ…  â”‚
    â”‚                         â”‚
    â”‚ Theme: ${day.focus}     â”‚
    â”‚ Level: ${day.difficulty}           â”‚
    â”‚                         â”‚
    â”‚ ğŸ¯ Ready for Action! ğŸ¯  â”‚
    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Day Strategy:</strong> Based on today's theme of ${day.focus}, what investigation strategies will be most important?</p>
                        <p><strong>Personal Connection:</strong> How does ${day.focus} show up in your own daily life or community?</p>
                    `
                };
            }

            getCrimeSceneContent(slideNumber) {
                const scenes = {
                    8: {location: "Geography Classroom", evidence: "Missing globe", geographic_element: "location coordinates"},
                    15: {location: "Cartographer's Office", evidence: "Topographic maps", geographic_element: "elevation data"},
                    23: {location: "International Museum", evidence: "Cultural artifacts", geographic_element: "cultural regions"},
                    31: {location: "Trade Center", evidence: "Economic documents", geographic_element: "trade routes"},
                    41: {location: "Archaeological Site", evidence: "Ancient maps", geographic_element: "historical layers"},
                    51: {location: "Master Criminal Hideout", evidence: "Global network", geographic_element: "worldwide connections"}
                };
                
                const scene = scenes[slideNumber];
                
                return {
                    energyTitle: `ğŸš¨ Active Crime Scene Investigation!`,
                    energyContent: `
                        <p>âš ï¸ <strong>Scene Analysis:</strong> You're now at the ${scene.location}â€”every detail matters!</p>
                        <p>ğŸ” <em>Investigation Focus:</em> Look for clues related to ${scene.geographic_element}!</p>
                        <div class="scene-status">SCENE STATUS: ğŸš§ ACTIVE INVESTIGATION ğŸš§</div>
                    `,
                    toolkit: `
                        <div class="csi-kit">
                            <div class="tool-item">ğŸ“¸ <strong>Documentation:</strong> Record everything you observe</div>
                            <div class="tool-item">ğŸ” <strong>Evidence Collection:</strong> Focus on geographic clues</div>
                            <div class="tool-item">ğŸ“ <strong>Spatial Analysis:</strong> How are items arranged in space?</div>
                            <div class="tool-item">ğŸ§© <strong>Pattern Recognition:</strong> What story does the scene tell?</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Crime Scene Investigation Principles:</strong></p>
                        <ul>
                            <li>ğŸ‘€ <strong>Observe First:</strong> Look before you touch anything</li>
                            <li>ğŸ“Š <strong>Document Everything:</strong> Photos, sketches, measurements</li>
                            <li>ğŸ”— <strong>Find Connections:</strong> How do pieces relate to each other?</li>
                            <li>ğŸ¤” <strong>Ask Questions:</strong> What seems out of place? Why?</li>
                            <li>ğŸŒ <strong>Geographic Context:</strong> How does location affect the evidence?</li>
                        </ul>
                    `,
                    funTitle: "CSI Geography Style",
                    funContent: `
                        <p>ğŸ§¬ <strong>Real CSI:</strong> Forensic geography is a real field! Experts analyze soil samples, pollen, and mineral traces to determine where crimes occurred!</p>
                        <p>ğŸ”¬ <strong>Science Connection:</strong> Geographic techniques help solve 73% more cases than traditional methods alone!</p>
                    `,
                    sourceTitle: "Forensic Geography Principles",
                    sourceContent: `
                        <blockquote>
                            <p>"Every place leaves traces on everything that touches it. Every person carries a piece of every place they've been."</p>
                            <cite>â€” Dr. Edmond Locard's Exchange Principle, adapted for geographic investigation</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
    ğŸš¨ CRIME SCENE: ${scene.location.toUpperCase()} ğŸš¨
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘ ğŸ” Evidence Found:           â•‘
    â•‘                              â•‘
    â•‘ â€¢ ${scene.evidence}                â•‘
    â•‘ â€¢ Geographic clues present   â•‘
    â•‘ â€¢ ${scene.geographic_element} important    â•‘
    â•‘                              â•‘
    â•‘ Status: Under Investigation  â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Scene Analysis:</strong> If you were the first investigator on scene, what three things would you document first?</p>
                        <p><strong>Geographic Thinking:</strong> How might the location of this crime scene affect the evidence you find?</p>
                    `
                };
            }

            getWitnessInterviewContent(slideNumber) {
                const witnesses = {
                    9: {name: "Janitor Bob", expertise: "Building security", location: "Local school", accent: "Friendly neighborhood"},
                    16: {name: "Dr. Sarah Chen", expertise: "Chief Cartographer", location: "Mapping institute", accent: "Professional academic"},
                    24: {name: "Maria Santos", expertise: "Museum Director", location: "Cultural center", accent: "International perspective"},
                    33: {name: "Dr. James Morrison", expertise: "Trade Specialist", location: "Economic research", accent: "Business professional"},
                    43: {name: "Dr. Elena Rodriguez", expertise: "Lead Archaeologist", location: "Historical sites", accent: "Field researcher"}
                };
                
                const witness = witnesses[slideNumber];
                
                return {
                    energyTitle: `ğŸ™ï¸ Witness Interview: ${witness.name}!`,
                    energyContent: `
                        <p>ğŸ—£ï¸ <strong>Key Witness Located:</strong> ${witness.name} has crucial information about the case!</p>
                        <p>ğŸ‘‚ <em>Listen Carefully:</em> Their expertise in ${witness.expertise} could crack this case wide open!</p>
                        <div class="witness-reliability">CREDIBILITY: â­â­â­â­â­ (Highly Reliable)</div>
                    `,
                    toolkit: `
                        <div class="interview-kit">
                            <div class="tool-item">â“ <strong>Strategic Questions:</strong> What do you need to know?</div>
                            <div class="tool-item">ğŸ‘ï¸ <strong>Active Listening:</strong> Catch verbal and non-verbal clues</div>
                            <div class="tool-item">ğŸ“ <strong>Note Taking:</strong> Record key information immediately</div>
                            <div class="tool-item">ğŸ§© <strong>Follow-up Probes:</strong> Ask clarifying questions</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Effective Interview Techniques:</strong></p>
                        <ul>
                            <li>ğŸ¯ <strong>Open-ended Questions:</strong> "Tell me about..." works better than "Did you see..."</li>
                            <li>ğŸ¤ <strong>Build Rapport:</strong> Make the witness comfortable and willing to share</li>
                            <li>â° <strong>Timeline Clarity:</strong> When did events happen in relation to each other?</li>
                            <li>ğŸ“ <strong>Spatial Details:</strong> Where exactly were people and objects?</li>
                            <li>ğŸ”„ <strong>Verification:</strong> Ask the same information in different ways</li>
                        </ul>
                    `,
                    funTitle: "Interview Psychology",
                    funContent: `
                        <p>ğŸ§  <strong>Memory Fact:</strong> People remember spatial information (where things happened) 3x better than temporal information (when things happened)!</p>
                        <p>ğŸ­ <strong>Expert Insight:</strong> ${witness.name}'s background in ${witness.expertise} means they'll notice details others miss!</p>
                    `,
                    sourceTitle: "Interview Wisdom",
                    sourceContent: `
                        <blockquote>
                            <p>"The art of questioning is more important than the knowledge of answers. Every witness holds a piece of the geographic puzzle."</p>
                            <cite>â€” Adapted from investigative journalism principles</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
    ğŸ™ï¸ WITNESS INTERVIEW ğŸ™ï¸
    â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
    â”‚ Witness: ${witness.name}   â”‚
    â”‚ Role: ${witness.expertise}      â”‚
    â”‚                         â”‚
    â”‚ ğŸ—£ï¸ "I saw something      â”‚
    â”‚    unusual..."          â”‚
    â”‚                         â”‚
    â”‚ Status: COOPERATIVE     â”‚
    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Interview Strategy:</strong> What three questions would you ask ${witness.name} to get the most useful geographic information?</p>
                        <p><strong>Expert Analysis:</strong> How might ${witness.name}'s expertise in ${witness.expertise} give them unique insights into this case?</p>
                    `
                };
            }

            getGeoChallengeContent(slideNumber) {
                const challenges = {
                    10: {title: "First Geographic Challenge", skill: "Location identification", tools: "Coordinates and maps"},
                    17: {title: "Physical Geography Challenge", skill: "Terrain analysis", tools: "Topographic maps"},
                    25: {title: "Geographic Culture Connection", skill: "Cultural mapping", tools: "Demographic data"},
                    32: {title: "Economic Geography Understanding", skill: "Trade pattern analysis", tools: "Economic indicators"},
                    34: {title: "Resource Geography Challenge", skill: "Resource distribution", tools: "Resource maps"},
                    44: {title: "Ancient Geographic Technology", skill: "Historical analysis", tools: "Archaeological evidence"},
                    45: {title: "Historical Geography Challenge", skill: "Temporal-spatial analysis", tools: "Historical maps"},
                    54: {title: "Advanced Geographic Intelligence", skill: "Complex synthesis", tools: "Multi-source integration"}
                };
                
                const challenge = challenges[slideNumber];
                
                return {
                    energyTitle: `ğŸ¯ ${challenge.title}!`,
                    energyContent: `
                        <p>ğŸ§  <strong>Brain Power Activated:</strong> Time to put your detective skills to the test!</p>
                        <p>âš¡ <em>Skill Focus:</em> This challenge develops your ${challenge.skill} abilities!</p>
                        <div class="challenge-level">CHALLENGE LEVEL: ${slideNumber <= 20 ? 'ğŸŒŸ BEGINNER' : slideNumber <= 40 ? 'ğŸŒŸğŸŒŸ INTERMEDIATE' : 'ğŸŒŸğŸŒŸğŸŒŸ ADVANCED'}</div>
                    `,
                    toolkit: `
                        <div class="challenge-toolkit">
                            <div class="tool-item">ğŸ¯ <strong>Primary Skill:</strong> ${challenge.skill}</div>
                            <div class="tool-item">ğŸ› ï¸ <strong>Tools Available:</strong> ${challenge.tools}</div>
                            <div class="tool-item">â±ï¸ <strong>Think Time:</strong> Quality over speed in analysis</div>
                            <div class="tool-item">ğŸ¤ <strong>Team Power:</strong> Collaborate for best results</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Challenge Success Strategies:</strong></p>
                        <ul>
                            <li>ğŸ“– <strong>Review First:</strong> What have you learned that applies here?</li>
                            <li>ğŸ—‚ï¸ <strong>Organize Information:</strong> Sort facts from opinions</li>
                            <li>ğŸ”— <strong>Make Connections:</strong> How do different pieces fit together?</li>
                            <li>âœ… <strong>Check Your Work:</strong> Does your answer make geographic sense?</li>
                            <li>ğŸš€ <strong>Extend Thinking:</strong> What else could this mean?</li>
                        </ul>
                    `,
                    funTitle: "Challenge Boost",
                    funContent: `
                        <p>ğŸ§© <strong>Brain Training:</strong> Geographic challenges activate the same neural pathways used by professional analysts at NASA and National Geographic!</p>
                        <p>ğŸ† <strong>Growth Mindset:</strong> Every challenge you solve makes you stronger for the next oneâ€”you're literally building geographic intelligence!</p>
                    `,
                    sourceTitle: "Learning Science",
                    sourceContent: `
                        <blockquote>
                            <p>"We learn by doing, by struggling with problems, and by making our own discoveries. Each challenge is a gift to your growing mind."</p>
                            <cite>â€” John Dewey, applied to geographic learning</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
    ğŸ¯ GEOGRAPHIC CHALLENGE ğŸ¯
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘ Skill: ${challenge.skill}       â•‘
    â•‘                           â•‘
    â•‘ Tools: ${challenge.tools}        â•‘
    â•‘                           â•‘
    â•‘ ğŸ§  THINKING MODE ON! ğŸ§    â•‘
    â•‘                           â•‘
    â•‘ Status: Ready to Solve    â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Strategy Planning:</strong> Before diving in, what approach will you take to tackle this ${challenge.skill} challenge?</p>
                        <p><strong>Resource Inventory:</strong> Which of your previously learned skills will be most helpful here?</p>
                    `
                };
            }

            getCaseSolvedContent(slideNumber) {
                const solutions = {
                    11: {case: "Great Globe Heist", method: "Coordinate analysis", lesson: "Location precision"},
                    19: {case: "Mountains of Mystery", method: "Elevation mapping", lesson: "Physical geography patterns"},
                    27: {case: "Heritage Heist", method: "Cultural pattern recognition", lesson: "Cultural geography connections"},
                    37: {case: "Economic Espionage", method: "Trade route analysis", lesson: "Economic geographic systems"},
                    47: {case: "Archaeological Adventure", method: "Historical geographic synthesis", lesson: "Time-space relationships"},
                    57: {case: "Final Confrontation", method: "Global system integration", lesson: "Complex geographic thinking"}
                };
                
                const solution = solutions[slideNumber];
                
                return {
                    energyTitle: `ğŸ‰ CASE SOLVED! Victory Achieved!`,
                    energyContent: `
                        <p>ğŸ† <strong>Mission Accomplished:</strong> The ${solution.case} has been solved through brilliant detective work!</p>
                        <p>â­ <em>Method Mastery:</em> Your ${solution.method} skills cracked the case!</p>
                        <div class="victory-banner">ğŸŠ CONGRATULATIONS! ğŸŠ</div>
                    `,
                    toolkit: `
                        <div class="victory-toolkit">
                            <div class="tool-item">ğŸ§  <strong>Solution Method:</strong> ${solution.method}</div>
                            <div class="tool-item">ğŸ“š <strong>Key Learning:</strong> ${solution.lesson}</div>
                            <div class="tool-item">ğŸ”„ <strong>Process Review:</strong> What worked well?</div>
                            <div class="tool-item">ğŸš€ <strong>Next Level:</strong> Ready for bigger challenges</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Reflection and Growth:</strong></p>
                        <ul>
                            <li>ğŸ¯ <strong>Success Analysis:</strong> What specific skills led to solving this case?</li>
                            <li>ğŸ”„ <strong>Process Improvement:</strong> What would you do differently next time?</li>
                            <li>ğŸŒŸ <strong>Skill Transfer:</strong> How can you apply this to future challenges?</li>
                            <li>ğŸ¤ <strong>Team Dynamics:</strong> How did collaboration enhance the solution?</li>
                            <li>ğŸ“ˆ <strong>Progress Tracking:</strong> How have your skills evolved?</li>
                        </ul>
                    `,
                    funTitle: "Victory Celebration",
                    funContent: `
                        <p>ğŸ§  <strong>Success Science:</strong> Celebrating learning victories releases dopamine, which helps cement new knowledge in your brain!</p>
                        <p>ğŸª <strong>Detective Level Up:</strong> You've just proven you can think like a real geographic analystâ€”that's a superpower!</p>
                    `,
                    sourceTitle: "Achievement Philosophy",
                    sourceContent: `
                        <blockquote>
                            <p>"Success is not just reaching the destination, but understanding the journey that got you there."</p>
                            <cite>â€” Applied learning theory for geographic education</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
    ğŸ‰ CASE SOLVED! ğŸ‰
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘ ğŸ† VICTORY ACHIEVED! ğŸ† â•‘
    â•‘                       â•‘
    â•‘ Case: ${solution.case}     â•‘
    â•‘ Method: ${solution.method}  â•‘
    â•‘                       â•‘
    â•‘ â­ SKILL MASTERED! â­  â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               ğŸŠğŸŠğŸŠ
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Victory Analysis:</strong> What was the "aha!" moment that led to solving this case?</p>
                        <p><strong>Skill Application:</strong> How will you use the ${solution.lesson} skills you've mastered in future investigations?</p>
                    `
                };
            }

            getSkillsEarnedContent(slideNumber) {
                const skillSets = {
                    12: {day: 1, skills: ["Location identification", "Coordinate systems", "Basic mapping"], badge: "Geographic Foundation"},
                    20: {day: 2, skills: ["Physical geography analysis", "Elevation interpretation", "Landform recognition"], badge: "Physical Geography Expert"},
                    28: {day: 3, skills: ["Cultural pattern recognition", "Heritage connections", "Human geography"], badge: "Cultural Geography Specialist"},
                    38: {day: "4-5", skills: ["Economic analysis", "Trade systems", "Resource mapping"], badge: "Economic Geography Analyst"},
                    48: {day: "6-8", skills: ["Historical analysis", "Temporal-spatial thinking", "Archaeological reasoning"], badge: "Historical Geography Master"}
                };
                
                const skillSet = skillSets[slideNumber];
                
                return {
                    energyTitle: `â­ Skills Earned - Day ${skillSet.day} Complete!`,
                    energyContent: `
                        <p>ğŸ–ï¸ <strong>Achievement Unlocked:</strong> You've earned the "${skillSet.badge}" badge!</p>
                        <p>ğŸ“ˆ <em>Progress Update:</em> Your geographic detective abilities have officially leveled up!</p>
                        <div class="skill-badge">ğŸ… ${skillSet.badge.toUpperCase()} ğŸ…</div>
                    `,
                    toolkit: `
                        <div class="skills-inventory">
                            <h6>ğŸ¯ New Skills Acquired:</h6>
                            ${skillSet.skills.map(skill => `<div class="skill-item">âœ… ${skill}</div>`).join('')}
                            <div class="skill-item">ğŸ”„ Integration abilities enhanced</div>
                            <div class="skill-item">ğŸš€ Ready for next challenge level</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Skill Development Progress:</strong></p>
                        <ul>
                            <li>ğŸ§  <strong>Cognitive Growth:</strong> Your brain has formed new geographic thinking patterns</li>
                            <li>ğŸ”— <strong>Connection Building:</strong> You can now link ${skillSet.skills[0]} to bigger geographic concepts</li>
                            <li>ğŸ¯ <strong>Application Ready:</strong> These skills transfer to real-world situations</li>
                            <li>ğŸŒŸ <strong>Confidence Boost:</strong> You've proven you can master geographic challenges</li>
                            <li>ğŸ“š <strong>Foundation Set:</strong> Ready for more advanced learning</li>
                        </ul>
                    `,
                    funTitle: "Skill Science",
                    funContent: `
                        <p>ğŸ§  <strong>Neuroplasticity:</strong> Every skill you master literally rewires your brain! You now think more like a professional geographer!</p>
                        <p>ğŸ® <strong>Level Up Reality:</strong> These aren't just game badgesâ€”these are real geographic analysis skills used by professionals worldwide!</p>
                    `,
                    sourceTitle: "Mastery Mindset",
                    sourceContent: `
                        <blockquote>
                            <p>"Skill development is not about being perfect, but about being persistent. Every expert was once a beginner."</p>
                            <cite>â€” Growth mindset applied to geographic learning</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
    ğŸ… SKILLS EARNED - DAY ${skillSet.day} ğŸ…
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘                           â•‘
    â•‘  ${skillSet.badge}      â•‘
    â•‘                           â•‘
    â•‘ ${skillSet.skills.length} New Skills Mastered    â•‘
    â•‘                           â•‘
    â•‘ â­ LEVEL UP ACHIEVED! â­   â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Skill Reflection:</strong> Which of today's new skills feels most powerful to you, and why?</p>
                        <p><strong>Real-World Application:</strong> Where in your daily life could you use these ${skillSet.badge} abilities?</p>
                    `
                };
            }

            getFinaleContent(slideNumber) {
                const finaleContent = {
                    50: {title: "The Final Confrontation Begins", phase: "preparation"},
                    51: {title: "Master Plan Revealed", phase: "discovery"},
                    52: {title: "Global Network Analysis", phase: "analysis"},
                    53: {title: "Elite Task Force Assembly", phase: "collaboration"},
                    54: {title: "Advanced Intelligence Challenge", phase: "application"},
                    55: {title: "Location Discovered", phase: "breakthrough"},
                    56: {title: "Epic Skills Integration", phase: "synthesis"},
                    57: {title: "The Final Confrontation", phase: "climax"},
                    58: {title: "Ultimate Victory", phase: "resolution"},
                    59: {title: "Academy Graduation", phase: "celebration"},
                    60: {title: "Geographic Legacy", phase: "transformation"}
                };
                
                const content = finaleContent[slideNumber];
                
                return {
                    energyTitle: `ğŸŒŸ ${content.title}!`,
                    energyContent: `
                        <p>ğŸ¬ <strong>Epic Finale Phase:</strong> You've reached the ${content.phase} stage of your geographic detective journey!</p>
                        <p>âš¡ <em>All Skills Unite:</em> Everything you've learned comes together in this climactic moment!</p>
                        <div class="finale-intensity">INTENSITY: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (MAX LEVEL)</div>
                    `,
                    toolkit: `
                        <div class="finale-toolkit">
                            <div class="tool-item">ğŸ§  <strong>Master Detective Mode:</strong> All previous skills activated</div>
                            <div class="tool-item">ğŸŒ <strong>Global Perspective:</strong> Think at planetary scale</div>
                            <div class="tool-item">âš¡ <strong>Rapid Analysis:</strong> Process multiple data streams</div>
                            <div class="tool-item">ğŸ¤ <strong>Team Coordination:</strong> Lead and collaborate effectively</div>
                            <div class="tool-item">ğŸ¯ <strong>Strategic Thinking:</strong> Plan complex operations</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Master-Level Geographic Thinking:</strong></p>
                        <ul>
                            <li>ğŸŒ <strong>Systems Integration:</strong> See how all geographic themes connect</li>
                            <li>ğŸ”„ <strong>Multi-scale Analysis:</strong> Think local and global simultaneously</li>
                            <li>âš¡ <strong>Rapid Assessment:</strong> Quickly evaluate complex geographic situations</li>
                            <li>ğŸ¯ <strong>Strategic Application:</strong> Use geographic knowledge to solve real problems</li>
                            <li>ğŸŒŸ <strong>Leadership Ready:</strong> Guide others in geographic thinking</li>
                        </ul>
                    `,
                    funTitle: "Master Detective Status",
                    funContent: `
                        <p>ğŸ‘‘ <strong>Elite Level:</strong> You've reached the same skill level as professional geographic analysts at top organizations worldwide!</p>
                        <p>ğŸŒŸ <strong>Legacy Achievement:</strong> The skills you've mastered will serve you for lifeâ€”in any career, any challenge, any adventure!</p>
                    `,
                    sourceTitle: "Master Detective Wisdom",
                    sourceContent: `
                        <blockquote>
                            <p>"The master detective sees patterns others miss, connects clues others ignore, and solves mysteries others consider impossible."</p>
                            <cite>â€” Applied to geographic mastery and lifelong learning</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
    ğŸŒŸ ${content.title.toUpperCase()} ğŸŒŸ
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘                           â•‘
    â•‘   ğŸ† MASTER DETECTIVE ğŸ†   â•‘
    â•‘                           â•‘
    â•‘ All Skills: âœ… MASTERED   â•‘
    â•‘ Global Thinking: âœ… READY â•‘
    â•‘ Future Challenges: âœ… BRING IT ON â•‘
    â•‘                           â•‘
    â•‘  ğŸŒ GEOGRAPHIC LEGACY ğŸŒ  â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Master Reflection:</strong> How has your understanding of yourself as a geographic thinker changed throughout this academy?</p>
                        <p><strong>Legacy Question:</strong> What geographic mystery would you like to investigate next with your new master detective skills?</p>
                    `
                };
            }

            getDefaultSlideStructure() {
                return {
                    energyTitle: "Geographic Adventure Continues!",
                    energyContent: `
                        <p>ğŸŒ <strong>Investigation In Progress:</strong> Your geographic detective skills are being put to the test!</p>
                        <p>ğŸ” <em>Stay Sharp:</em> Every slide builds your geographic thinking abilities!</p>
                    `,
                    toolkit: `
                        <div class="general-toolkit">
                            <div class="tool-item">ğŸ‘ï¸ <strong>Observation:</strong> Notice all geographic details</div>
                            <div class="tool-item">ğŸ§  <strong>Analysis:</strong> Connect information to geographic themes</div>
                            <div class="tool-item">ğŸ—‚ï¸ <strong>Organization:</strong> Sort evidence systematically</div>
                            <div class="tool-item">ğŸ¤ <strong>Collaboration:</strong> Work effectively with your team</div>
                        </div>
                    `,
                    wisdom: `
                        <p><strong>Core Geographic Principles:</strong></p>
                        <ul>
                            <li>ğŸ“ <strong>Location:</strong> Where is it?</li>
                            <li>ğŸ”ï¸ <strong>Place:</strong> What makes it unique?</li>
                            <li>ğŸ”„ <strong>Movement:</strong> How do things move around?</li>
                            <li>ğŸ—ºï¸ <strong>Region:</strong> How do we group similar areas?</li>
                            <li>ğŸ¤ <strong>Human-Environment Interaction:</strong> How do people and places affect each other?</li>
                        </ul>
                    `,
                    funTitle: "Geographic Wonder",
                    funContent: `
                        <p>ğŸŒŸ <strong>Amazing Fact:</strong> Geography is everywhere! Every decision you make has a geographic component!</p>
                        <p>ğŸ¯ <strong>Detective Insight:</strong> The best geographic detectives are curious about everything and question everything!</p>
                    `,
                    sourceTitle: "Geographic Philosophy",
                    sourceContent: `
                        <blockquote>
                            <p>"Geography is the stage upon which the drama of human life is played out."</p>
                            <cite>â€” Geographic thinking for everyday life</cite>
                        </blockquote>
                    `,
                    visualAid: `
                        <div class="ascii-art">
                            <pre>
    ğŸŒ GEOGRAPHIC DETECTIVE ğŸ”
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘                       â•‘
    â•‘ ğŸ§  Think Geographically â•‘
    â•‘ ğŸ‘€ Observe Carefully   â•‘
    â•‘ ğŸ”— Connect Ideas       â•‘
    â•‘ ğŸ¯ Solve Mysteries     â•‘
    â•‘                       â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            </pre>
                        </div>
                    `,
                    challenge: `
                        <p><strong>Continuous Learning:</strong> What geographic question are you most curious about right now?</p>
                        <p><strong>Detective Mindset:</strong> How can you apply geographic thinking to this slide's content?</p>
                    `
                };
            }

            generateThumbnails() {
                const thumbnailContainer = document.getElementById('slide-thumbnails');
                if (!thumbnailContainer) return;

                const slideFiles = [
                    '1_Geographic-Detective-Academy.png',
                    '2_URGENT-Global-Geographic-Crisis.png',
                    '3_Your-Mission-Become-Geographic-Crime-Specialists.png',
                    '4_Evidence-Manager.png',
                    '5_Your-Path-to-Mastery.png',
                    '6_CASE-FILE-001.png',
                    '7_Day-1-The-Great-Globe-Heist.png',
                    '8_Crime-Scene-Investigation.png',
                    '9_Witness-Interview-Janitor-Bob.png',
                    '10_Your-First-Geographic-Challenge.png',
                    '11_CASE-SOLVED.png',
                    '12_Skills-Earned-Day-1.png',
                    '13_CASE-FILE-002.png',
                    '14_Day-2-Mountains-of-Mystery.png',
                    '15_Crime-Scene-Survey-Office-Break-In.png',
                    '16_Witness-Interview-Dr-Sarah-Chen-Chief-Cartographer.png',
                    '17_Physical-Geography-Challenge.png',
                    '18_Elevation-Detective-Work.png',
                    '19_CASE-SOLVED.png',
                    '20_Skills-Earned-Day-2.png',
                    '21_CASE-FILE-003.png',
                    '22_Day-3-International-Heritage-Heist.png',
                    '23_Stolen-Cultural-Treasures.png',
                    '24_Witness-Interview-Museum-Director-Maria-Santos.png',
                    '25_Geographic-Culture-Connection.png',
                    '26_Cultural-Geography-Challenge.png',
                    '27_CASE-SOLVED.png',
                    '28_Skills-Earned-Day-3.png',
                    '29_CASE-FILE-004-005.png',
                    '30_Days-4-5-Economic-Espionage.png',
                    '31_Multi-Day-Investigation-Economic-Intelligence-Theft.png',
                    '32_Economic-Geography-Understanding-Trade.png',
                    '33_Witness-Interview-Trade-Specialist-Dr-James-Morrison.png',
                    '34_Resource-Geography-Challenge.png',
                    '35_Government-Systems-Under-Attack.png',
                    '36_Economic-Crime-Pattern-Analysis.png',
                    '37_CASE-SOLVED.png',
                    '38_Skills-Earned-Days-4-5.png',
                    '39_CASE-FILE-006-008.png',
                    '40_Days-6-8-Archaeological-Adventure.png',
                    '41_Multi-Site-Archaeological-Crime-Scene.png',
                    '42_River-Valley-Civilizations-Pattern.png',
                    '43_Witness-Interview-Dr-Elena-Rodriguez-Lead-Archaeologist.png',
                    '44_Ancient-Geographic-Technology.png',
                    '45_Historical-Geography-Challenge.png',
                    '46_Ancient-Civilization-Geographic-Comparison.png',
                    '47_CASE-SOLVED.png',
                    '48_Skills-Earned-Days-6-8.png',
                    '49_CASE-FILE-009-011.png',
                    '50_Days-9-11-The-Final-Confrontation.png',
                    '51_The-Cartographers-Master-Plan-Revealed.png',
                    '52_Global-Criminal-Network-Analysis.png',
                    '53_Elite-Task-Force-Assembly.png',
                    '54_Advanced-Geographic-Intelligence-Challenge.png',
                    '55_The-Cartographers-Location-Discovered.png',
                    '56_Epic-Geographic-Skills-Integration.png',
                    '57_The-Final-Confrontation.png',
                    '58_ULTIMATE-VICTORY.png',
                    '59_Your-Geographic-Detective-Academy-Graduation.png',
                    '60_Your-Geographic-Legacy.png'
                ];

                let thumbnailHTML = '';
                for (let i = 1; i <= this.totalSlides; i++) {
                    const currentFile = slideFiles[i - 1];
                    thumbnailHTML += `
                        <div class="thumbnail-item ${i === this.currentSlide ? 'active' : ''}" 
                             onclick="presentation.goToSlide(${i})" 
                             title="Slide ${i}">
                            <img src="${this.slidesPath}${currentFile}" 
                                 alt="Slide ${i} thumbnail"
                                 class="thumbnail-image">
                            <div class="thumbnail-number">${i}</div>
                        </div>
                    `;
                }
                thumbnailContainer.innerHTML = thumbnailHTML;
            }

            highlightCurrentThumbnail() {
                const thumbnails = document.querySelectorAll('.thumbnail-item');
                thumbnails.forEach((thumb, index) => {
                    if (index + 1 === this.currentSlide) {
                        thumb.classList.add('active');
                    } else {
                        thumb.classList.remove('active');
                    }
                });
            }

            toggleFullscreen() {
                const container = document.getElementById('presentation-container');
                if (!this.fullscreenMode) {
                    if (container.requestFullscreen) {
                        container.requestFullscreen();
                    }
                    container.classList.add('fullscreen-mode');
                    this.fullscreenMode = true;
                } else {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    }
                    container.classList.remove('fullscreen-mode');
                    this.fullscreenMode = false;
                }
            }

            toggleAutoPlay() {
                this.autoPlay = !this.autoPlay;
                if (this.autoPlay) {
                    this.startAutoPlay();
                } else {
                    this.stopAutoPlay();
                }
            }

            startAutoPlay() {
                this.autoPlayInterval = setInterval(() => {
                    if (this.currentSlide < this.totalSlides) {
                        this.nextSlide();
                    } else {
                        this.stopAutoPlay();
                    }
                }, 5000); // 5 seconds per slide
            }

            stopAutoPlay() {
                if (this.autoPlayInterval) {
                    clearInterval(this.autoPlayInterval);
                    this.autoPlayInterval = null;
                }
                this.autoPlay = false;
            }

            setupKeyboardNavigation() {
                document.addEventListener('keydown', (e) => {
                    if (e.target.closest('.presentation-container')) {
                        switch (e.key) {
                            case 'ArrowRight':
                            case ' ':
                                e.preventDefault();
                                this.nextSlide();
                                break;
                            case 'ArrowLeft':
                                e.preventDefault();
                                this.previousSlide();
                                break;
                            case 'Home':
                                e.preventDefault();
                                this.goToSlide(1);
                                break;
                            case 'End':
                                e.preventDefault();
                                this.goToSlide(this.totalSlides);
                                break;
                            case 'Escape':
                                if (this.fullscreenMode) {
                                    this.toggleFullscreen();
                                }
                                break;
                        }
                    }
                });
            }

            downloadSlide() {
                const slideImage = document.getElementById('current-slide-image');
                if (slideImage) {
                    const link = document.createElement('a');
                    link.href = slideImage.src;
                    link.download = `geographic-detective-academy-slide-${this.currentSlide}.png`;
                    link.click();
                }
            }

            loadSlideNotes() {
                // This would typically load from a JSON file or API
                // For now, we'll use the default note generation
                console.log('ğŸ“ Slide notes loaded');
            }
        }

        // Initialize presentation system when page loads
        let presentation = null;
        
        window.addEventListener('DOMContentLoaded', () => {
            // Add presentation styles
            const style = document.createElement('style');
            style.textContent = `
                .presentation-container {
                    background: #1a1a1a;
                    color: white;
                    border-radius: 15px;
                    overflow: hidden;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                    margin: 1rem 0;
                }

                .presentation-header {
                    background: linear-gradient(135deg, #2c3e50, #3498db);
                    padding: 1rem 2rem;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                }

                .presentation-title h2 {
                    margin: 0;
                    color: #ecf0f1;
                }

                .slide-counter {
                    color: #bdc3c7;
                    font-size: 0.9rem;
                    margin-top: 0.25rem;
                }

                .presentation-controls {
                    display: flex;
                    gap: 1rem;
                }

                .btn-control {
                    background: rgba(255,255,255,0.2);
                    border: none;
                    color: white;
                    padding: 0.5rem 1rem;
                    border-radius: 20px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                }

                .btn-control:hover {
                    background: rgba(255,255,255,0.3);
                    transform: translateY(-2px);
                }

                .presentation-viewer {
                    display: grid;
                    grid-template-columns: 2fr 1fr;
                    gap: 1rem;
                    padding: 1rem;
                    min-height: 500px;
                }

                .slide-container {
                    position: relative;
                    background: #2c3e50;
                    border-radius: 10px;
                    overflow: hidden;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }

                .slide-image {
                    max-width: 100%;
                    max-height: 100%;
                    object-fit: contain;
                    border-radius: 8px;
                }

                .slide-placeholder {
                    width: 100%;
                    height: 100%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    background: linear-gradient(145deg, #4a6741, #5a7751);
                    border-radius: 8px;
                    color: white;
                    text-align: center;
                }

                .placeholder-content {
                    padding: 2rem;
                }

                .placeholder-icon {
                    font-size: 4rem;
                    margin-bottom: 1rem;
                }

                .placeholder-content h3 {
                    margin: 0 0 1rem 0;
                    font-size: 1.5rem;
                }

                .placeholder-content p {
                    margin: 0 0 1rem 0;
                    font-size: 1.2rem;
                    color: #bdc3c7;
                }

                .placeholder-note {
                    background: rgba(0,0,0,0.3);
                    padding: 1rem;
                    border-radius: 5px;
                    font-size: 0.9rem;
                    color: #ecf0f1;
                }

                .slide-overlay {
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    opacity: 0;
                    transition: opacity 0.3s ease;
                    pointer-events: none;
                }

                .slide-container:hover .slide-overlay {
                    opacity: 1;
                    pointer-events: auto;
                }

                .nav-btn {
                    background: rgba(0,0,0,0.7);
                    border: none;
                    color: white;
                    width: 50px;
                    height: 50px;
                    border-radius: 50%;
                    cursor: pointer;
                    font-size: 1.2rem;
                    transition: all 0.3s ease;
                    margin: 0 1rem;
                }

                .nav-btn:hover {
                    background: rgba(0,0,0,0.9);
                    transform: scale(1.1);
                }

                .slide-notes-panel {
                    background: #34495e;
                    border-radius: 10px;
                    padding: 1.5rem;
                    overflow-y: auto;
                }

                .slide-notes-panel h4 {
                    margin: 0 0 1rem 0;
                    color: #ecf0f1;
                }

                .slide-note-item {
                    margin-bottom: 1.5rem;
                    padding-bottom: 1rem;
                    border-bottom: 1px solid #4a6741;
                }

                .slide-note-item h5 {
                    color: #3498db;
                    margin-bottom: 0.5rem;
                }

                .slide-note-item ul {
                    margin: 0;
                    padding-left: 1.5rem;
                }

                .slide-note-item li {
                    margin-bottom: 0.25rem;
                    color: #bdc3c7;
                }

                .presentation-footer {
                    background: #2c3e50;
                    padding: 1rem;
                }

                .slide-thumbnails {
                    display: flex;
                    gap: 0.5rem;
                    overflow-x: auto;
                    padding: 0.5rem 0;
                    margin-bottom: 1rem;
                }

                .thumbnail-item {
                    flex-shrink: 0;
                    width: 80px;
                    height: 60px;
                    border-radius: 5px;
                    overflow: hidden;
                    cursor: pointer;
                    position: relative;
                    border: 2px solid transparent;
                    transition: all 0.3s ease;
                }

                .thumbnail-item:hover,
                .thumbnail-item.active {
                    border-color: #3498db;
                    transform: scale(1.05);
                }

                .thumbnail-image {
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                }

                .thumbnail-number {
                    position: absolute;
                    bottom: 2px;
                    right: 2px;
                    background: rgba(0,0,0,0.8);
                    color: white;
                    font-size: 0.7rem;
                    padding: 1px 4px;
                    border-radius: 3px;
                }

                .presentation-progress {
                    display: flex;
                    align-items: center;
                    gap: 1rem;
                }

                .progress-bar {
                    flex: 1;
                    height: 8px;
                    background: #4a6741;
                    border-radius: 4px;
                    overflow: hidden;
                }

                .progress-fill {
                    height: 100%;
                    background: linear-gradient(90deg, #3498db, #2ecc71);
                    transition: width 0.3s ease;
                }

                .slide-timer {
                    color: #bdc3c7;
                    font-family: monospace;
                    font-size: 0.9rem;
                }

                .fullscreen-mode {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100vw;
                    height: 100vh;
                    z-index: 9999;
                    border-radius: 0;
                }

                }

                .enhanced-slide-companion {
                    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
                    border-radius: 12px;
                    padding: 1.5rem;
                    margin: 1rem 0;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                    color: #2d3748;
                }

                .companion-section {
                    background: white;
                    border-radius: 8px;
                    padding: 1rem;
                    margin: 1rem 0;
                    border-left: 4px solid #007bff;
                    transition: transform 0.2s ease;
                    color: #2d3748;
                }

                .companion-section:hover {
                    transform: translateX(5px);
                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
                }

                .companion-section h5 {
                    margin: 0 0 0.75rem 0;
                    color: #2d3748;
                    font-weight: 600;
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                }

                .energy-boost {
                    border-left-color: #ff6b6b;
                    background: linear-gradient(135deg, #fff5f5 0%, #ffffff 100%);
                    color: #2d3748;
                }

                .energy-boost .energy-content {
                    color: #2d3748;
                }

                .detective-toolkit {
                    border-left-color: #4ecdc4;
                    background: linear-gradient(135deg, #f0fdfc 0%, #ffffff 100%);
                    color: #2d3748;
                }

                .detective-toolkit .toolkit-content {
                    color: #2d3748;
                }

                .geographic-wisdom {
                    border-left-color: #45b7d1;
                    background: linear-gradient(135deg, #f0f9ff 0%, #ffffff 100%);
                    color: #2d3748;
                }

                .geographic-wisdom .wisdom-content {
                    color: #2d3748;
                }

                .fun-facts {
                    border-left-color: #f7b731;
                    background: linear-gradient(135deg, #fffbf0 0%, #ffffff 100%);
                    color: #2d3748;
                }

                .fun-facts .fun-content {
                    color: #2d3748;
                }

                .primary-source {
                    border-left-color: #5f27cd;
                    background: linear-gradient(135deg, #f8f7ff 0%, #ffffff 100%);
                    color: #2d3748;
                }

                .primary-source .source-content {
                    color: #2d3748;
                }

                .visual-aid {
                    border-left-color: #00d2d3;
                    background: linear-gradient(135deg, #f0fffe 0%, #ffffff 100%);
                    color: #2d3748;
                }

                .visual-aid .visual-content {
                    color: #2d3748;
                }

                .student-challenge {
                    border-left-color: #ff9ff3;
                    background: linear-gradient(135deg, #fef7ff 0%, #ffffff 100%);
                    color: #2d3748;
                }

                .student-challenge .challenge-content {
                    color: #2d3748;
                }

                .toolkit-items,
                .crisis-response,
                .specialist-skills,
                .team-roles,
                .mastery-path,
                .case-prep-kit,
                .daily-toolkit,
                .csi-kit,
                .interview-kit,
                .challenge-toolkit,
                .victory-toolkit,
                .skills-inventory,
                .finale-toolkit,
                .general-toolkit {
                    display: flex;
                    flex-direction: column;
                    gap: 0.5rem;
                }

                .tool-item,
                .skill-item {
                    background: #f8f9fa;
                    padding: 0.75rem;
                    border-radius: 6px;
                    border-left: 3px solid #28a745;
                    font-size: 0.9rem;
                    display: flex;
                    align-items: flex-start;
                    gap: 0.5rem;
                    color: #2d3748;
                }

                .tool-item strong,
                .skill-item strong {
                    color: #1a202c;
                }

                .urgency-meter,
                .difficulty-badge,
                .scene-status,
                .challenge-level,
                .victory-banner,
                .skill-badge,
                .finale-intensity {
                    background: #dc3545;
                    color: white;
                    padding: 0.5rem 1rem;
                    border-radius: 20px;
                    text-align: center;
                    font-weight: bold;
                    margin: 0.5rem 0;
                    font-size: 0.8rem;
                    text-transform: uppercase;
                }

                .difficulty-badge {
                    background: #ffc107;
                    color: #212529;
                }

                .scene-status {
                    background: #fd7e14;
                }

                .challenge-level {
                    background: #6f42c1;
                }

                .victory-banner,
                .skill-badge {
                    background: #28a745;
                }

                .finale-intensity {
                    background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
                }

                .witness-reliability {
                    background: #17a2b8;
                    color: white;
                    padding: 0.5rem 1rem;
                    border-radius: 15px;
                    text-align: center;
                    font-weight: bold;
                    margin: 0.5rem 0;
                    font-size: 0.8rem;
                }

                .ascii-art {
                    background: #2d3748;
                    color: #e2e8f0;
                    padding: 1rem;
                    border-radius: 8px;
                    font-family: 'Courier New', monospace;
                    overflow-x: auto;
                    margin: 0.5rem 0;
                }

                .ascii-art pre {
                    margin: 0;
                    white-space: pre;
                    font-size: 0.8rem;
                    line-height: 1.2;
                }

                .coordinate-highlight {
                    background: #ffd700;
                    color: #333;
                    padding: 0.2rem 0.4rem;
                    border-radius: 3px;
                    font-weight: bold;
                }

                blockquote {
                    border-left: 4px solid #6c757d;
                    margin: 1rem 0;
                    padding: 1rem;
                    background: #f8f9fa;
                    border-radius: 0 8px 8px 0;
                    font-style: italic;
                    color: #2d3748;
                }

                cite {
                    display: block;
                    margin-top: 0.5rem;
                    font-size: 0.9rem;
                    color: #4a5568;
                    font-style: normal;
                }

                .energy-content,
                .wisdom-content,
                .fun-content,
                .source-content,
                .visual-content,
                .challenge-content {
                    line-height: 1.6;
                    color: #2d3748;
                }

                .energy-content p,
                .wisdom-content p,
                .fun-content p,
                .challenge-content p {
                    margin: 0.5rem 0;
                    color: #2d3748;
                }

                .energy-content strong,
                .wisdom-content strong,
                .fun-content strong,
                .challenge-content strong {
                    color: #1a202c;
                }

                .energy-content em,
                .wisdom-content em,
                .fun-content em,
                .challenge-content em {
                    color: #4a5568;
                    font-style: italic;
                }

                .energy-content ul,
                .wisdom-content ul,
                .fun-content ul,
                .challenge-content ul {
                    color: #2d3748;
                }

                .energy-content li,
                .wisdom-content li,
                .fun-content li,
                .challenge-content li {
                    color: #2d3748;
                }

                @media (max-width: 768px) {
                    .enhanced-slide-companion {
                        padding: 1rem;
                        margin: 0.5rem 0;
                    }
                    
                    .companion-section {
                        padding: 0.75rem;
                        margin: 0.75rem 0;
                    }
                    
                    .ascii-art {
                        padding: 0.5rem;
                    }
                    
                    .ascii-art pre {
                        font-size: 0.7rem;
                    }
                }

                .fullscreen-mode .presentation-viewer {
                    grid-template-columns: 3fr 1fr;
                    height: calc(100vh - 200px);
                }

                @media (max-width: 768px) {
                    .presentation-viewer {
                        grid-template-columns: 1fr;
                    }
                    
                    .slide-notes-panel {
                        max-height: 200px;
                    }
                    
                    .presentation-header {
                        flex-direction: column;
                        gap: 1rem;
                    }
                    
                    .presentation-controls {
                        flex-wrap: wrap;
                        justify-content: center;
                    }
                }
            `;
            document.head.appendChild(style);
            
            // Initialize presentation system
            presentation = new SimulationPresentation();
            
            // Wait for gamma-prompts panel to be available
            function initializePresentationWhenReady() {
                const gammaPanel = document.getElementById('gamma-prompts');
                if (gammaPanel) {
                    presentation.addToPresentationPanel();
                    presentation.generateThumbnails();
                    console.log('ğŸ® Presentation system initialized with 60 slides');
                } else {
                    // Try again in 500ms if panel not ready
                    setTimeout(initializePresentationWhenReady, 500);
                }
            }
            
            // Start initialization with a small delay
            setTimeout(initializePresentationWhenReady, 100);
        });
    </script>
</body>
</html>
